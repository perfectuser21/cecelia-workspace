---
id: dod-kr1-intent-recognition
version: 1.0.0
created: 2026-02-01
updated: 2026-02-01
changelog:
  - 1.0.0: 初始版本 - KR1 意图识别 DoD
---

# DoD - KR1: 意图识别 - 自然语言→OKR/Project/Task

QA: docs/QA-DECISION.md

## 测试文件说明

以下测试文件将在实现过程中创建：
- `apps/core/src/__tests__/intent-recognition.test.ts` - 核心单元测试
- `tests/api/intent-brain-integration.test.ts` - Brain API 集成测试
- `tests/api/intent-task-integration.test.ts` - Task API 集成测试
- `tests/api/intent-end-to-end.test.ts` - 端到端集成测试

## 验收标准

### 功能验收

#### 核心意图识别
- [ ] API 端点 `POST /api/intent/recognize` 接收自然语言输入并返回结构化 JSON
      Test: apps/core/src/__tests__/intent-recognition.test.ts

- [ ] 正确识别创建 Task 意图（如"实现用户登录接口"）
      Test: apps/core/src/__tests__/intent-recognition.test.ts

- [ ] 正确识别创建 Goal 意图（如"完成整个用户认证系统作为 P0 目标"）
      Test: apps/core/src/__tests__/intent-recognition.test.ts

- [ ] 正确识别创建 Project 意图（如"新建一个电商项目"）
      Test: apps/core/src/__tests__/intent-recognition.test.ts

- [ ] 正确识别查询任务意图（如"我有哪些待办任务"）
      Test: apps/core/src/__tests__/intent-recognition.test.ts

- [ ] 正确识别更新任务意图（如"把登录功能标记为完成"）
      Test: apps/core/src/__tests__/intent-recognition.test.ts

#### 实体提取
- [ ] 从自然语言中提取标题/名称
      Test: apps/core/src/__tests__/intent-recognition.test.ts

- [ ] 从自然语言中提取优先级（P0/P1/P2）
      Test: apps/core/src/__tests__/intent-recognition.test.ts

- [ ] 从自然语言中提取状态（pending/in_progress/completed）
      Test: apps/core/src/__tests__/intent-recognition.test.ts

- [ ] 从自然语言中提取关联关系（属于哪个 Project/Goal）
      Test: apps/core/src/__tests__/intent-recognition.test.ts

#### 准确性要求
- [ ] 对于明确的创建类请求（如"创建一个任务：实现登录"），准确率达到 100%
      Test: apps/core/src/__tests__/intent-recognition.test.ts

- [ ] 对于模糊的请求（如"搞一个登录"），能够识别为创建任务并返回确认提示
      Test: apps/core/src/__tests__/intent-recognition.test.ts

- [ ] 能够区分 Goal（宏观目标）、Project（项目）和 Task（具体任务）的语义差异
      Test: apps/core/src/__tests__/intent-recognition.test.ts

#### 性能要求
- [ ] API 响应时间 < 500ms
      Test: apps/core/src/__tests__/intent-recognition.test.ts

#### 集成要求
- [ ] 识别结果可转换为 Brain API action 格式（如 create-task, create-goal）
      Test: apps/core/src/__tests__/intent-recognition.test.ts

- [ ] 与 Brain API (`/api/brain/action/*`) 集成成功
      Test: tests/api/intent-brain-integration.test.ts

- [ ] 与 Task Management API 集成，支持任务 CRUD 操作
      Test: tests/api/intent-task-integration.test.ts

- [ ] 提供完整的 TypeScript 类型支持
      Test: manual:检查 apps/core/src/types/intent.types.ts 文件存在且定义了 IntentType, IntentEntity, IntentRecognitionResult 等类型，执行 tsc --noEmit 无类型错误

### 测试验收
- [ ] 单元测试覆盖核心识别逻辑
      Test: apps/core/src/__tests__/intent-recognition.test.ts (待创建)

- [ ] 集成测试验证完整的识别→执行流程
      Test: tests/api/intent-end-to-end.test.ts (待创建) - 验证从 POST /api/intent/recognize 到 Brain API 执行的完整流程，包括至少 3 种意图类型的端到端测试

- [ ] 至少 10 个真实场景的测试用例通过
      Test: apps/core/src/__tests__/intent-recognition.test.ts (待创建)

- [ ] npm run test 通过（vitest）
      Test: auto:npm run test

### 文档验收
- [ ] API 文档说明接口使用方法
      Test: manual:检查 README.md 或 docs/API.md 包含 POST /api/intent/recognize 的请求/响应示例

- [ ] 代码注释解释关键算法逻辑
      Test: manual:检查 intent-recognition.service.ts 和 nlp-parser.ts 核心函数包含 JSDoc 注释说明算法逻辑

## 验收场景

### 场景 1：创建 Task
- [ ] 输入"实现用户登录接口"，返回正确的 CREATE_TASK 意图和实体
      Test: apps/core/src/__tests__/intent-recognition.test.ts

### 场景 2：创建 Goal
- [ ] 输入"完成整个用户认证系统作为 P0 目标"，返回正确的 CREATE_GOAL 意图和 P0 优先级
      Test: apps/core/src/__tests__/intent-recognition.test.ts

### 场景 3：查询任务
- [ ] 输入"我有哪些待办任务"，返回正确的 QUERY_TASKS 意图和 pending 状态过滤
      Test: apps/core/src/__tests__/intent-recognition.test.ts

### 场景 4：更新状态
- [ ] 输入"把登录功能标记为完成"，返回正确的 UPDATE_TASK 意图和 completed 状态
      Test: apps/core/src/__tests__/intent-recognition.test.ts

## 非验收项（明确排除）

- ❌ 多轮对话功能
- ❌ 上下文记忆功能
- ❌ 使用机器学习模型
- ❌ 前端界面实现
- ❌ 语音输入支持
- ❌ 多语言支持（仅中英文）
- ❌ 智能推荐功能
