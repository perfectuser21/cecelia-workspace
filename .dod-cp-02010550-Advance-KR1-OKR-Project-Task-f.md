# DoD - Intent Recognition API Integration & Bug Fixes

**QA**: docs/QA-DECISION.md

## 验收标准

### Bug Fixes (Audit L1+L2)

- [ ] L1 Fixed: Dependencies installed (vitest in node_modules)
      Test: manual:ls node_modules/vitest

- [ ] L2 Fixed: Context validation rejects null correctly
      Test: apps/core/src/__tests__/intent-recognition.test.ts

- [ ] Build succeeds without errors
      Test: manual:npm run build

### 功能验收

- [ ] Intent API endpoint `/api/intent/recognize` returns 200 status code with valid JSON response
      Test: apps/core/src/__tests__/intent-recognition.test.ts

- [ ] Intent API endpoint `/api/intent/health` returns healthy status
      Test: apps/core/src/__tests__/intent-recognition.test.ts

- [ ] API can recognize "创建目标：完成 KR1" and return create-goal action
      Test: apps/core/src/__tests__/intent-recognition.test.ts

- [ ] API can recognize "查看所有待办任务" and return query-tasks action
      Test: apps/core/src/__tests__/intent-recognition.test.ts

- [ ] API response time < 500ms for typical requests
      Test: apps/core/src/__tests__/intent-recognition.test.ts

- [ ] Routes are properly registered in server.ts at `/api/intent`
      Test: manual:verify server.ts imports and registers intentRoutes

- [ ] curl test of `/api/intent/health` returns 200
      Test: manual:curl http://localhost:5212/api/intent/health

- [ ] curl test of `/api/intent/recognize` with sample input returns correct action
      Test: manual:curl -X POST http://localhost:5212/api/intent/recognize -d '{"text":"创建目标"}'

### 测试验收

- [ ] All existing intent recognition tests pass
      Test: apps/core/src/__tests__/intent-recognition.test.ts

- [ ] No TypeScript compilation errors
      Test: manual:npm run build

- [ ] Server starts without errors
      Test: manual:npm run dev

## 非功能验收

- [ ] Code follows existing patterns in the codebase
      Test: manual:code review

- [ ] No new dependencies required
      Test: manual:package.json unchanged

- [ ] Documentation updated if needed
      Test: manual:check if README or API docs need updates

## Success Criteria from PRD

✅ Intent API endpoints accessible
✅ Endpoint validation with curl tests
✅ Existing tests pass
✅ Integration tests verify intent recognition works end-to-end
