{
  "meta": {
    "project": "zenithjoy-core",
    "feature_branch": "feature/shared-config",
    "created_at": "2026-01-22T11:00:00Z",
    "status": "approved"
  },
  "background": "在 zenithjoy-core 中建立全局共享的代码质量配置，让所有 zenithjoy 项目（autopilot、engine）继承统一的 ESLint、Prettier、TypeScript 配置和 CI 模板。Core 作为基础设施项目，是存放共享配置的最佳位置。",
  "goals": [
    "在 core 中创建 packages/shared-config 目录",
    "创建 @zenithjoy/eslint-config 共享包",
    "创建 @zenithjoy/prettier-config 共享包",
    "创建 @zenithjoy/tsconfig 共享包",
    "创建 CI 模板供各项目使用",
    "让 autopilot 迁移到共享配置"
  ],
  "non_goals": [
    "不修改业务逻辑代码",
    "不发布到 npm（使用本地 file: 路径引用）"
  ],
  "checkpoints": [
    {
      "id": "CP-001",
      "name": "创建 shared-config 目录结构",
      "type": "config",
      "depends_on": null,
      "size": "small",
      "layer": "L1",
      "description": "在 zenithjoy-core 中创建 packages/shared-config 目录结构。",
      "dod": [
        "创建 packages/shared-config/ 目录",
        "创建 packages/shared-config/eslint-config/",
        "创建 packages/shared-config/prettier-config/",
        "创建 packages/shared-config/tsconfig/",
        "创建 packages/shared-config/ci-templates/"
      ],
      "verify_commands": [
        "ls -la /home/xx/dev/zenithjoy-core/packages/shared-config/"
      ],
      "status": "done"
    },
    {
      "id": "CP-002",
      "name": "创建 eslint-config 包",
      "type": "config",
      "depends_on": "CP-001",
      "size": "medium",
      "layer": "L1",
      "description": "创建 @zenithjoy/eslint-config 包，包含 React + TypeScript 的 ESLint 9.x flat config。基于 autopilot 中已验证的配置。",
      "dod": [
        "创建 eslint-config/package.json (name: @zenithjoy/eslint-config)",
        "创建 eslint-config/index.js (ESLint 9.x flat config)",
        "包含 @typescript-eslint 规则",
        "包含 eslint-plugin-react-hooks",
        "包含 eslint-config-prettier"
      ],
      "verify_commands": [
        "cat /home/xx/dev/zenithjoy-core/packages/shared-config/eslint-config/package.json"
      ],
      "status": "done"
    },
    {
      "id": "CP-003",
      "name": "创建 prettier-config 包",
      "type": "config",
      "depends_on": "CP-001",
      "size": "small",
      "layer": "L1",
      "description": "创建 @zenithjoy/prettier-config 包。",
      "dod": [
        "创建 prettier-config/package.json (name: @zenithjoy/prettier-config)",
        "创建 prettier-config/index.json",
        "配置: semi:true, singleQuote:true, tabWidth:2, trailingComma:es5, printWidth:100"
      ],
      "verify_commands": [
        "cat /home/xx/dev/zenithjoy-core/packages/shared-config/prettier-config/index.json"
      ],
      "status": "done"
    },
    {
      "id": "CP-004",
      "name": "创建 tsconfig 包",
      "type": "config",
      "depends_on": "CP-001",
      "size": "small",
      "layer": "L1",
      "description": "创建 @zenithjoy/tsconfig 包，包含 base 和 react 配置。",
      "dod": [
        "创建 tsconfig/package.json (name: @zenithjoy/tsconfig)",
        "创建 tsconfig/base.json (strict mode)",
        "创建 tsconfig/react.json (extends base + JSX)",
        "创建 tsconfig/node.json (extends base + Node)"
      ],
      "verify_commands": [
        "cat /home/xx/dev/zenithjoy-core/packages/shared-config/tsconfig/react.json"
      ],
      "status": "done"
    },
    {
      "id": "CP-005",
      "name": "创建 CI 模板",
      "type": "config",
      "depends_on": "CP-001",
      "size": "small",
      "layer": "L1",
      "description": "创建可复用的 GitHub Actions CI 模板。",
      "dod": [
        "创建 ci-templates/frontend-ci.yml",
        "包含 install, type-check, lint, test, build 步骤",
        "支持 Node.js 20",
        "创建 ci-templates/README.md 说明如何使用"
      ],
      "verify_commands": [
        "cat /home/xx/dev/zenithjoy-core/packages/shared-config/ci-templates/frontend-ci.yml"
      ],
      "status": "done"
    },
    {
      "id": "CP-006",
      "name": "autopilot 迁移到共享配置",
      "type": "config",
      "depends_on": "CP-002",
      "size": "medium",
      "layer": "L2",
      "description": "让 zenithjoy-autopilot 使用 core 中的共享配置包。",
      "dod": [
        "package.json 添加共享包依赖 (file:../../../zenithjoy-core/packages/shared-config/...)",
        "eslint.config.js 改为 import from @zenithjoy/eslint-config",
        ".prettierrc 改为 @zenithjoy/prettier-config",
        "tsconfig.json extends @zenithjoy/tsconfig/react.json",
        "npm install 成功",
        "npm run lint 通过",
        "npm run build 通过"
      ],
      "verify_commands": [
        "cd /home/xx/dev/zenithjoy-autopilot/apps/dashboard/frontend && npm run lint && npm run build"
      ],
      "status": "done"
    }
  ]
}
