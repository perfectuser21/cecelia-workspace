---
id: prd-command-center-v3
version: 1.1.0
created: 2026-01-31
updated: 2026-01-31
changelog:
  - 1.0.0: 初始版本
  - 1.1.0: 补充背景、API 需求、完善成功标准
---

# PRD - Command Center 数据展示优化

## 背景

当前 Command Center 存在以下问题：
- 用户无法快速了解今日任务执行情况
- Tasks 列表无分组，难以按项目管理
- OKR 进度不直观，需要手动计算

**需求来源**: 日常使用反馈，提升 Command Center 作为工作总览的实用性。

## 目标

优化 Command Center 的数据展示，让用户能清晰看到：
- VPS 实时状态
- 今日完成任务数
- OKR/Project/Task 各项进度

## 功能需求

### 1. 总览页改进 (/command)

**VPS 状态卡片**：
- 实时显示槽位使用情况（当前已有）
- 每 10 秒自动刷新

**今日执行卡片**：
- 显示今日完成任务数
- 显示今日启动任务数
- 显示当前执行中的任务名称

**OKR 进度卡片**：
- 显示 O1 的整体进度百分比
- 显示各 KR 的完成状态（✅/🔄/⏳）
- 点击展开看详情

**底部统计**：
- Tasks: X 完成 / Y 进行中 / Z 队列
- Projects: X 个活跃项目

### 2. Tasks 页改进 (/command/tasks)

**按 Project 分组显示**：
```
📁 cecelia-workspace (8 tasks)
  ├─ ✅ 实现 Quick Actions 控制层
  ├─ ✅ 创建 Task Database Schema
  ├─ 🔄 自动生成标准化 PRD/TRD
  └─ ⏳ 实现项目健康度检查...

📁 未分配 (5 tasks)
  ├─ ⏳ 添加项目状态机
  └─ ...
```

**筛选功能**：
- 按状态筛选（当前已有）
- 按 Project 筛选（新增）
- 按优先级筛选（新增）

### 3. OKR 页改进 (/command/okr)

**清晰的层级结构**：
```
🎯 O1: Cecelia 自驱进化 (进度: 35%)
├─ KR1: 意图识别 ████████░░ 80%
│   ├─ ✅ 实现 parse-intent API
│   ├─ ✅ 添加实体提取
│   └─ ⏳ 意图到 Action 映射
├─ KR2: PRD/TRD 自动生成 ███░░░░░░░ 30%
│   └─ 🔄 自动生成标准化 PRD/TRD
└─ KR3: 项目系统 ░░░░░░░░░░ 0%
```

**进度计算**：
- KR 进度 = 完成的 Tasks 数 / 总 Tasks 数
- O 进度 = 各 KR 进度的平均值

### 4. Projects 页改进 (/command/projects)

**显示项目卡片**：
- 项目名称
- 关联的 Tasks 数量和完成率
- 最近活动时间

## 涉及文件

**前端**：
- apps/dashboard/frontend/src/pages/CommandCenter.tsx
- apps/core/features/panorama/pages/CommandCenter.tsx（同步）

**后端（如需新增）**：
- apps/core/src/routes/tasks.js - 添加今日统计端点

## 后端需求

### 今日统计 API

现有 `/api/tasks/tasks` 已支持基本查询，新增统计逻辑：
- 今日完成数：`status = 'completed' AND updated_at >= today`
- 今日启动数：`status = 'in_progress' AND updated_at >= today`
- 时区：使用 UTC，前端负责本地化显示

注：Goal 表中 goal_id 关联 Task，可实现 O → KR → Task 层级显示。

## 成功标准

### 总览页 (/command)
- [ ] 显示今日完成任务数
- [ ] 显示今日启动任务数
- [ ] 显示当前执行中的任务名称

### Tasks 页 (/command/tasks)
- [ ] 按 Project 分组显示
- [ ] 支持按状态筛选（已有）
- [ ] 支持按 Project 筛选
- [ ] 支持按优先级筛选

### OKR 页 (/command/okr)
- [ ] 显示 O → KR → Task 层级结构
- [ ] 显示进度条

### Projects 页 (/command/projects)
- [ ] 显示关联 Tasks 数量
- [ ] 显示完成率

### 通用
- [ ] 数据每 10 秒自动刷新

## 优先级

P0 - 影响日常使用体验
