---
id: trd-<feature-name>
version: 1.0.0
created: YYYY-MM-DD
updated: YYYY-MM-DD
status: draft | approved | completed
---

# TRD: <Feature Name>

## 1. 概述

### 1.1 目标
简述这个功能要解决什么问题，达成什么目标。

### 1.2 背景
为什么需要这个功能？当前系统的痛点是什么？

### 1.3 范围
- **包含**：列出本次实现包含的内容
- **不包含**：明确排除的内容，避免范围蔓延

---

## 2. 系统架构

### 2.1 架构图

```
┌─────────────────────────────────────────────────────────────┐
│                        [顶层组件]                            │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  [组件 A]  ──────→  [组件 B]  ──────→  [组件 C]              │
│      │                  │                  │                │
│      ▼                  ▼                  ▼                │
│  [数据层 A]         [数据层 B]         [数据层 C]            │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 2.2 组件说明

| 组件 | 职责 | 依赖 |
|------|------|------|
| 组件 A | 描述职责 | 无 |
| 组件 B | 描述职责 | 组件 A |
| 组件 C | 描述职责 | 组件 B |

---

## 3. 数据模型

### 3.1 数据库变更

```sql
-- 表结构变更
ALTER TABLE xxx ADD COLUMN yyy TYPE;

-- 新表
CREATE TABLE zzz (
    id UUID PRIMARY KEY,
    ...
);
```

### 3.2 数据流

```
[输入] → [处理 1] → [处理 2] → [输出]
           ↓
       [存储]
```

---

## 4. PRD 拆解

### 4.1 依赖图

```
PRD-01 (基础)
    ↓
PRD-02 (API) ─────┐
    ↓             │
PRD-03 (逻辑)     │
    ↓             │
PRD-04 (自动化) ──┤
    ↓             │
PRD-05 (前端) ←───┘
    ↓
PRD-06 (验收)
```

### 4.2 PRD 清单

| 序号 | PRD 文件 | 描述 | 依赖 | 预估复杂度 |
|------|----------|------|------|------------|
| 01 | 01-xxx.prd.md | 基础数据模型 | 无 | 低 |
| 02 | 02-xxx.prd.md | CRUD API | 01 | 中 |
| 03 | 03-xxx.prd.md | 业务逻辑 | 02 | 中 |
| 04 | 04-xxx.prd.md | 自动化机制 | 03 | 中 |
| 05 | 05-xxx.prd.md | 前端页面 | 02, 03 | 中 |
| 06 | 06-verify.prd.md | 验收与清理 | 01-05 | 低 |

---

## 5. 接口设计

### 5.1 API 端点

| 方法 | 路径 | 描述 |
|------|------|------|
| GET | /api/xxx | 获取列表 |
| POST | /api/xxx | 创建 |
| GET | /api/xxx/:id | 获取详情 |
| PATCH | /api/xxx/:id | 更新 |
| DELETE | /api/xxx/:id | 删除 |

### 5.2 请求/响应示例

```json
// POST /api/xxx
{
  "field1": "value1",
  "field2": "value2"
}

// Response
{
  "id": "uuid",
  "field1": "value1",
  "created_at": "2026-01-29T00:00:00Z"
}
```

---

## 6. 技术决策

### 6.1 决策记录

| 决策点 | 选项 A | 选项 B | 决定 | 原因 |
|--------|--------|--------|------|------|
| 数据存储 | PostgreSQL | MongoDB | PostgreSQL | 已有基础设施 |
| 状态管理 | 数据库 | Redis | 数据库 | 事务一致性 |

### 6.2 风险与缓解

| 风险 | 影响 | 缓解措施 |
|------|------|----------|
| 性能问题 | 中 | 添加索引，分页查询 |
| 并发冲突 | 低 | 使用事务锁 |

---

## 7. 验收标准

### 7.1 功能验收

- [ ] 功能 A 正常工作
- [ ] 功能 B 正常工作
- [ ] API 响应符合规范

### 7.2 技术验收

- [ ] 所有测试通过
- [ ] 无 linting 错误
- [ ] 数据库迁移可回滚
- [ ] 服务可正常启动

### 7.3 集成验收

- [ ] 前端页面可访问
- [ ] API 与前端联调正常
- [ ] 与现有功能无冲突

---

## 8. 附录

### 8.1 相关文档

- [相关 PRD 链接]
- [设计稿链接]

### 8.2 变更日志

| 版本 | 日期 | 作者 | 变更 |
|------|------|------|------|
| 1.0.0 | YYYY-MM-DD | xxx | 初始版本 |
