import{c as re,b as g,r as S,j as e,R as Re,l as ce,A as xe,T as _e}from"./index-D3TxHD60.js";import{L as Be}from"./loader-2-DtOB36Rc.js";import{A as me}from"./alert-circle-CRdhZKpQ.js";import{S as he}from"./server-D8f45w6u.js";import{f as T,L as X,N as q,o as K,C as Q,A as Ie,m as W,j as ue,O as ze,n as pe,c as Ae,y as Ve,q as Fe,u as Te,i as ee,G as We,k as fe,z as ye,D as Ke,B as He,X as Pe,Y as Se,F as Ue,R as ge,K as Ge,J as ve}from"./generateCategoricalChart-Cfmt5suQ.js";import{C as Xe}from"./clock-CbZ__p8U.js";import{C as qe}from"./check-circle-2-BGLLCtRT.js";import{X as Ye}from"./x-circle-DGPXlHnk.js";import"./tiny-invariant-BaFNuDhB.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=re("Container",[["path",{d:"M22 7.7c0-.6-.4-1.2-.8-1.5l-6.3-3.9a1.72 1.72 0 0 0-1.7 0l-10.3 6c-.5.2-.9.8-.9 1.4v6.6c0 .5.4 1.2.8 1.5l6.3 3.9a1.72 1.72 0 0 0 1.7 0l10.3-6c.5-.3.9-1 .9-1.5Z",key:"1t2lqe"}],["path",{d:"M10 21.9V14L2.1 9.1",key:"o7czzq"}],["path",{d:"m10 14 11.9-6.9",key:"zm5e20"}],["path",{d:"M14 19.8v-8.1",key:"159ecu"}],["path",{d:"M18 17.5V9.4",key:"11uown"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=re("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=re("MemoryStick",[["path",{d:"M6 19v-3",key:"1nvgqn"}],["path",{d:"M10 19v-3",key:"iu8nkm"}],["path",{d:"M14 19v-3",key:"kcehxu"}],["path",{d:"M18 19v-3",key:"1vh91z"}],["path",{d:"M8 11V9",key:"63erz4"}],["path",{d:"M16 11V9",key:"fru6f3"}],["path",{d:"M12 11V9",key:"ha00sb"}],["path",{d:"M2 15h20",key:"16ne18"}],["path",{d:"M2 7a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v1.1a2 2 0 0 0 0 3.837V17a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-5.1a2 2 0 0 0 0-3.837Z",key:"lhddv3"}]]);var Je=["layout","type","stroke","connectNulls","isRange","ref"],Qe=["key"],Oe;function H(t){"@babel/helpers - typeof";return H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},H(t)}function Ce(t,r){if(t==null)return{};var s=et(t,r),a,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)a=o[i],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(s[a]=t[a])}return s}function et(t,r){if(t==null)return{};var s={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(r.indexOf(a)>=0)continue;s[a]=t[a]}return s}function F(){return F=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},F.apply(this,arguments)}function ke(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,a)}return s}function I(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?ke(Object(s),!0).forEach(function(a){$(t,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ke(Object(s)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(s,a))})}return t}function tt(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Ne(t,r){for(var s=0;s<r.length;s++){var a=r[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,Ee(a.key),a)}}function rt(t,r,s){return r&&Ne(t.prototype,r),s&&Ne(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function at(t,r,s){return r=J(r),st(t,Me()?Reflect.construct(r,s||[],J(t).constructor):r.apply(t,s))}function st(t,r){if(r&&(H(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return it(t)}function it(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Me(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Me=function(){return!!t})()}function J(t){return J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},J(t)}function nt(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&te(t,r)}function te(t,r){return te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},te(t,r)}function $(t,r,s){return r=Ee(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function Ee(t){var r=lt(t,"string");return H(r)=="symbol"?r:r+""}function lt(t,r){if(H(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var a=s.call(t,r);if(H(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var D=function(t){function r(){var s;tt(this,r);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return s=at(this,r,[].concat(i)),$(s,"state",{isAnimationFinished:!0}),$(s,"id",Te("recharts-area-")),$(s,"handleAnimationEnd",function(){var l=s.props.onAnimationEnd;s.setState({isAnimationFinished:!0}),ee(l)&&l()}),$(s,"handleAnimationStart",function(){var l=s.props.onAnimationStart;s.setState({isAnimationFinished:!1}),ee(l)&&l()}),s}return nt(r,t),rt(r,[{key:"renderDots",value:function(a,i,o){var l=this.props.isAnimationActive,d=this.state.isAnimationFinished;if(l&&!d)return null;var c=this.props,x=c.dot,h=c.points,m=c.dataKey,p=T(this.props,!1),w=T(x,!0),f=h.map(function(v,O){var b=I(I(I({key:"dot-".concat(O),r:3},p),w),{},{index:O,cx:v.x,cy:v.y,dataKey:m,value:v.value,payload:v.payload,points:h});return r.renderDotItem(x,b)}),A={clipPath:a?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return g.createElement(X,F({className:"recharts-area-dots"},A),f)}},{key:"renderHorizontalRect",value:function(a){var i=this.props,o=i.baseLine,l=i.points,d=i.strokeWidth,c=l[0].x,x=l[l.length-1].x,h=a*Math.abs(c-x),m=q(l.map(function(p){return p.y||0}));return K(o)&&typeof o=="number"?m=Math.max(o,m):o&&Array.isArray(o)&&o.length&&(m=Math.max(q(o.map(function(p){return p.y||0})),m)),K(m)?g.createElement("rect",{x:c<x?c:c-h,y:0,width:h,height:Math.floor(m+(d?parseInt("".concat(d),10):1))}):null}},{key:"renderVerticalRect",value:function(a){var i=this.props,o=i.baseLine,l=i.points,d=i.strokeWidth,c=l[0].y,x=l[l.length-1].y,h=a*Math.abs(c-x),m=q(l.map(function(p){return p.x||0}));return K(o)&&typeof o=="number"?m=Math.max(o,m):o&&Array.isArray(o)&&o.length&&(m=Math.max(q(o.map(function(p){return p.x||0})),m)),K(m)?g.createElement("rect",{x:0,y:c<x?c:c-h,width:m+(d?parseInt("".concat(d),10):1),height:Math.floor(h)}):null}},{key:"renderClipRect",value:function(a){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(a):this.renderHorizontalRect(a)}},{key:"renderAreaStatically",value:function(a,i,o,l){var d=this.props,c=d.layout,x=d.type,h=d.stroke,m=d.connectNulls,p=d.isRange;d.ref;var w=Ce(d,Je);return g.createElement(X,{clipPath:o?"url(#clipPath-".concat(l,")"):null},g.createElement(Q,F({},T(w,!0),{points:a,connectNulls:m,type:x,baseLine:i,layout:c,stroke:"none",className:"recharts-area-area"})),h!=="none"&&g.createElement(Q,F({},T(this.props,!1),{className:"recharts-area-curve",layout:c,type:x,connectNulls:m,fill:"none",points:a})),h!=="none"&&p&&g.createElement(Q,F({},T(this.props,!1),{className:"recharts-area-curve",layout:c,type:x,connectNulls:m,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(a,i){var o=this,l=this.props,d=l.points,c=l.baseLine,x=l.isAnimationActive,h=l.animationBegin,m=l.animationDuration,p=l.animationEasing,w=l.animationId,f=this.state,A=f.prevPoints,v=f.prevBaseLine;return g.createElement(Ie,{begin:h,duration:m,isActive:x,easing:p,from:{t:0},to:{t:1},key:"area-".concat(w),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(O){var b=O.t;if(A){var E=A.length/d.length,u=d.map(function(P,R){var L=Math.floor(R*E);if(A[L]){var M=A[L],z=W(M.x,P.x),_=W(M.y,P.y);return I(I({},P),{},{x:z(b),y:_(b)})}return P}),y;if(K(c)&&typeof c=="number"){var j=W(v,c);y=j(b)}else if(ue(c)||ze(c)){var C=W(v,0);y=C(b)}else y=c.map(function(P,R){var L=Math.floor(R*E);if(v[L]){var M=v[L],z=W(M.x,P.x),_=W(M.y,P.y);return I(I({},P),{},{x:z(b),y:_(b)})}return P});return o.renderAreaStatically(u,y,a,i)}return g.createElement(X,null,g.createElement("defs",null,g.createElement("clipPath",{id:"animationClipPath-".concat(i)},o.renderClipRect(b))),g.createElement(X,{clipPath:"url(#animationClipPath-".concat(i,")")},o.renderAreaStatically(d,c,a,i)))})}},{key:"renderArea",value:function(a,i){var o=this.props,l=o.points,d=o.baseLine,c=o.isAnimationActive,x=this.state,h=x.prevPoints,m=x.prevBaseLine,p=x.totalLength;return c&&l&&l.length&&(!h&&p>0||!pe(h,l)||!pe(m,d))?this.renderAreaWithAnimation(a,i):this.renderAreaStatically(l,d,a,i)}},{key:"render",value:function(){var a,i=this.props,o=i.hide,l=i.dot,d=i.points,c=i.className,x=i.top,h=i.left,m=i.xAxis,p=i.yAxis,w=i.width,f=i.height,A=i.isAnimationActive,v=i.id;if(o||!d||!d.length)return null;var O=this.state.isAnimationFinished,b=d.length===1,E=Ae("recharts-area",c),u=m&&m.allowDataOverflow,y=p&&p.allowDataOverflow,j=u||y,C=ue(v)?this.id:v,P=(a=T(l,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},R=P.r,L=R===void 0?3:R,M=P.strokeWidth,z=M===void 0?2:M,_=Ve(l)?l:{},U=_.clipDot,G=U===void 0?!0:U,V=L*2+z;return g.createElement(X,{className:E},u||y?g.createElement("defs",null,g.createElement("clipPath",{id:"clipPath-".concat(C)},g.createElement("rect",{x:u?h:h-w/2,y:y?x:x-f/2,width:u?w:w*2,height:y?f:f*2})),!G&&g.createElement("clipPath",{id:"clipPath-dots-".concat(C)},g.createElement("rect",{x:h-V/2,y:x-V/2,width:w+V,height:f+V}))):null,b?null:this.renderArea(j,C),(l||b)&&this.renderDots(j,G,C),(!A||O)&&Fe.renderCallByParent(this.props,d))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,curBaseLine:a.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:a.points!==i.curPoints||a.baseLine!==i.curBaseLine?{curPoints:a.points,curBaseLine:a.baseLine}:null}}])}(S.PureComponent);Oe=D;$(D,"displayName","Area");$(D,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!We.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});$(D,"getBaseValue",function(t,r,s,a){var i=t.layout,o=t.baseValue,l=r.props.baseValue,d=l??o;if(K(d)&&typeof d=="number")return d;var c=i==="horizontal"?a:s,x=c.scale.domain();if(c.type==="number"){var h=Math.max(x[0],x[1]),m=Math.min(x[0],x[1]);return d==="dataMin"?m:d==="dataMax"||h<0?h:Math.max(Math.min(x[0],x[1]),0)}return d==="dataMin"?x[0]:d==="dataMax"?x[1]:x[0]});$(D,"getComposedData",function(t){var r=t.props,s=t.item,a=t.xAxis,i=t.yAxis,o=t.xAxisTicks,l=t.yAxisTicks,d=t.bandSize,c=t.dataKey,x=t.stackedData,h=t.dataStartIndex,m=t.displayedData,p=t.offset,w=r.layout,f=x&&x.length,A=Oe.getBaseValue(r,s,a,i),v=w==="horizontal",O=!1,b=m.map(function(u,y){var j;f?j=x[h+y]:(j=fe(u,c),Array.isArray(j)?O=!0:j=[A,j]);var C=j[1]==null||f&&fe(u,c)==null;return v?{x:ye({axis:a,ticks:o,bandSize:d,entry:u,index:y}),y:C?null:i.scale(j[1]),value:j,payload:u}:{x:C?null:a.scale(j[1]),y:ye({axis:i,ticks:l,bandSize:d,entry:u,index:y}),value:j,payload:u}}),E;return f||O?E=b.map(function(u){var y=Array.isArray(u.value)?u.value[0]:null;return v?{x:u.x,y:y!=null&&u.y!=null?i.scale(y):null}:{x:y!=null?a.scale(y):null,y:u.y}}):E=v?i.scale(A):a.scale(A),I({points:b,baseLine:E,layout:w,isRange:O},p)});$(D,"renderDotItem",function(t,r){var s;if(g.isValidElement(t))s=g.cloneElement(t,r);else if(ee(t))s=t(r);else{var a=Ae("recharts-area-dot",typeof t!="boolean"?t.className:""),i=r.key,o=Ce(r,Qe);s=g.createElement(Ke,F({},o,{key:i,className:a}))}return s});var we=He({chartName:"AreaChart",GraphicalChild:D,axisComponents:[{axisType:"xAxis",AxisComp:Pe},{axisType:"yAxis",AxisComp:Se}],formatAxisMap:Ue});const ot="";async function Y(t){const r=await fetch(`${ot}${t}`);if(!r.ok)throw new Error(`API error: ${r.status}`);return r.json()}const Z={getStats:async()=>Y("/api/v1/vps-monitor/stats"),getContainers:async()=>Y("/api/v1/vps-monitor/containers"),getServices:async()=>Y("/api/v1/vps-monitor/services"),getHistory:async(t=24)=>(await Y(`/api/v1/vps-monitor/history?hours=${t}`)).metrics};function gt(){var _,U,G,V,ae,se,ie,ne,le,oe;const[t,r]=S.useState(null),[s,a]=S.useState([]),[i,o]=S.useState([]),[l,d]=S.useState({running:0,total:0}),[c,x]=S.useState(!0),[h,m]=S.useState(null),[p,w]=S.useState(""),[f,A]=S.useState([]),[v,O]=S.useState(1),[b,E]=S.useState(!1),u=async()=>{try{const[n,k,N]=await Promise.all([Z.getStats(),Z.getContainers(),Z.getServices()]);r(n),a(k.containers||[]),d({running:k.running||0,total:k.total||0}),o(N.services||[]),w(new Date().toLocaleTimeString("zh-CN")),m(null)}catch(n){m(n instanceof Error?n.message:"获取数据失败")}finally{x(!1)}},y=async()=>{E(!0);try{const n=await Z.getHistory(v);A(n)}catch(n){console.error("Failed to fetch history:",n)}finally{E(!1)}},j=()=>{x(!0),u(),y()};S.useEffect(()=>{u();const n=setInterval(u,1e4);return()=>clearInterval(n)},[]),S.useEffect(()=>{y();const n=setInterval(y,6e4);return()=>clearInterval(n)},[v]);const C=n=>{if(n===0)return"0 B";const k=1024,N=["B","KB","MB","GB","TB"],B=Math.floor(Math.log(n)/Math.log(k));return`${(n/Math.pow(k,B)).toFixed(1)} ${N[B]}`},P=n=>{const k=Math.floor(n/86400),N=Math.floor(n%86400/3600),B=Math.floor(n%3600/60);return k>0?`${k}天 ${N}小时`:N>0?`${N}小时 ${B}分钟`:`${B}分钟`},R=n=>n.includes("Up")||n==="running"?e.jsx(qe,{className:"w-4 h-4"}):n.includes("Exited")||n==="stopped"?e.jsx(Ye,{className:"w-4 h-4"}):e.jsx(me,{className:"w-4 h-4"}),L=n=>n<60?"bg-green-500":n<80?"bg-yellow-500":"bg-red-500",M=({data:n,dataKey:k,color:N,title:B,icon:De,currentValue:Le,unit:de="%"})=>e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 p-5 tilt-card",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center shadow-lg",style:{background:`linear-gradient(135deg, ${N}, ${N}dd)`,boxShadow:`0 8px 16px ${N}40`},children:e.jsx(De,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:B}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[Le,de]})]})]})}),e.jsx("div",{className:"h-24",children:n.length>1?e.jsx(ge,{width:"100%",height:"100%",children:e.jsxs(we,{data:n,margin:{top:0,right:0,left:0,bottom:0},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:`gradient-${k}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:N,stopOpacity:.3}),e.jsx("stop",{offset:"100%",stopColor:N,stopOpacity:.05})]})}),e.jsx(D,{type:"monotone",dataKey:k,stroke:N,strokeWidth:2,fill:`url(#gradient-${k})`,isAnimationActive:!1}),e.jsx(ve,{contentStyle:{backgroundColor:"rgba(255,255,255,0.95)",border:"none",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",padding:"8px 12px"},labelStyle:{color:"#6b7280",fontSize:"12px"},formatter:$e=>[`${$e}${de}`,B]})]})}):e.jsx("div",{className:"h-full flex items-center justify-center text-gray-400 dark:text-gray-500 text-sm",children:"数据采集中..."})})]});if(c&&!t)return e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx(Be,{className:"w-8 h-8 animate-spin text-blue-500"})});if(h&&!t)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-96",children:[e.jsx(me,{className:"w-12 h-12 text-red-500 dark:text-red-400 mb-4"}),e.jsx("p",{className:"text-red-600 dark:text-red-400 mb-3",children:h}),e.jsx("button",{onClick:j,className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 shadow-lg shadow-blue-500/25 magnetic-btn",children:"重试"})]});const z=[{value:1,label:"1小时"},{value:6,label:"6小时"},{value:24,label:"24小时"},{value:168,label:"7天"}];return e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-500/25",children:e.jsx(he,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"VPS 监控"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[t==null?void 0:t.hostname," · ",t==null?void 0:t.platform," · 更新于 ",p]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex bg-gray-100 dark:bg-slate-700 rounded-xl p-1",children:z.map(n=>e.jsx("button",{onClick:()=>O(n.value),className:`px-3 py-1.5 text-sm font-medium rounded-lg transition-all ${v===n.value?"bg-white dark:bg-slate-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:n.label},n.value))}),e.jsxs("button",{onClick:j,disabled:c||b,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 disabled:opacity-50 shadow-lg shadow-blue-500/25 magnetic-btn",children:[e.jsx(Re,{className:`w-4 h-4 ${c||b?"animate-spin":""}`}),"刷新"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(M,{data:f,dataKey:"cpu",color:"#3b82f6",title:"CPU 使用率",icon:ce,currentValue:(t==null?void 0:t.cpu.usage)||0}),e.jsx(M,{data:f,dataKey:"memory",color:"#8b5cf6",title:"内存使用率",icon:je,currentValue:(t==null?void 0:t.memory.usagePercent)||0}),e.jsx(M,{data:f,dataKey:"disk",color:"#f59e0b",title:"磁盘使用率",icon:Ze,currentValue:((_=t==null?void 0:t.disk.usagePercent)==null?void 0:_.toString().replace("%",""))||0}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 p-5 tilt-card",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg shadow-green-500/25",children:e.jsx(xe,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"系统负载"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:((G=(U=t==null?void 0:t.cpu.loadAverage)==null?void 0:U["1min"])==null?void 0:G.toFixed(2))||"-"})]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-400 dark:text-gray-500",children:"1分钟"}),e.jsx("div",{className:"font-semibold text-gray-700 dark:text-gray-300",children:(ae=(V=t==null?void 0:t.cpu.loadAverage)==null?void 0:V["1min"])==null?void 0:ae.toFixed(2)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-400 dark:text-gray-500",children:"5分钟"}),e.jsx("div",{className:"font-semibold text-gray-700 dark:text-gray-300",children:(ie=(se=t==null?void 0:t.cpu.loadAverage)==null?void 0:se["5min"])==null?void 0:ie.toFixed(2)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-400 dark:text-gray-500",children:"15分钟"}),e.jsx("div",{className:"font-semibold text-gray-700 dark:text-gray-300",children:(le=(ne=t==null?void 0:t.cpu.loadAverage)==null?void 0:ne["15min"])==null?void 0:le.toFixed(2)})]})]}),e.jsxs("div",{className:"mt-3 text-xs text-gray-400 dark:text-gray-500 text-center",children:[(((oe=t==null?void 0:t.cpu.loadAverage)==null?void 0:oe["1min"])||0)>8?"⚠️ 负载过高":"✓ 负载正常"," (8核CPU)"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 p-6 shimmer-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_e,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"资源趋势"}),e.jsxs("span",{className:"text-sm text-gray-400 dark:text-gray-500 ml-2",children:[f.length," 个数据点",f.length<60&&e.jsxs("span",{className:"text-amber-500 dark:text-amber-400 ml-2",children:["(数据采集中，约 ",f.length," 分钟)"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"CPU"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-500"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"内存"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-500"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"磁盘"})]})]})]}),f.length===0?e.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"text-center",children:[e.jsx(xe,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"暂无历史数据"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"每分钟自动采集，请稍候..."})]})}):e.jsx("div",{className:"h-64",children:e.jsx(ge,{width:"100%",height:"100%",children:e.jsxs(we,{data:f,margin:{top:10,right:10,left:0,bottom:0},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorCpu",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.2}),e.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorMem",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#8b5cf6",stopOpacity:.2}),e.jsx("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorDisk",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#f59e0b",stopOpacity:.2}),e.jsx("stop",{offset:"95%",stopColor:"#f59e0b",stopOpacity:0})]})]}),e.jsx(Ge,{strokeDasharray:"3 3",stroke:"#f3f4f6",vertical:!1}),e.jsx(Pe,{dataKey:"time",axisLine:!1,tickLine:!1,tick:{fontSize:11,fill:"#9ca3af"},dy:10}),e.jsx(Se,{domain:[0,100],axisLine:!1,tickLine:!1,tick:{fontSize:11,fill:"#9ca3af"},dx:-10,tickFormatter:n=>`${n}%`}),e.jsx(ve,{contentStyle:{backgroundColor:"rgba(255,255,255,0.98)",border:"none",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.12)",padding:"12px 16px"},labelStyle:{color:"#374151",fontWeight:600,marginBottom:"8px"},formatter:(n,k)=>{const N={cpu:"CPU",memory:"内存",disk:"磁盘"};return[`${n}%`,N[k]||k]}}),e.jsx(D,{type:"monotone",dataKey:"cpu",stroke:"#3b82f6",strokeWidth:2,fill:"url(#colorCpu)",dot:!1,activeDot:{r:4,fill:"#3b82f6"}}),e.jsx(D,{type:"monotone",dataKey:"memory",stroke:"#8b5cf6",strokeWidth:2,fill:"url(#colorMem)",dot:!1,activeDot:{r:4,fill:"#8b5cf6"}}),e.jsx(D,{type:"monotone",dataKey:"disk",stroke:"#f59e0b",strokeWidth:2,fill:"url(#colorDisk)",dot:!1,activeDot:{r:4,fill:"#f59e0b"}})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 p-5 tilt-card",children:e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg shadow-indigo-500/25",children:e.jsx(Xe,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"系统运行时间"}),e.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:P((t==null?void 0:t.uptime)||0)})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 p-5 tilt-card",children:e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-500/25",children:e.jsx(ce,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"CPU 信息"}),e.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[t==null?void 0:t.cpu.cores," 核 · ",t==null?void 0:t.cpu.model]})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 p-5 tilt-card",children:e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl flex items-center justify-center shadow-lg shadow-purple-500/25",children:e.jsx(je,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"内存信息"}),e.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[C((t==null?void 0:t.memory.used)||0)," / ",C((t==null?void 0:t.memory.total)||0)]})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"关键服务"})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(n=>e.jsxs("div",{className:"border border-gray-200 dark:border-slate-600 rounded-xl p-4 hover:shadow-md dark:hover:shadow-slate-900/50 hover:border-gray-300 dark:hover:border-slate-500 transition-all bg-white dark:bg-slate-700/50",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:n.name}),e.jsxs("span",{className:`px-2.5 py-1 rounded-lg text-xs font-medium flex items-center gap-1 ${n.status.includes("Up")||n.status==="running"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:[R(n.status),n.status]})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 space-y-1",children:[e.jsxs("div",{children:["端口: ",e.jsx("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:n.port})]}),e.jsxs("div",{children:["容器: ",e.jsx("span",{className:"font-mono text-xs text-gray-600 dark:text-gray-400",children:n.containerName})]}),n.uptime&&e.jsxs("div",{className:"text-gray-400 dark:text-gray-500",children:["运行 ",n.uptime]})]})]},n.name))})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Docker 容器"})]}),e.jsxs("span",{className:"px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-lg text-sm font-medium",children:[l.running," / ",l.total," 运行中"]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-slate-700/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"容器"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"状态"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"CPU 使用率"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"内存使用率"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"内存详情"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"端口"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-slate-700",children:s.map((n,k)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:n.name})]})}),e.jsx("td",{className:"px-6 py-3",children:e.jsx("span",{className:`px-2.5 py-1 rounded-lg text-xs font-medium ${n.status.includes("Up")||n.status==="running"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:n.status.split(" ")[0]})}),e.jsx("td",{className:"px-6 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 h-2 bg-gray-200 dark:bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${L(n.cpuPercent||0)}`,style:{width:`${Math.min(n.cpuPercent||0,100)}%`}})}),e.jsx("span",{className:"text-sm font-mono text-gray-700 dark:text-gray-300 w-14",children:n.cpu||"-"})]})}),e.jsx("td",{className:"px-6 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 h-2 bg-gray-200 dark:bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${L((n.memoryPercent||0)*10)}`,style:{width:`${Math.min((n.memoryPercent||0)*10,100)}%`}})}),e.jsx("span",{className:"text-sm font-mono text-gray-700 dark:text-gray-300 w-14",children:n.memoryPercent!==void 0?`${n.memoryPercent.toFixed(1)}%`:"-"})]})}),e.jsx("td",{className:"px-6 py-3 text-sm text-gray-500 dark:text-gray-400 font-mono text-xs",children:n.memory||"-"}),e.jsx("td",{className:"px-6 py-3 text-sm text-gray-500 dark:text-gray-400 font-mono text-xs",children:n.ports||"-"})]},k))})]})})]})]})}export{gt as default};
