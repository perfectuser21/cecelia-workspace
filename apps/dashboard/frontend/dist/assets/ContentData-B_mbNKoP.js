import{r as c,j as e,R as $,B as D,E,H as L,e as R,I as z,V as P,i as ee,k as te,X as se,M as Y,l as Z,C as ae}from"./index-Bz3UJ0Lr.js";const I="https://dashboard.zenjoymedia.media";function re({item:a,onClose:C}){var f,u,v,d;const[s,S]=c.useState([]),[x,F]=c.useState(!0);c.useEffect(()=>{(async()=>{try{const j=await(await fetch(`${I}/api/platform-data/${a.id}/metrics`)).json();j.success&&S(j.data)}catch(o){console.error("Failed to fetch metrics:",o)}finally{F(!1)}})()},[a.id]);const p=r=>r>=1e4?(r/1e4).toFixed(1)+"‰∏á":(r==null?void 0:r.toLocaleString())||"0",_=Math.max(...s.map(r=>Number(r.views)||0),1),k=[1,2,3,5,7,15,30];return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden shadow-2xl",children:[e.jsxs("div",{className:"flex items-start justify-between p-6 border-b border-gray-100",children:[e.jsxs("div",{className:"flex-1 min-w-0 pr-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${a.content_type==="ÂõæÊñá"?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:[a.content_type==="ÂõæÊñá"?e.jsx(z,{className:"w-3 h-3 mr-1"}):e.jsx(P,{className:"w-3 h-3 mr-1"}),a.content_type]}),e.jsxs("span",{className:"text-xs text-gray-400",children:["ID: ",a.id]})]}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 line-clamp-2",children:a.title}),e.jsx("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-500",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(te,{className:"w-4 h-4"}),a.publish_time?new Date(a.publish_time).toLocaleDateString("zh-CN"):"-"]})})]}),e.jsx("button",{onClick:C,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(se,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[a.content_type==="ÂõæÊñá"?e.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-3 mb-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[e.jsx(E,{className:"w-4 h-4 text-gray-400 mx-auto mb-1"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:p(a.latest_views)}),e.jsx("p",{className:"text-xs text-gray-500",children:"ÈòÖËØª"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[e.jsx(L,{className:"w-4 h-4 text-red-400 mx-auto mb-1"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:a.latest_likes}),e.jsx("p",{className:"text-xs text-gray-500",children:"ÁÇπËµû"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[e.jsx(Y,{className:"w-4 h-4 text-blue-400 mx-auto mb-1"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:a.latest_comments}),e.jsx("p",{className:"text-xs text-gray-500",children:"ËØÑËÆ∫"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[e.jsx(Z,{className:"w-4 h-4 text-green-400 mx-auto mb-1"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:a.latest_shares}),e.jsx("p",{className:"text-xs text-gray-500",children:"ÂàÜ‰∫´"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[e.jsx(D,{className:"w-4 h-4 text-purple-400 mx-auto mb-1"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:a.latest_favorites}),e.jsx("p",{className:"text-xs text-gray-500",children:"Êî∂Ëóè"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[e.jsx(R,{className:"w-4 h-4 text-orange-400 mx-auto mb-1"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:a.latest_follower_gain}),e.jsx("p",{className:"text-xs text-gray-500",children:"Ê∂®Á≤â"})]})]}):e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-3",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[e.jsx(E,{className:"w-4 h-4 text-gray-400 mx-auto mb-1"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:p(a.latest_views)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Êí≠Êîæ"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[e.jsx(L,{className:"w-4 h-4 text-red-400 mx-auto mb-1"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:a.latest_likes}),e.jsx("p",{className:"text-xs text-gray-500",children:"ÁÇπËµû"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[e.jsx(Y,{className:"w-4 h-4 text-blue-400 mx-auto mb-1"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:a.latest_comments}),e.jsx("p",{className:"text-xs text-gray-500",children:"ËØÑËÆ∫"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[e.jsx(Z,{className:"w-4 h-4 text-green-400 mx-auto mb-1"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:a.latest_shares}),e.jsx("p",{className:"text-xs text-gray-500",children:"ÂàÜ‰∫´"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[e.jsx(D,{className:"w-4 h-4 text-purple-400 mx-auto mb-1"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:a.latest_favorites}),e.jsx("p",{className:"text-xs text-gray-500",children:"Êî∂Ëóè"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[e.jsx(R,{className:"w-4 h-4 text-orange-400 mx-auto mb-1"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:a.latest_follower_gain}),e.jsx("p",{className:"text-xs text-gray-500",children:"Ê∂®Á≤â"})]})]}),s.length>0&&e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-lg font-bold text-blue-700",children:(f=s[s.length-1])!=null&&f.completion_rate?`${s[s.length-1].completion_rate}%`:"-"}),e.jsx("p",{className:"text-xs text-blue-600",children:"ÂÆåÊí≠Áéá"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-lg font-bold text-blue-700",children:(u=s[s.length-1])!=null&&u.completion_rate_5s?`${s[s.length-1].completion_rate_5s}%`:"-"}),e.jsx("p",{className:"text-xs text-blue-600",children:"5sÂÆåÊí≠"})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-lg font-bold text-orange-700",children:(v=s[s.length-1])!=null&&v.bounce_rate?`${s[s.length-1].bounce_rate}%`:"-"}),e.jsx("p",{className:"text-xs text-orange-600",children:"Ë∑≥Âá∫Áéá"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-lg font-bold text-green-700",children:((d=s[s.length-1])==null?void 0:d.avg_play_duration)||"-"}),e.jsx("p",{className:"text-xs text-green-600",children:"Âπ≥ÂùáÊó∂Èïø"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsxs("h3",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(ae,{className:"w-4 h-4"}),"Êï∞ÊçÆÂ¢ûÈïøÊõ≤Á∫øÔºàÂèëÂ∏ÉÂêéÂ§©Êï∞Ôºâ"]}),x?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx($,{className:"w-6 h-6 animate-spin text-gray-400"})}):s.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"ÊöÇÊó†ÂéÜÂè≤Êï∞ÊçÆÔºåÊåÅÁª≠ÈááÈõÜ‰∏≠..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Êí≠ÊîæÈáè"}),e.jsx("div",{className:"flex items-end gap-2 h-32",children:k.map(r=>{const o=s.find(g=>g.days_after_publish===r),j=Number(o==null?void 0:o.views)||0,M=j/_*100,w=!!o;return e.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[e.jsxs("div",{className:"w-full flex flex-col items-center justify-end h-24",children:[w&&e.jsx("span",{className:"text-xs text-gray-600 mb-1",children:p(j)}),e.jsx("div",{className:`w-full rounded-t transition-all ${w?"bg-blue-500":"bg-gray-200"}`,style:{height:w?`${Math.max(M,5)}%`:"5%"}})]}),e.jsxs("span",{className:"text-xs text-gray-500 mt-2",children:["D",r]})]},r)})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-2 px-2 text-gray-500 font-medium",children:"Â§©Êï∞"}),e.jsx("th",{className:"text-right py-2 px-2 text-gray-500 font-medium",children:a.content_type==="ÂõæÊñá"?"ÈòÖËØª":"Êí≠Êîæ"}),a.content_type!=="ÂõæÊñá"&&e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"text-right py-2 px-2 text-gray-500 font-medium",children:"ÂÆåÊí≠Áéá"}),e.jsx("th",{className:"text-right py-2 px-2 text-gray-500 font-medium",children:"5sÂÆåÊí≠"})]}),e.jsx("th",{className:"text-right py-2 px-2 text-gray-500 font-medium",children:"ÁÇπËµû"}),e.jsx("th",{className:"text-right py-2 px-2 text-gray-500 font-medium",children:"ËØÑËÆ∫"}),e.jsx("th",{className:"text-right py-2 px-2 text-gray-500 font-medium",children:"ÂàÜ‰∫´"}),e.jsx("th",{className:"text-right py-2 px-2 text-gray-500 font-medium",children:"ÈááÈõÜÊó∂Èó¥"})]})}),e.jsx("tbody",{children:s.map(r=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsxs("td",{className:"py-2 px-2 font-medium",children:["Day ",r.days_after_publish]}),e.jsx("td",{className:"py-2 px-2 text-right",children:p(Number(r.views))}),a.content_type!=="ÂõæÊñá"&&e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"py-2 px-2 text-right text-blue-600",children:r.completion_rate?`${r.completion_rate}%`:"-"}),e.jsx("td",{className:"py-2 px-2 text-right text-blue-600",children:r.completion_rate_5s?`${r.completion_rate_5s}%`:"-"})]}),e.jsx("td",{className:"py-2 px-2 text-right",children:r.likes}),e.jsx("td",{className:"py-2 px-2 text-right",children:r.comments}),e.jsx("td",{className:"py-2 px-2 text-right",children:r.shares}),e.jsx("td",{className:"py-2 px-2 text-right text-gray-400",children:new Date(r.scraped_at).toLocaleDateString("zh-CN")})]},r.id))})]})})]})]})]})]})})}function xe(){var U,H,G,X,q,J,K,O,Q;const[a,C]=c.useState([]),[s,S]=c.useState(null),[x,F]=c.useState(null),[p,_]=c.useState(!0),[k,f]=c.useState(null),[u,v]=c.useState("list"),[d,r]=c.useState("ËßÜÈ¢ë"),[o,j]=c.useState(1),[M,w]=c.useState(new Set),[g,V]=c.useState({platform:"",content_type:""}),T=[{value:"",label:"ÂÖ®ÈÉ®Âπ≥Âè∞",color:"gray"},{value:"douyin",label:"ÊäñÈü≥",color:"black"},{value:"kuaishou",label:"Âø´Êâã",color:"orange"},{value:"xiaohongshu",label:"Â∞èÁ∫¢‰π¶",color:"red"},{value:"toutiao",label:"‰ªäÊó•Â§¥Êù°",color:"red"},{value:"weibo",label:"ÂæÆÂçö",color:"orange"},{value:"channels",label:"ËßÜÈ¢ëÂè∑",color:"green"}],A={douyin:{name:"ÊäñÈü≥",bg:"bg-gray-900",text:"text-white"},kuaishou:{name:"Âø´Êâã",bg:"bg-orange-500",text:"text-white"},xiaohongshu:{name:"Â∞èÁ∫¢‰π¶",bg:"bg-red-500",text:"text-white"},toutiao:{name:"Â§¥Êù°",bg:"bg-red-600",text:"text-white"},weibo:{name:"ÂæÆÂçö",bg:"bg-orange-400",text:"text-white"},channels:{name:"ËßÜÈ¢ëÂè∑",bg:"bg-green-500",text:"text-white"}},B=async()=>{_(!0);try{const t=new URLSearchParams;g.platform&&t.append("platform",g.platform),g.content_type&&t.append("content_type",g.content_type),t.append("limit","100");const[m,h,N]=await Promise.all([fetch(`${I}/api/platform-data?${t}`),fetch(`${I}/api/platform-data/stats?${t}`),fetch(`${I}/api/platform-data/grouped?form=${encodeURIComponent(d)}&page=${o}&limit=20`)]),n=await m.json(),i=await h.json(),W=await N.json();n.success&&C(n.data),i.success&&F(i),W.success&&S(W)}catch(t){console.error("Failed to fetch data:",t)}finally{_(!1)}};c.useEffect(()=>{j(1)},[d]),c.useEffect(()=>{B()},[g,d,o]);const l=t=>t>=1e4?(t/1e4).toFixed(1)+"‰∏á":(t==null?void 0:t.toLocaleString())||"0",y=x==null?void 0:x.by_type.find(t=>{var m;return t.content_type==="ËßÜÈ¢ë"||((m=t.content_type)==null?void 0:m.includes("ËßÜÈ¢ë"))}),b=x==null?void 0:x.by_type.find(t=>t.content_type==="ÂõæÊñá");return e.jsxs("div",{className:"space-y-6",children:[k&&e.jsx(re,{item:k,onClose:()=>f(null)}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Êï∞ÊçÆ‰∏≠ÂøÉ"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Êü•ÁúãÂêÑÂπ≥Âè∞ÂÜÖÂÆπÊï∞ÊçÆË°®Áé∞ÔºåÁÇπÂáªÊü•ÁúãËØ¶ÊÉÖ"})]}),e.jsxs("button",{onClick:B,disabled:p,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 disabled:opacity-50 shadow-lg shadow-blue-500/25 magnetic-btn",children:[e.jsx($,{className:`w-4 h-4 ${p?"animate-spin":""}`}),"Âà∑Êñ∞Êï∞ÊçÆ"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 border border-gray-200 dark:border-slate-700 tilt-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"ÊÄªÂÜÖÂÆπÊï∞"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:((U=x==null?void 0:x.total)==null?void 0:U.total_count)||0})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-500/25",children:e.jsx(D,{className:"w-6 h-6 text-white"})})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 border border-gray-200 dark:border-slate-700 tilt-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"ÊÄªÊí≠ÊîæÈáè"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:l(parseInt(((H=x==null?void 0:x.total)==null?void 0:H.total_views)||"0"))})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg shadow-green-500/25",children:e.jsx(E,{className:"w-6 h-6 text-white"})})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 border border-gray-200 dark:border-slate-700 tilt-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"ÊÄªÁÇπËµûÊï∞"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:l(parseInt(((G=x==null?void 0:x.total)==null?void 0:G.total_likes)||"0"))})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-rose-600 rounded-xl flex items-center justify-center shadow-lg shadow-red-500/25",children:e.jsx(L,{className:"w-6 h-6 text-white"})})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 border border-gray-200 dark:border-slate-700 tilt-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Ê∂®Á≤âÊï∞"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:l(parseInt(((X=x==null?void 0:x.total)==null?void 0:X.total_follower_gain)||"0"))})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-violet-600 rounded-xl flex items-center justify-center shadow-lg shadow-purple-500/25",children:e.jsx(R,{className:"w-6 h-6 text-white"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 rounded-2xl p-6 border border-orange-200 dark:border-orange-800/50 shimmer-card",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-500 to-amber-600 rounded-xl flex items-center justify-center shadow-lg shadow-orange-500/25",children:e.jsx(z,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"ÂõæÊñáÂÜÖÂÆπ"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[(b==null?void 0:b.count)||0," ÁØá"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"ÊÄªÊí≠Êîæ"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:l(parseInt((b==null?void 0:b.total_views)||"0"))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Âπ≥ÂùáÊí≠Êîæ"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:l(Math.round(parseFloat((b==null?void 0:b.avg_views)||"0")))})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-2xl p-6 border border-blue-200 dark:border-blue-800/50 shimmer-card",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-500/25",children:e.jsx(P,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"ËßÜÈ¢ëÂÜÖÂÆπ"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[(y==null?void 0:y.count)||0," ‰∏™"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"ÊÄªÊí≠Êîæ"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:l(parseInt((y==null?void 0:y.total_views)||"0"))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Âπ≥ÂùáÊí≠Êîæ"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:l(Math.round(parseFloat((y==null?void 0:y.avg_views)||"0")))})]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 bg-white dark:bg-slate-800 rounded-2xl p-4 border border-gray-200 dark:border-slate-700 shadow-sm",children:[e.jsx(ee,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"}),e.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>v("list"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-all ${u==="list"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"ÂàóË°®ËßÜÂõæ"}),e.jsxs("button",{onClick:()=>v("grouped"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-all ${u==="grouped"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["ËÅöÂêàËßÜÂõæ (",((q=s==null?void 0:s.pagination)==null?void 0:q.total_items)||0,")"]})]}),u==="list"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center gap-1 bg-gray-100 rounded-lg p-1",children:T.map(t=>e.jsx("button",{onClick:()=>V({...g,platform:t.value}),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-all ${g.platform===t.value?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:t.label},t.value))}),e.jsxs("select",{value:g.content_type,onChange:t=>V({...g,content_type:t.target.value}),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"ÂÖ®ÈÉ®Á±ªÂûã"}),e.jsx("option",{value:"ÂõæÊñá",children:"ÂõæÊñá"}),e.jsx("option",{value:"ËßÜÈ¢ë",children:"ËßÜÈ¢ë"}),e.jsx("option",{value:"ÂæÆÂ§¥Êù°",children:"ÂæÆÂ§¥Êù°"}),e.jsx("option",{value:"ÊñáÁ´†",children:"ÊñáÁ´†"}),e.jsx("option",{value:"ÈïøÊñá",children:"ÈïøÊñá"}),e.jsx("option",{value:"ÊñáÂ≠ó",children:"ÊñáÂ≠ó"})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["ÂÖ± ",a.length," Êù°ÂÜÖÂÆπ"]})]})]}),u==="grouped"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex gap-2",children:["ËßÜÈ¢ë","ÂõæÊñá","ÈïøÊñá"].map(t=>{const m=s==null?void 0:s.form_stats[t],h=t==="ËßÜÈ¢ë"?"üé¨":t==="ÂõæÊñá"?"üì∑":"üìù",N=d===t;return e.jsxs("button",{onClick:()=>r(t),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${N?"bg-blue-500 text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}`,children:[e.jsx("span",{children:h}),e.jsx("span",{children:t}),e.jsxs("span",{className:`text-sm ${N?"text-blue-100":"text-gray-400"}`,children:["(",(m==null?void 0:m.count)||0,")"]})]},t)})}),(s==null?void 0:s.pagination)&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"ÂÖ± "}),e.jsx("span",{className:"font-bold text-lg",children:s.pagination.total_items}),e.jsxs("span",{className:"text-gray-500",children:[" Êù°",d,"ÂÜÖÂÆπ"]}),e.jsxs("span",{className:"text-gray-400 text-sm ml-2",children:["(Âπ≥Âùá",d==="ËßÜÈ¢ë"?"Êí≠Êîæ":"ÈòÖËØª",": ",l(((J=s.averages)==null?void 0:J.avg_views)||0),")"]})]}),e.jsxs("div",{className:"flex gap-6 text-sm",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500",children:["ÊÄª",d==="ËßÜÈ¢ë"?"Êí≠Êîæ":"ÈòÖËØª","Ôºö"]}),e.jsx("span",{className:"font-bold",children:l(((K=s.form_stats[d])==null?void 0:K.total_views)||0)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"ÊÄªÁÇπËµûÔºö"}),e.jsx("span",{className:"font-bold",children:l(((O=s.form_stats[d])==null?void 0:O.total_likes)||0)})]})]})]}),p?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx($,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Âä†ËΩΩ‰∏≠..."]}):(Q=s==null?void 0:s.data)!=null&&Q.length?e.jsx("div",{className:"space-y-2",children:s.data.map(t=>{const m=M.has(t.id),h=t.items.length>1,N=new Date(t.first_publish_time).toLocaleDateString("zh-CN");return e.jsxs("div",{className:`bg-white rounded-lg border overflow-hidden ${t.is_top_performer?"border-yellow-400 ring-1 ring-yellow-200":"border-gray-200"}`,children:[e.jsxs("div",{className:`p-4 flex items-center justify-between ${h?"cursor-pointer hover:bg-gray-50":""}`,onClick:()=>{h&&w(n=>{const i=new Set(n);return i.has(t.id)?i.delete(t.id):i.add(t.id),i})},children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.is_top_performer&&e.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs bg-yellow-100 text-yellow-800 font-medium",children:"üî• ÁÉ≠Èó®"}),e.jsx("h4",{className:"font-medium text-gray-900 line-clamp-1",children:t.title})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-400",children:N}),t.platforms.map(n=>{const i=A[n]||{name:n,bg:"bg-gray-200",text:"text-gray-700"};return e.jsx("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded text-xs ${i.bg} ${i.text}`,children:i.name},n)})]})]}),e.jsxs("div",{className:"flex items-center gap-4 ml-4",children:[d==="ËßÜÈ¢ë"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-gray-900",children:l(parseInt(t.total_views))}),e.jsx("div",{className:"text-xs text-gray-500",children:"Êí≠Êîæ"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-gray-900",children:l(parseInt(t.total_likes))}),e.jsx("div",{className:"text-xs text-gray-500",children:"ÁÇπËµû"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-gray-900",children:l(parseInt(t.total_comments))}),e.jsx("div",{className:"text-xs text-gray-500",children:"ËØÑËÆ∫"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-gray-900",children:l(parseInt(t.total_shares))}),e.jsx("div",{className:"text-xs text-gray-500",children:"ÂàÜ‰∫´"})]})]}),d==="ÂõæÊñá"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-gray-900",children:l(parseInt(t.total_views))}),e.jsx("div",{className:"text-xs text-gray-500",children:"ÈòÖËØª"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-gray-900",children:l(parseInt(t.total_likes))}),e.jsx("div",{className:"text-xs text-gray-500",children:"ÁÇπËµû"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-gray-900",children:l(parseInt(t.total_comments))}),e.jsx("div",{className:"text-xs text-gray-500",children:"ËØÑËÆ∫"})]})]}),d==="ÈïøÊñá"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-gray-900",children:l(parseInt(t.total_views))}),e.jsx("div",{className:"text-xs text-gray-500",children:"ÈòÖËØª"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-gray-900",children:l(parseInt(t.total_likes))}),e.jsx("div",{className:"text-xs text-gray-500",children:"ÁÇπËµû"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-gray-900",children:l(parseInt(t.total_favorites||"0"))}),e.jsx("div",{className:"text-xs text-gray-500",children:"Êî∂Ëóè"})]})]}),h&&e.jsx("div",{className:`text-gray-400 transition-transform ${m?"rotate-180":""}`,children:"‚ñº"})]})]}),m&&h&&e.jsx("div",{className:"border-t border-gray-100 bg-gray-50",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-4 py-2 text-xs font-medium text-gray-500",children:"Âπ≥Âè∞"}),e.jsx("th",{className:"text-right px-4 py-2 text-xs font-medium text-gray-500",children:d==="ËßÜÈ¢ë"?"Êí≠Êîæ":"ÈòÖËØª"}),e.jsx("th",{className:"text-right px-4 py-2 text-xs font-medium text-gray-500",children:"ÁÇπËµû"}),e.jsx("th",{className:"text-right px-4 py-2 text-xs font-medium text-gray-500",children:"ËØÑËÆ∫"}),e.jsx("th",{className:"text-right px-4 py-2 text-xs font-medium text-gray-500",children:d==="ÈïøÊñá"?"Êî∂Ëóè":"ÂàÜ‰∫´"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:t.items.map(n=>{const i=A[n.platform]||{name:n.platform,bg:"bg-gray-200",text:"text-gray-700"};return e.jsxs("tr",{className:"bg-white",children:[e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs ${i.bg} ${i.text}`,children:i.name})}),e.jsx("td",{className:"px-4 py-2 text-right font-medium",children:l(n.views)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-600",children:l(n.likes)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-600",children:l(n.comments)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-600",children:l(d==="ÈïøÊñá"?n.favorites||0:n.shares)})]},n.id)})})]})})]},t.id)})}):e.jsxs("div",{className:"text-center py-12 text-gray-500 bg-white rounded-xl border border-gray-200",children:["ÊöÇÊó†",d,"ÂÜÖÂÆπ"]}),(s==null?void 0:s.pagination)&&s.pagination.total_pages>1&&e.jsxs("div",{className:"flex items-center justify-center gap-2 pt-4",children:[e.jsx("button",{onClick:()=>j(t=>Math.max(1,t-1)),disabled:o===1,className:"px-3 py-1 rounded border border-gray-300 text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"‰∏ä‰∏ÄÈ°µ"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Á¨¨ ",o," / ",s.pagination.total_pages," È°µ"]}),e.jsx("button",{onClick:()=>j(t=>Math.min(s.pagination.total_pages,t+1)),disabled:o===s.pagination.total_pages,className:"px-3 py-1 rounded border border-gray-300 text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"‰∏ã‰∏ÄÈ°µ"})]})]}),u==="list"&&e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 overflow-hidden shadow-sm",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-slate-700/50 border-b border-gray-200 dark:border-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-4 py-3 text-xs font-medium text-gray-500 uppercase",children:"Âπ≥Âè∞"}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-medium text-gray-500 uppercase",children:"ÂÜÖÂÆπ"}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-medium text-gray-500 uppercase",children:"Á±ªÂûã"}),e.jsx("th",{className:"text-right px-4 py-3 text-xs font-medium text-gray-500 uppercase",children:"Êí≠ÊîæÈáè"}),e.jsx("th",{className:"text-right px-4 py-3 text-xs font-medium text-gray-500 uppercase",children:"ÁÇπËµû"}),e.jsx("th",{className:"text-right px-4 py-3 text-xs font-medium text-gray-500 uppercase",children:"ËØÑËÆ∫"}),e.jsx("th",{className:"text-right px-4 py-3 text-xs font-medium text-gray-500 uppercase",children:"ÂàÜ‰∫´"}),e.jsx("th",{className:"text-right px-4 py-3 text-xs font-medium text-gray-500 uppercase",children:"Êî∂Ëóè"}),e.jsx("th",{className:"text-right px-4 py-3 text-xs font-medium text-gray-500 uppercase",children:"Ê∂®Á≤â"}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-medium text-gray-500 uppercase",children:"ÂèëÂ∏ÉÊó∂Èó¥"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:p?e.jsx("tr",{children:e.jsxs("td",{colSpan:10,className:"text-center py-12 text-gray-500",children:[e.jsx($,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Âä†ËΩΩ‰∏≠..."]})}):a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"text-center py-12 text-gray-500",children:"ÊöÇÊó†Êï∞ÊçÆÔºåËØ∑ÂÖàËøêË°åÊï∞ÊçÆÈááÈõÜ"})}):a.map(t=>{var N;const h={douyin:{name:"ÊäñÈü≥",bg:"bg-gray-900",text:"text-white"},kuaishou:{name:"Âø´Êâã",bg:"bg-orange-500",text:"text-white"},xiaohongshu:{name:"Â∞èÁ∫¢‰π¶",bg:"bg-red-500",text:"text-white"},toutiao:{name:"Â§¥Êù°",bg:"bg-red-600",text:"text-white"},weibo:{name:"ÂæÆÂçö",bg:"bg-orange-400",text:"text-white"},channels:{name:"ËßÜÈ¢ëÂè∑",bg:"bg-green-500",text:"text-white"}}[t.platform]||{name:t.platform,bg:"bg-gray-200",text:"text-gray-700"};return e.jsxs("tr",{className:"hover:bg-blue-50 cursor-pointer transition-colors",onClick:()=>f(t),children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${h.bg} ${h.text}`,children:h.name})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"max-w-xs",children:e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",title:t.title,children:((N=t.title)==null?void 0:N.substring(0,50))||"-"})})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${t.content_type==="ËßÜÈ¢ë"?"bg-blue-100 text-blue-700":t.content_type==="ÂõæÊñá"?"bg-orange-100 text-orange-700":t.content_type==="ÂæÆÂ§¥Êù°"?"bg-purple-100 text-purple-700":t.content_type==="ÊñáÁ´†"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:[t.content_type==="ËßÜÈ¢ë"?e.jsx(P,{className:"w-3 h-3 mr-1"}):e.jsx(z,{className:"w-3 h-3 mr-1"}),t.content_type]})}),e.jsx("td",{className:"px-4 py-3 text-right text-sm text-gray-900",children:l(t.latest_views||0)}),e.jsx("td",{className:"px-4 py-3 text-right text-sm text-gray-900",children:t.latest_likes||0}),e.jsx("td",{className:"px-4 py-3 text-right text-sm text-gray-500",children:t.latest_comments||0}),e.jsx("td",{className:"px-4 py-3 text-right text-sm text-gray-500",children:t.latest_shares||0}),e.jsx("td",{className:"px-4 py-3 text-right text-sm text-gray-500",children:t.latest_favorites||0}),e.jsx("td",{className:"px-4 py-3 text-right text-sm text-gray-500",children:t.latest_follower_gain||0}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:t.publish_time?new Date(t.publish_time).toLocaleDateString("zh-CN"):"-"})]},t.id)})})]})})})]})}export{xe as default};
