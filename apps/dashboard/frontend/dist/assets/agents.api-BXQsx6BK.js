const l=[{id:"spark",name:"Spark",codename:"点燃执行",icon:"Zap",role:"执行者",description:"解析 PRD 文档，拆解 Checkpoints，调用 Claude Code 执行代码任务",workflowKeywords:["PRD Executor","prd-executor","Execute","Cecilia"],status:"active",gradient:{from:"from-blue-500",to:"to-cyan-500",border:"border-blue-500/30"}},{id:"echo",name:"Echo",codename:"协调反馈",icon:"RefreshCw",role:"协调者",description:"监控执行状态，处理多阶段任务，分析结果并创建下一阶段",workflowKeywords:["Coordinator","coordinator","Multi-stage","Callback"],status:"active",gradient:{from:"from-emerald-500",to:"to-teal-500",border:"border-emerald-500/30"}},{id:"prism",name:"Prism",codename:"多维分析",icon:"Diamond",role:"分析者",description:"多维度分析执行结果，提供智能决策建议",workflowKeywords:["Analyzer","Analysis","Report"],status:"planned",gradient:{from:"from-violet-500",to:"to-purple-500",border:"border-violet-500/30"}}],f="";async function g(){try{const s=await fetch(`${f}/api/cecilia/overview?limit=20`);if(!s.ok)return null;const t=await s.json();return t.success?t:null}catch{return null}}function p(s){switch(s){case"24h":return 24*60*60*1e3;case"72h":return 72*60*60*1e3;case"7d":return 7*24*60*60*1e3}}function m(s,t){const e=Date.now(),o=p(t),r=e-o;return s.filter(a=>new Date(a.started_at).getTime()>=r)}function h(s,t){const e=m(s,t),o=e.filter(n=>n.status==="completed").length,r=e.filter(n=>n.status==="failed").length,a=e.filter(n=>n.status==="running").length,c=e.length,i=o+r;return{total:c,success:o,error:r,running:a,successRate:i>0?Math.round(o/i*100):0}}function w(s){const t=new Map;for(const e of l)t.set(e.id,[]);for(const e of s){const o=t.get("spark")||[];o.push(e),t.set("spark",o)}return t}function R(s){const t=new Date().toDateString(),e=s.filter(n=>new Date(n.started_at).toDateString()===t),o=e.filter(n=>n.status==="completed").length,r=e.filter(n=>n.status==="failed").length,a=e.filter(n=>n.status==="running").length,c=e.length,i=o+r;return{todayTotal:c,todaySuccess:o,todayError:r,todayRunning:a,successRate:i>0?Math.round(o/i*100):0}}async function y(s="24h"){const t=await g(),e=(t==null?void 0:t.recent_runs)||[],o=e.filter(n=>n.status==="running"),r=e.filter(n=>n.status!=="running").slice(0,10),a=h(e,s),c=w(e),i=l.map(n=>{const u=c.get(n.id)||[],d=R(u);return{...n,stats:d,recentRuns:u.slice(0,5)}});return{totalRuns:(t==null?void 0:t.total_runs)||0,runningRuns:(t==null?void 0:t.running)||0,completedRuns:(t==null?void 0:t.completed)||0,failedRuns:(t==null?void 0:t.failed)||0,runningTasks:o,recentRuns:r,timeRange:s,periodStats:a,agents:i}}async function v(s,t="24h"){return(await y(t)).agents.find(o=>o.id===s)||null}export{v as a,y as f};
