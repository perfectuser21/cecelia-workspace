import{r as l,j as e,m as C,n as xt,o as gt,p as K,X as Re,q as O,s as Be,i as mt,t as ht,v as ut,F as se,I as ge,E as bt,w as pt,x as yt,y as _e,R as jt,z as ft,G as Nt,J as qe,K as Oe,O as kt,W as Xe,Y as vt,_ as Q,$ as Y,k as wt,C as re}from"./index-DNFMCH88.js";import{p as u}from"./publish.api-D33NbTu_.js";import"./client-DyfwnZmM.js";import"./index-B9ygI19o.js";function Ve({onFilesUploaded:n,maxFiles:o=20,acceptedTypes:T=["image/*","video/*"],className:E=""}){const[c,d]=l.useState(!1),[y,v]=l.useState([]),[w,F]=l.useState(null),[A,X]=l.useState(!1),[D,V]=l.useState(null),N=l.useCallback(async t=>{var x,g;if(t.length!==0){if(y.length+t.length>o){F(`æœ€å¤šåªèƒ½ä¸Šä¼  ${o} ä¸ªæ–‡ä»¶`);return}d(!0),F(null);try{const m=await u.uploadFiles(t),S=[...y,...m];v(S),n(S)}catch(m){F(((g=(x=m.response)==null?void 0:x.data)==null?void 0:g.message)||"ä¸Šä¼ å¤±è´¥ï¼Œè¯·é‡è¯•")}finally{d(!1)}}},[y,o,n]),U=t=>{t.target.files&&N(Array.from(t.target.files))},Z=l.useCallback(t=>{t.preventDefault(),X(!1);const x=Array.from(t.dataTransfer.files);N(x)},[N]),k=t=>{t.preventDefault(),X(!0)},M=()=>{X(!1)},le=t=>{const x=y.filter((g,m)=>m!==t);v(x),n(x)},H=t=>t<1024?t+" B":t<1024*1024?(t/1024).toFixed(1)+" KB":(t/(1024*1024)).toFixed(1)+" MB",$=(t,x)=>{if(!t||!x)return"";const g=(I,R)=>R===0?I:g(R,I%R),m=g(t,x),S=t/m,G=x/m,j=t/x;return Math.abs(j-1)<.05?"1:1":Math.abs(j-16/9)<.05?"16:9":Math.abs(j-9/16)<.05?"9:16":Math.abs(j-4/3)<.05?"4:3":Math.abs(j-3/4)<.05?"3:4":Math.abs(j-4/5)<.05?"4:5":Math.abs(j-5/4)<.05?"5:4":S<=20&&G<=20?`${S}:${G}`:`${j.toFixed(2)}:1`},W=(t,x)=>{if(!t||!x)return[];const g=t/x,m=[];return(Math.abs(g-3/4)<.1||Math.abs(g-1)<.1||Math.abs(g-4/3)<.1)&&m.push("å°çº¢ä¹¦"),(Math.abs(g-9/16)<.1||Math.abs(g-3/4)<.1||Math.abs(g-1)<.1)&&m.push("æŠ–éŸ³"),(Math.abs(g-16/9)<.1||Math.abs(g-1)<.1||Math.abs(g-4/5)<.1)&&m.push("X"),m.push("å¾®åš","ç½‘ç«™"),m};return e.jsxs("div",{className:E,children:[e.jsxs("div",{onDrop:Z,onDragOver:k,onDragLeave:M,className:`
          border-2 border-dashed rounded-xl p-8 text-center transition-all cursor-pointer
          ${A?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"}
        `,children:[e.jsx("input",{type:"file",multiple:!0,accept:T.join(","),onChange:U,className:"hidden",id:"file-upload",disabled:c}),e.jsx("label",{htmlFor:"file-upload",className:"cursor-pointer",children:c?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(C,{className:"w-12 h-12 text-blue-500 animate-spin mb-4"}),e.jsx("p",{className:"text-gray-600",children:"æ­£åœ¨ä¸Šä¼ ..."})]}):e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(xt,{className:"w-12 h-12 text-gray-400 mb-4"}),e.jsxs("p",{className:"text-gray-600 mb-2",children:["æ‹–æ‹½æ–‡ä»¶åˆ°è¿™é‡Œï¼Œæˆ–",e.jsx("span",{className:"text-blue-600 font-medium",children:"ç‚¹å‡»ä¸Šä¼ "})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"æ”¯æŒå›¾ç‰‡å’Œè§†é¢‘ï¼Œå•ä¸ªæ–‡ä»¶æœ€å¤§ 1GB"})]})})]}),w&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm",children:w}),y.length>0&&e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700",children:["å·²ä¸Šä¼  (",y.length,"/",o,")"]}),y.map((t,x)=>{const g=$(t.width,t.height),m=W(t.width,t.height);return e.jsxs("div",{className:"flex gap-4 p-4 bg-gray-50 rounded-xl border border-gray-200",children:[e.jsx("div",{className:"w-24 h-24 flex-shrink-0 rounded-lg overflow-hidden bg-gray-200 cursor-pointer relative group",onClick:()=>t.mimeType.startsWith("image/")&&V(u.getFileUrl(t.filePath)),children:t.mimeType.startsWith("image/")?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:u.getFileUrl(t.thumbnail||t.filePath),alt:t.originalName,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/30 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx(gt,{className:"w-6 h-6 text-white"})})]}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(K,{className:"w-8 h-8 text-gray-400"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 truncate",children:t.originalName}),e.jsx("p",{className:"text-sm text-gray-500",children:H(t.fileSize)})]}),e.jsx("button",{onClick:()=>le(x),className:"p-1 hover:bg-gray-200 rounded transition-colors",children:e.jsx(Re,{className:"w-4 h-4 text-gray-500"})})]}),t.width&&t.height&&e.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[e.jsx("span",{className:"px-2 py-1 bg-gray-900 text-white text-xs font-mono rounded",children:g}),e.jsxs("span",{className:"text-xs text-gray-500",children:[t.width," Ã— ",t.height]})]}),m.length>0&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"é€‚åˆ:"}),m.map(S=>e.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded",children:S},S))]})]})]},t.id)})]}),D&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4",onClick:()=>V(null),children:e.jsxs("div",{className:"relative max-w-4xl max-h-[90vh]",children:[e.jsx("button",{onClick:()=>V(null),className:"absolute -top-10 right-0 text-white hover:text-gray-300",children:e.jsx(Re,{className:"w-8 h-8"})}),e.jsx("img",{src:D,alt:"Preview",className:"max-w-full max-h-[85vh] object-contain rounded-lg",onClick:t=>t.stopPropagation()})]})})]})}function me({platform:n}){const o={xhs:"bg-red-500",weibo:"bg-orange-500",x:"bg-black",douyin:"bg-gray-800",website:"bg-blue-600"};return e.jsx("div",{className:`w-8 h-8 rounded-lg ${o[n]||"bg-gray-500"} flex items-center justify-center text-white text-xs font-bold`,children:n.charAt(0).toUpperCase()})}function We({status:n}){const o={draft:{bg:"bg-gray-100 dark:bg-slate-700",text:"text-gray-600 dark:text-gray-400",icon:e.jsx(se,{className:"w-3 h-3"})},pending:{bg:"bg-yellow-100 dark:bg-yellow-900/30",text:"text-yellow-700 dark:text-yellow-400",icon:e.jsx(re,{className:"w-3 h-3"})},processing:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-700 dark:text-blue-400",icon:e.jsx(C,{className:"w-3 h-3 animate-spin"})},completed:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-700 dark:text-green-400",icon:e.jsx(Y,{className:"w-3 h-3"})},failed:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-700 dark:text-red-400",icon:e.jsx(Q,{className:"w-3 h-3"})},partial:{bg:"bg-orange-100 dark:bg-orange-900/30",text:"text-orange-700 dark:text-orange-400",icon:e.jsx(re,{className:"w-3 h-3"})}},T=o[n]||o.draft,E={draft:"è‰ç¨¿",pending:"å¾…å‘å¸ƒ",processing:"å‘å¸ƒä¸­",completed:"å·²å®Œæˆ",failed:"å¤±è´¥",partial:"éƒ¨åˆ†æˆåŠŸ"};return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-lg text-xs font-medium ${T.bg} ${T.text}`,children:[T.icon,E[n]||n]})}const he={xhs:"å°çº¢ä¹¦",weibo:"å¾®åš",x:"X (Twitter)",douyin:"æŠ–éŸ³",website:"ZenithJoyAI"};function Ct({result:n,isProcessing:o}){return n?n.success?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-lg text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:[e.jsx(Y,{className:"w-3 h-3"}),"æˆåŠŸ"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-lg text-xs font-medium bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",children:[e.jsx(Q,{className:"w-3 h-3"}),"å¤±è´¥"]}):e.jsx("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-lg text-xs font-medium ${o?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":"bg-gray-100 dark:bg-slate-700 text-gray-500 dark:text-gray-400"}`,children:o?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"w-3 h-3 animate-spin"}),"å‘å¸ƒä¸­"]}):e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"w-3 h-3"}),"å¾…å¤„ç†"]})})}const Ge={xhs:"ðŸ“•",weibo:"ðŸŸ ",douyin:"ðŸŽµ",website:"ðŸŒ",x:"ð•"};function St({task:n}){const[o,T]=l.useState(!1);if(!n.results||n.status==="draft")return e.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-sm",children:"-"});const E=n.status==="processing"||n.status==="pending";return e.jsxs("div",{className:"relative",children:[e.jsx("div",{onClick:c=>{c.stopPropagation(),T(!o)},className:"flex flex-wrap items-center gap-1 cursor-pointer hover:bg-gray-50 dark:hover:bg-slate-700/50 px-1.5 py-1 rounded-lg -mx-1.5 transition-colors",children:n.targetPlatforms.map(c=>{var F;const d=(F=n.results)==null?void 0:F[c],y=Ge[c]||c.charAt(0).toUpperCase();let v="border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700",w=null;return d!=null&&d.success?(v="border-green-400 bg-green-50 dark:bg-green-900/30",w=e.jsx(Y,{className:"w-2.5 h-2.5 text-green-500 absolute -bottom-0.5 -right-0.5"})):d&&!d.success?(v="border-red-400 bg-red-50 dark:bg-red-900/30",w=e.jsx(Q,{className:"w-2.5 h-2.5 text-red-500 absolute -bottom-0.5 -right-0.5"})):E&&(v="border-blue-400 bg-blue-50 dark:bg-blue-900/30 animate-pulse"),e.jsxs("div",{className:`relative w-7 h-7 rounded-lg border-2 flex items-center justify-center text-xs ${v}`,title:`${he[c]||c}: ${d!=null&&d.success?"æˆåŠŸ":d?"å¤±è´¥":E?"å‘å¸ƒä¸­":"å¾…å¤„ç†"}${d!=null&&d.error?` - ${d.error}`:""}`,children:[e.jsx("span",{children:y}),w]},c)})}),o&&e.jsxs("div",{className:"absolute z-20 top-full left-0 mt-2 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-xl shadow-xl p-4 min-w-[280px]",onClick:c=>c.stopPropagation(),children:[e.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-3",children:"å‘å¸ƒç»“æžœè¯¦æƒ…"}),e.jsx("div",{className:"space-y-2",children:n.targetPlatforms.map(c=>{var y;const d=(y=n.results)==null?void 0:y[c];return e.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-gray-100 dark:border-slate-700 last:border-0",children:[e.jsx("span",{className:"text-lg",children:Ge[c]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:he[c]||c}),(d==null?void 0:d.error)&&e.jsx("div",{className:"text-xs text-red-500 truncate max-w-[180px]",children:d.error}),(d==null?void 0:d.url)&&e.jsx("a",{href:d.url.split(" | ")[0],target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline truncate block max-w-[180px]",onClick:v=>v.stopPropagation(),children:"æŸ¥çœ‹é“¾æŽ¥ â†’"})]}),e.jsx("div",{children:d!=null&&d.success?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:[e.jsx(Y,{className:"w-3 h-3"}),"æˆåŠŸ"]}):d?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",children:[e.jsx(Q,{className:"w-3 h-3"}),"å¤±è´¥"]}):E?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",children:[e.jsx(C,{className:"w-3 h-3 animate-spin"}),"å‘å¸ƒä¸­"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs bg-gray-100 dark:bg-gray-700 text-gray-500",children:[e.jsx(re,{className:"w-3 h-3"}),"å¾…å¤„ç†"]})})]},c)})})]})]})}function Dt(){const[n,o]=l.useState("list"),[T,E]=l.useState([]),[c,d]=l.useState([]),[y,v]=l.useState(!0),[w,F]=l.useState("all"),[A,X]=l.useState("all"),[D,V]=l.useState(""),[N,U]=l.useState(1),Z=50,[k,M]=l.useState(new Set),[le,H]=l.useState(!1),[$,W]=l.useState(null),[t,x]=l.useState(null),[g,m]=l.useState(!1),[S,G]=l.useState(null),[j,I]=l.useState(!1),[R,ue]=l.useState(""),[Je,be]=l.useState(""),[pe,ye]=l.useState(""),[je,fe]=l.useState(""),[ie,Ne]=l.useState(!1),[Ke,ke]=l.useState(new Set),[ve,we]=l.useState(!1),Qe=async a=>{try{await navigator.clipboard.writeText(a),G(a),setTimeout(()=>G(null),2e3)}catch(r){console.error("Failed to copy:",r)}},Ye=()=>{t&&(ue(t.titleZh||t.title),be(t.titleEn||t.title),ye(t.contentZh||t.content||""),fe(t.contentEn||t.content||""),I(!0))},He=()=>{I(!1)},et=async()=>{var a,r;if(t){Ne(!0);try{await u.updateTask(t.id,{title:R,content:pe||je}),await L(t.id),I(!1)}catch(s){alert(((r=(a=s.response)==null?void 0:a.data)==null?void 0:r.message)||"ä¿å­˜å¤±è´¥")}finally{Ne(!1)}}},tt=async a=>{var r,s;if(t){ke(i=>new Set(i).add(a));try{await u.retryPlatform(t.id,a),await L(t.id)}catch(i){alert(((s=(r=i.response)==null?void 0:r.data)==null?void 0:s.message)||"é‡è¯•å¤±è´¥")}finally{ke(i=>{const p=new Set(i);return p.delete(a),p})}}},at=async()=>{var a,r;if(t){we(!0);try{const s=await u.copyTask(t.id);W(s.id),x(null),o("detail")}catch(s){alert(((r=(a=s.response)==null?void 0:a.data)==null?void 0:r.message)||"å¤åˆ¶å¤±è´¥")}finally{we(!1)}}},b=l.useMemo(()=>{let a=c;if(w!=="all"&&(a=a.filter(f=>f.status===w)),A!=="all"&&(a=a.filter(f=>f.targetPlatforms.includes(A))),D.trim()){const f=D.toLowerCase();a=a.filter(q=>{var Le,Ue,Ze;return q.title.toLowerCase().includes(f)||((Le=q.titleZh)==null?void 0:Le.toLowerCase().includes(f))||((Ue=q.titleEn)==null?void 0:Ue.toLowerCase().includes(f))||((Ze=q.content)==null?void 0:Ze.toLowerCase().includes(f))})}const r=Math.ceil(a.length/Z),s=(N-1)*Z,i=s+Z;return{tasks:a.slice(s,i),total:a.length,totalPages:r}},[c,w,A,D,N,Z]);l.useEffect(()=>{U(1)},[w,A,D]);const st=a=>{M(r=>{const s=new Set(r);return s.has(a)?s.delete(a):s.add(a),s})},rt=()=>{k.size===b.tasks.length?M(new Set):M(new Set(b.tasks.map(a=>a.id)))},lt=async()=>{var a,r;if(k.size!==0&&confirm(`ç¡®å®šè¦åˆ é™¤é€‰ä¸­çš„ ${k.size} ä¸ªä»»åŠ¡å—ï¼Ÿ`)){H(!0);try{await Promise.all(Array.from(k).map(s=>u.deleteTask(s))),M(new Set),await z()}catch(s){alert(((r=(a=s.response)==null?void 0:a.data)==null?void 0:r.message)||"æ‰¹é‡åˆ é™¤å¤±è´¥")}finally{H(!1)}}},it=async()=>{var r,s;if(k.size===0)return;const a=b.tasks.filter(i=>k.has(i.id)&&i.status==="draft");if(a.length===0){alert("æ²¡æœ‰å¯å‘å¸ƒçš„è‰ç¨¿ä»»åŠ¡");return}if(confirm(`ç¡®å®šè¦å‘å¸ƒé€‰ä¸­çš„ ${a.length} ä¸ªè‰ç¨¿ä»»åŠ¡å—ï¼Ÿ`))try{await Promise.all(a.map(i=>u.submitTask(i.id))),M(new Set),await z()}catch(i){alert(((s=(r=i.response)==null?void 0:r.data)==null?void 0:s.message)||"æ‰¹é‡å‘å¸ƒå¤±è´¥")}},[P,de]=l.useState(""),[J,Ce]=l.useState(""),[B,ne]=l.useState(""),[oe,Se]=l.useState(""),[h,Pe]=l.useState("image"),[_,Te]=l.useState([]),[Ee,Fe]=l.useState([]),[ee,De]=l.useState([]),[Me,$e]=l.useState(""),[te,ae]=l.useState(!1),L=l.useCallback(async a=>{try{const r=await u.getTask(a);return x(r),r}catch(r){return console.error("Failed to load task detail:",r),null}},[]);l.useEffect(()=>{z()},[]),l.useEffect(()=>{if(n!=="detail"||!$||(m(!0),L($).finally(()=>m(!1)),!((t==null?void 0:t.status)==="processing"||(t==null?void 0:t.status)==="pending")))return;const r=setInterval(()=>{L($)},1e4);return()=>clearInterval(r)},[n,$,t==null?void 0:t.status,L]);const z=async()=>{v(!0);try{const[a,r]=await Promise.all([u.getPlatforms(),u.getTasks({limit:50})]);E(a),d(r)}catch(a){console.error("Failed to load data:",a)}finally{v(!1)}},dt=a=>{Te(r=>r.includes(a)?r.filter(s=>s!==a):[...r,a])},nt=async()=>{var a,r;if(h==="video"){if(!P.trim()){alert("è¯·è¾“å…¥è§†é¢‘æ ‡é¢˜");return}}else if(!P.trim()||!J.trim()){alert("è¯·è¾“å…¥ä¸­è‹±æ–‡æ ‡é¢˜");return}if(_.length===0){alert("è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªå‘å¸ƒå¹³å°");return}ae(!0);try{await u.createTask({titleZh:P,titleEn:h==="video"?P:J,contentZh:B,contentEn:h==="video"?B:oe,mediaType:h,originalFiles:Ee.map(s=>s.filePath),coverImage:ee.length>0?ee[0].filePath:void 0,targetPlatforms:_,scheduleAt:Me||void 0}),ce(),o("list"),await z()}catch(s){alert(((r=(a=s.response)==null?void 0:a.data)==null?void 0:r.message)||"ä¿å­˜å¤±è´¥")}finally{ae(!1)}},ot=async()=>{var a,r;if(h==="video"){if(!P.trim()){alert("è¯·è¾“å…¥è§†é¢‘æ ‡é¢˜");return}}else if(!P.trim()||!J.trim()){alert("è¯·è¾“å…¥ä¸­è‹±æ–‡æ ‡é¢˜");return}if(_.length===0){alert("è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªå‘å¸ƒå¹³å°");return}ae(!0);try{const s=await u.createTask({titleZh:P,titleEn:h==="video"?P:J,contentZh:B,contentEn:h==="video"?B:oe,mediaType:h,originalFiles:Ee.map(i=>i.filePath),coverImage:ee.length>0?ee[0].filePath:void 0,targetPlatforms:_});await u.submitTask(s.id),ce(),o("list"),await z()}catch(s){alert(((r=(a=s.response)==null?void 0:a.data)==null?void 0:r.message)||"å‘å¸ƒå¤±è´¥")}finally{ae(!1)}},Ie=async a=>{var r,s;try{await u.submitTask(a),await z()}catch(i){alert(((s=(r=i.response)==null?void 0:r.data)==null?void 0:s.message)||"æäº¤å¤±è´¥")}},ze=async a=>{var r,s;if(confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå‘å¸ƒä»»åŠ¡å—ï¼Ÿ"))try{await u.deleteTask(a),await z()}catch(i){alert(((s=(r=i.response)==null?void 0:r.data)==null?void 0:s.message)||"åˆ é™¤å¤±è´¥")}},ce=()=>{de(""),Ce(""),ne(""),Se(""),Pe("image"),Te([]),Fe([]),De([]),$e("")},Ae=a=>{W(a),x(null),o("detail"),I(!1)},xe=()=>{o("list"),W(null),x(null),I(!1),z()},ct=async()=>{$&&(m(!0),await L($),m(!1))};if(y)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(C,{className:"w-8 h-8 animate-spin text-gray-400"})});if(n==="list"){const a=k.size>0&&k.size===b.tasks.length,r=k.size>0;return e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-pink-500 to-rose-600 rounded-xl flex items-center justify-center shadow-lg shadow-pink-500/25",children:e.jsx(O,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"å†…å®¹å‘å¸ƒ"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"åˆ›å»ºå’Œç®¡ç†å¤šå¹³å°å†…å®¹åˆ†å‘"})]})]}),e.jsxs("button",{onClick:()=>o("create"),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 shadow-lg shadow-blue-500/25 magnetic-btn",children:[e.jsx(Be,{className:"w-5 h-5"}),"åˆ›å»ºå‘å¸ƒ"]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 p-4 mb-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(mt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("select",{value:w,onChange:s=>F(s.target.value),className:"px-3 py-2 border border-gray-200 dark:border-slate-600 rounded-lg text-sm bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"all",children:"å…¨éƒ¨çŠ¶æ€"}),e.jsx("option",{value:"draft",children:"è‰ç¨¿"}),e.jsx("option",{value:"pending",children:"å¾…å‘å¸ƒ"}),e.jsx("option",{value:"processing",children:"å‘å¸ƒä¸­"}),e.jsx("option",{value:"completed",children:"å·²å®Œæˆ"}),e.jsx("option",{value:"failed",children:"å¤±è´¥"}),e.jsx("option",{value:"partial",children:"éƒ¨åˆ†æˆåŠŸ"})]})]}),e.jsx("div",{children:e.jsxs("select",{value:A,onChange:s=>X(s.target.value),className:"px-3 py-2 border border-gray-200 dark:border-slate-600 rounded-lg text-sm bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"all",children:"å…¨éƒ¨å¹³å°"}),e.jsx("option",{value:"xhs",children:"å°çº¢ä¹¦"}),e.jsx("option",{value:"weibo",children:"å¾®åš"}),e.jsx("option",{value:"douyin",children:"æŠ–éŸ³"}),e.jsx("option",{value:"website",children:"ç½‘ç«™"})]})}),e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(ht,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:D,onChange:s=>V(s.target.value),placeholder:"æœç´¢æ ‡é¢˜...",className:"w-full pl-10 pr-4 py-2 border border-gray-200 dark:border-slate-600 rounded-lg text-sm bg-white dark:bg-slate-700 text-gray-900 dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]})}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["å…± ",b.total," æ¡"]})]})}),r&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-3 mb-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm text-blue-700 dark:text-blue-400 font-medium",children:["å·²é€‰æ‹© ",k.size," é¡¹"]}),e.jsx("button",{onClick:()=>M(new Set),className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300",children:"å–æ¶ˆé€‰æ‹©"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:it,className:"flex items-center gap-1 px-3 py-1.5 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(O,{className:"w-4 h-4"}),"æ‰¹é‡å‘å¸ƒ"]}),e.jsxs("button",{onClick:lt,disabled:le,className:"flex items-center gap-1 px-3 py-1.5 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:[e.jsx(ut,{className:"w-4 h-4"}),"æ‰¹é‡åˆ é™¤"]})]})]}),b.total===0?e.jsxs("div",{className:"text-center py-16 bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700",children:[e.jsx(se,{className:"w-16 h-16 mx-auto text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:c.length===0?"æš‚æ— å‘å¸ƒä»»åŠ¡":"æœªæ‰¾åˆ°åŒ¹é…çš„ä»»åŠ¡"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:c.length===0?"ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®åˆ›å»ºç¬¬ä¸€ä¸ªå‘å¸ƒä»»åŠ¡":"å°è¯•è°ƒæ•´ç­›é€‰æ¡ä»¶"}),c.length===0&&e.jsxs("button",{onClick:()=>o("create"),className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 shadow-lg shadow-blue-500/25 magnetic-btn",children:[e.jsx(Be,{className:"w-5 h-5"}),"åˆ›å»ºå‘å¸ƒ"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-slate-700/50 border-b border-gray-200 dark:border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-12 px-4 py-3",children:e.jsx("input",{type:"checkbox",checked:a,onChange:rt,className:"w-4 h-4 rounded border-gray-300 dark:border-slate-600 text-blue-600 focus:ring-blue-500"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"æ ‡é¢˜"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"ç±»åž‹"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"å¹³å°"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"çŠ¶æ€"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"ç»“æžœ"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"åˆ›å»ºæ—¶é—´"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"æ“ä½œ"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-slate-700",children:b.tasks.map(s=>e.jsxs("tr",{onClick:()=>Ae(s.id),className:"hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors cursor-pointer",children:[e.jsx("td",{className:"w-12 px-4 py-4",onClick:i=>i.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:k.has(s.id),onChange:()=>st(s.id),className:"w-4 h-4 rounded border-gray-300 dark:border-slate-600 text-blue-600 focus:ring-blue-500"})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:s.title}),s.content&&e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-xs",children:s.content})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"inline-flex items-center gap-1 text-sm text-gray-600 dark:text-gray-400",children:[s.mediaType==="image"&&e.jsx(ge,{className:"w-4 h-4"}),s.mediaType==="video"&&e.jsx(K,{className:"w-4 h-4"}),s.mediaType==="text"&&e.jsx(se,{className:"w-4 h-4"}),s.mediaType==="image"?"å›¾æ–‡":s.mediaType==="video"?"è§†é¢‘":"æ–‡ç« "]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex gap-1",children:s.targetPlatforms.map(i=>e.jsx(me,{platform:i},i))})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(We,{status:s.status})}),e.jsx("td",{className:"px-6 py-4",onClick:i=>i.stopPropagation(),children:e.jsx(St,{task:s})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:new Date(s.createdAt).toLocaleString("zh-CN")}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:i=>{i.stopPropagation(),Ae(s.id)},className:"text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",title:"æŸ¥çœ‹è¯¦æƒ…",children:e.jsx(bt,{className:"w-4 h-4"})}),s.status==="draft"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:i=>{i.stopPropagation(),Ie(s.id)},className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300",children:"å‘å¸ƒ"}),e.jsx("button",{onClick:i=>{i.stopPropagation(),ze(s.id)},className:"text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300",children:"åˆ é™¤"})]}),["completed","failed","partial"].includes(s.status)&&e.jsx("button",{onClick:i=>{i.stopPropagation(),ze(s.id)},className:"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-300",children:"åˆ é™¤"})]})})]},s.id))})]})}),b.totalPages>1&&e.jsxs("div",{className:"mt-4 flex items-center justify-between bg-white dark:bg-slate-800 rounded-xl border border-gray-200 dark:border-slate-700 px-4 py-3",children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ç¬¬ ",N," é¡µï¼Œå…± ",b.totalPages," é¡µ"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>U(s=>Math.max(1,s-1)),disabled:N===1,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(pt,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,b.totalPages)},(s,i)=>{let p;return b.totalPages<=5||N<=3?p=i+1:N>=b.totalPages-2?p=b.totalPages-4+i:p=N-2+i,e.jsx("button",{onClick:()=>U(p),className:`px-3 py-1 rounded-lg text-sm transition-colors ${N===p?"bg-blue-600 text-white":"hover:bg-gray-100 dark:hover:bg-slate-700 text-gray-600 dark:text-gray-400"}`,children:p},p)})}),e.jsx("button",{onClick:()=>U(s=>Math.min(b.totalPages,s+1)),disabled:N===b.totalPages,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(yt,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]})]})]})]})}if(n==="detail"){const a=(t==null?void 0:t.status)==="processing"||(t==null?void 0:t.status)==="pending";return e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:xe,className:"p-2 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-xl transition-colors",children:e.jsx(_e,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-pink-500 to-rose-600 rounded-xl flex items-center justify-center shadow-lg shadow-pink-500/25",children:e.jsx(O,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"å‘å¸ƒè¯¦æƒ…"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:(t==null?void 0:t.title)||"åŠ è½½ä¸­..."})]})]})]}),e.jsxs("button",{onClick:ct,disabled:g,className:"flex items-center gap-2 px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-xl transition-colors disabled:opacity-50",children:[e.jsx(jt,{className:`w-4 h-4 ${g?"animate-spin":""}`}),"åˆ·æ–°"]})]}),g&&!t?e.jsx("div",{className:"flex items-center justify-center min-h-[300px]",children:e.jsx(C,{className:"w-8 h-8 animate-spin text-gray-400"})}):t?e.jsxs("div",{className:"space-y-6",children:[t.progress&&t.status!=="draft"&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"å‘å¸ƒè¿›åº¦"}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t.progress.completed,"/",t.progress.total," å¹³å°",t.progress.failed>0&&e.jsxs("span",{className:"text-red-500 ml-2",children:["(",t.progress.failed," å¤±è´¥)"]})]})]}),e.jsx("div",{className:"h-2 bg-gray-200 dark:bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-500 ${t.progress.failed>0?"bg-gradient-to-r from-green-500 to-orange-500":"bg-gradient-to-r from-blue-500 to-green-500"}`,style:{width:`${t.progress.completed/t.progress.total*100}%`}})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"ä»»åŠ¡ID"}),e.jsxs("div",{className:"text-sm font-mono text-gray-900 dark:text-white truncate",children:[t.id.slice(0,8),"..."]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"ç±»åž‹"}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-900 dark:text-white",children:[t.mediaType==="image"&&e.jsx(ge,{className:"w-4 h-4"}),t.mediaType==="video"&&e.jsx(K,{className:"w-4 h-4"}),t.mediaType==="text"&&e.jsx(se,{className:"w-4 h-4"}),t.mediaType==="image"?"å›¾æ–‡":t.mediaType==="video"?"è§†é¢‘":"æ–‡ç« "]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"çŠ¶æ€"}),e.jsx(We,{status:t.status})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"å‘å¸ƒäºº"}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.creatorAvatar?e.jsx("img",{src:t.creatorAvatar,alt:"",className:"w-5 h-5 rounded-full"}):e.jsx(ft,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:t.creatorName||"æœªçŸ¥"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-gray-100 dark:border-slate-700",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"åˆ›å»ºæ—¶é—´"}),e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:new Date(t.createdAt).toLocaleString("zh-CN")})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"æ›´æ–°æ—¶é—´"}),e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:new Date(t.updatedAt).toLocaleString("zh-CN")})]}),t.scheduleAt&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"å®šæ—¶å‘å¸ƒ"}),e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:new Date(t.scheduleAt).toLocaleString("zh-CN")})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"å†…å®¹é¢„è§ˆ"}),t.status==="draft"&&!j&&e.jsxs("button",{onClick:Ye,className:"flex items-center gap-1 text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300",children:[e.jsx(Nt,{className:"w-4 h-4"}),"ç¼–è¾‘"]})]}),e.jsxs("div",{className:"space-y-4",children:[j?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 flex items-center gap-1",children:[e.jsx("span",{className:"w-4 h-4 rounded bg-red-500 text-white text-[10px] flex items-center justify-center",children:"ä¸­"}),"ä¸­æ–‡æ ‡é¢˜"]}),e.jsx("input",{type:"text",value:R,onChange:r=>ue(r.target.value),className:"w-full px-3 py-2 border border-gray-200 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none bg-white dark:bg-slate-700 text-gray-900 dark:text-white"})]}),t.mediaType!=="video"&&e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 flex items-center gap-1",children:[e.jsx("span",{className:"w-4 h-4 rounded bg-blue-500 text-white text-[10px] flex items-center justify-center",children:"EN"}),"English Title"]}),e.jsx("input",{type:"text",value:Je,onChange:r=>be(r.target.value),className:"w-full px-3 py-2 border border-gray-200 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none bg-white dark:bg-slate-700 text-gray-900 dark:text-white"})]})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 flex items-center gap-1",children:[e.jsx("span",{className:"w-4 h-4 rounded bg-red-500 text-white text-[10px] flex items-center justify-center",children:"ä¸­"}),"ä¸­æ–‡æ ‡é¢˜"]}),e.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:t.titleZh||t.title})]}),t.titleEn&&t.titleEn!==t.titleZh&&e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 flex items-center gap-1",children:[e.jsx("span",{className:"w-4 h-4 rounded bg-blue-500 text-white text-[10px] flex items-center justify-center",children:"EN"}),"English Title"]}),e.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:t.titleEn})]})]}),j?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"ä¸­æ–‡å†…å®¹"}),e.jsx("textarea",{value:pe,onChange:r=>ye(r.target.value),rows:6,className:"w-full px-3 py-2 border border-gray-200 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none resize-none bg-white dark:bg-slate-700 text-gray-900 dark:text-white"})]}),t.mediaType!=="video"&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"English Content"}),e.jsx("textarea",{value:je,onChange:r=>fe(r.target.value),rows:6,className:"w-full px-3 py-2 border border-gray-200 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none resize-none bg-white dark:bg-slate-700 text-gray-900 dark:text-white"})]})]}):(t.contentZh||t.content)&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"å†…å®¹"}),e.jsx("div",{className:"text-gray-700 dark:text-gray-300 text-sm whitespace-pre-wrap max-h-40 overflow-y-auto",children:t.contentZh||t.content})]}),j&&e.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[e.jsxs("button",{onClick:et,disabled:ie,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[ie?e.jsx(C,{className:"w-4 h-4 animate-spin"}):e.jsx(qe,{className:"w-4 h-4"}),"ä¿å­˜ä¿®æ”¹"]}),e.jsx("button",{onClick:He,disabled:ie,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"å–æ¶ˆ"})]}),t.originalFiles&&t.originalFiles.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:[t.mediaType==="video"?"è§†é¢‘":"å›¾ç‰‡"," (",t.originalFiles.length,")"]}),e.jsxs("div",{className:"grid grid-cols-4 md:grid-cols-6 gap-2",children:[t.originalFiles.slice(0,12).map((r,s)=>e.jsxs("a",{href:u.getFileUrl(r),target:"_blank",rel:"noopener noreferrer",className:"relative aspect-square rounded-lg overflow-hidden bg-gray-100 dark:bg-slate-700 hover:opacity-80 transition-opacity group",children:[t.mediaType==="video"?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(K,{className:"w-8 h-8 text-gray-400"})}):e.jsx("img",{src:u.getFileUrl(r),alt:`Media ${s+1}`,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center",children:e.jsx(Oe,{className:"w-4 h-4 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]},s)),t.originalFiles.length>12&&e.jsxs("div",{className:"aspect-square rounded-lg bg-gray-100 dark:bg-slate-700 flex items-center justify-center text-gray-500 text-sm",children:["+",t.originalFiles.length-12]})]})]}),t.coverImage&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"è§†é¢‘å°é¢"}),e.jsx("img",{src:u.getFileUrl(t.coverImage),alt:"Cover",className:"h-24 rounded-lg object-cover"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-slate-700 flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"å‘å¸ƒç»“æžœ"}),a&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-blue-600 dark:text-blue-400",children:[e.jsx(C,{className:"w-3 h-3 animate-spin"}),"æ¯ 10 ç§’è‡ªåŠ¨åˆ·æ–°"]})]}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-slate-700/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"å¹³å°"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"çŠ¶æ€"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"å‘å¸ƒé“¾æŽ¥"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"é”™è¯¯ä¿¡æ¯"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"æ“ä½œ"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-slate-700",children:t.targetPlatforms.map(r=>{var p;const s=(p=t.results)==null?void 0:p[r],i=Ke.has(r);return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(me,{platform:r}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:he[r]||r})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(Ct,{result:s,isProcessing:a})}),e.jsx("td",{className:"px-6 py-4",children:s!=null&&s.url?e.jsx("div",{className:"flex flex-col gap-1",children:s.url.split(" | ").map((f,q)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:f,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 hover:underline",children:e.jsx("span",{className:"truncate max-w-[200px]",children:f})}),e.jsx("button",{onClick:()=>Qe(f),className:"p-1 hover:bg-gray-100 dark:hover:bg-slate-700 rounded transition-colors flex-shrink-0",title:"å¤åˆ¶é“¾æŽ¥",children:S===f?e.jsx(kt,{className:"w-3 h-3 text-green-500"}):e.jsx(Xe,{className:"w-3 h-3 text-gray-400 hover:text-gray-600"})}),e.jsx("a",{href:f,target:"_blank",rel:"noopener noreferrer",className:"p-1 hover:bg-gray-100 dark:hover:bg-slate-700 rounded transition-colors flex-shrink-0",title:"æ‰“å¼€é“¾æŽ¥",children:e.jsx(Oe,{className:"w-3 h-3 text-gray-400 hover:text-blue-600"})})]},q))}):e.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-sm",children:"-"})}),e.jsx("td",{className:"px-6 py-4",children:s!=null&&s.error?e.jsx("span",{className:"text-sm text-red-600 dark:text-red-400",children:s.error}):e.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-sm",children:"-"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:s&&!s.success&&e.jsxs("button",{onClick:()=>tt(r),disabled:i,className:"flex items-center gap-1 text-sm text-orange-600 dark:text-orange-400 hover:text-orange-800 dark:hover:text-orange-300 disabled:opacity-50 ml-auto",title:"é‡è¯•å‘å¸ƒ",children:[i?e.jsx(C,{className:"w-4 h-4 animate-spin"}):e.jsx(vt,{className:"w-4 h-4"}),"é‡è¯•"]})})]},r)})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:xe,className:"px-6 py-3 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"è¿”å›žåˆ—è¡¨"}),t.status==="draft"&&!j&&e.jsxs("button",{onClick:async()=>{await Ie(t.id),await L(t.id)},className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 shadow-lg shadow-blue-500/25 transition-all",children:[e.jsx(O,{className:"w-5 h-5"}),"å‘å¸ƒ"]})]}),t.status!=="draft"&&e.jsxs("button",{onClick:at,disabled:ve,className:"flex items-center gap-2 px-6 py-3 border-2 border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-50 dark:hover:bg-slate-700 transition-all disabled:opacity-50",children:[ve?e.jsx(C,{className:"w-5 h-5 animate-spin"}):e.jsx(Xe,{className:"w-5 h-5"}),"å¤åˆ¶ä¸ºè‰ç¨¿"]})]})]}):e.jsxs("div",{className:"text-center py-16 bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700",children:[e.jsx(Q,{className:"w-16 h-16 mx-auto text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"ä»»åŠ¡ä¸å­˜åœ¨"}),e.jsx("button",{onClick:xe,className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300",children:"è¿”å›žåˆ—è¡¨"})]})]})}return e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("button",{onClick:()=>o("list"),className:"p-2 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-xl transition-colors",children:e.jsx(_e,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-pink-500 to-rose-600 rounded-xl flex items-center justify-center shadow-lg shadow-pink-500/25",children:e.jsx(O,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"åˆ›å»ºå‘å¸ƒ"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"å¡«å†™å†…å®¹å¹¶é€‰æ‹©å‘å¸ƒå¹³å°"})]})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 p-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"å†…å®¹ç±»åž‹"}),e.jsx("div",{className:"flex gap-4",children:[{type:"image",icon:ge,label:"å›¾æ–‡"},{type:"video",icon:K,label:"è§†é¢‘"}].map(({type:a,icon:r,label:s})=>e.jsxs("button",{onClick:()=>Pe(a),className:`
                  flex items-center gap-2 px-4 py-3 rounded-xl border-2 transition-all magnetic-btn
                  ${h===a?"border-blue-600 bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-lg shadow-blue-500/25":"border-gray-200 dark:border-slate-600 hover:border-gray-300 dark:hover:border-slate-500 text-gray-700 dark:text-gray-300 bg-white dark:bg-slate-700"}
                `,children:[e.jsx(r,{className:"w-5 h-5"}),s]},a))})]}),h==="video"&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"è§†é¢‘æ ‡é¢˜"}),e.jsx("input",{type:"text",value:P,onChange:a=>de(a.target.value),placeholder:"è¾“å…¥è§†é¢‘æ ‡é¢˜...",className:"w-full px-4 py-3 border border-gray-200 dark:border-slate-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all bg-white dark:bg-slate-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"è§†é¢‘æè¿°ï¼ˆå¯é€‰ï¼‰"}),e.jsx("textarea",{value:B,onChange:a=>ne(a.target.value),placeholder:"è¾“å…¥è§†é¢‘æè¿°...",rows:3,className:"w-full px-4 py-3 border border-gray-200 dark:border-slate-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all resize-none bg-white dark:bg-slate-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500"})]})]}),h!=="video"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4 p-6 bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700",children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 rounded-lg bg-gradient-to-br from-red-500 to-rose-600 text-white text-xs flex items-center justify-center shadow-lg shadow-red-500/25",children:"ä¸­"}),"ä¸­æ–‡ç‰ˆ"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"æ ‡é¢˜"}),e.jsx("input",{type:"text",value:P,onChange:a=>de(a.target.value),placeholder:"è¾“å…¥ä¸­æ–‡æ ‡é¢˜...",className:"w-full px-4 py-3 border border-gray-200 dark:border-slate-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all bg-gray-50 dark:bg-slate-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"æ­£æ–‡"}),e.jsx("textarea",{value:B,onChange:a=>ne(a.target.value),placeholder:"è¾“å…¥ä¸­æ–‡æ­£æ–‡...",rows:6,className:"w-full px-4 py-3 border border-gray-200 dark:border-slate-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all resize-none bg-gray-50 dark:bg-slate-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500"})]})]}),e.jsxs("div",{className:"space-y-4 p-6 bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700",children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 rounded-lg bg-gradient-to-br from-blue-500 to-indigo-600 text-white text-xs flex items-center justify-center shadow-lg shadow-blue-500/25",children:"EN"}),"English Version"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title"}),e.jsx("input",{type:"text",value:J,onChange:a=>Ce(a.target.value),placeholder:"Enter English title...",className:"w-full px-4 py-3 border border-gray-200 dark:border-slate-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all bg-gray-50 dark:bg-slate-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Content"}),e.jsx("textarea",{value:oe,onChange:a=>Se(a.target.value),placeholder:"Enter English content...",rows:6,className:"w-full px-4 py-3 border border-gray-200 dark:border-slate-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all resize-none bg-gray-50 dark:bg-slate-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500"})]})]})]}),h!=="text"&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 p-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:h==="image"?"ä¸Šä¼ å›¾ç‰‡":"ä¸Šä¼ è§†é¢‘"}),e.jsx(Ve,{onFilesUploaded:Fe,maxFiles:h==="video"?1:20,acceptedTypes:h==="video"?["video/*"]:["image/*"]})]}),h==="video"&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 p-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"è§†é¢‘å°é¢ï¼ˆå¯é€‰ï¼‰"}),e.jsx(Ve,{onFilesUploaded:De,maxFiles:1,acceptedTypes:["image/*"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"å¦‚ä¸ä¸Šä¼ å°é¢ï¼Œå°†ä½¿ç”¨è§†é¢‘ç¬¬ä¸€å¸§ä½œä¸ºå°é¢"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 p-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"å‘å¸ƒå¹³å°"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:T.map(a=>e.jsxs("button",{onClick:()=>dt(a.name),className:`
                  flex items-center gap-3 p-4 rounded-xl border-2 transition-all
                  ${_.includes(a.name)?"border-blue-600 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-slate-600 hover:border-gray-300 dark:hover:border-slate-500 bg-gray-50 dark:bg-slate-700"}
                `,children:[e.jsx(me,{platform:a.name}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:a.displayName}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[h==="image"&&`æœ€å¤š ${a.maxImages} å¼ å›¾`,h==="video"&&`æœ€é•¿ ${Math.floor(a.videoSpecs.maxDuration/60)} åˆ†é’Ÿ`,h==="text"&&(a.contentLimit>0?`${a.contentLimit} å­—`:"æ— é™åˆ¶")]})]}),_.includes(a.name)&&e.jsx(Y,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 ml-auto"})]},a.name))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 p-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(wt,{className:"w-4 h-4 inline mr-1"}),"å®šæ—¶å‘å¸ƒï¼ˆå¯é€‰ï¼‰"]}),e.jsx("input",{type:"datetime-local",value:Me,onChange:a=>$e(a.target.value),className:"w-full sm:w-auto px-4 py-3 border border-gray-200 dark:border-slate-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all bg-gray-50 dark:bg-slate-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"flex items-center gap-4 pt-6",children:[e.jsxs("button",{onClick:ot,disabled:te,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 shadow-lg shadow-blue-500/25 transition-all disabled:opacity-50 disabled:cursor-not-allowed magnetic-btn",children:[te?e.jsx(C,{className:"w-5 h-5 animate-spin"}):e.jsx(O,{className:"w-5 h-5"}),"ç«‹å³å‘å¸ƒ"]}),e.jsxs("button",{onClick:nt,disabled:te,className:"flex items-center gap-2 px-6 py-3 border border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(qe,{className:"w-5 h-5"}),"ä¿å­˜è‰ç¨¿"]}),e.jsx("button",{onClick:()=>{ce(),o("list")},disabled:te,className:"px-6 py-3 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:"å–æ¶ˆ"})]})]})]})}export{Dt as default};
