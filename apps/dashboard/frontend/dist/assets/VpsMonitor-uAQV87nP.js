import{a0 as y,r as O,j as e,m as $e,a5 as oe,ae as de,R as Re,ay as ce,aH as xe,aI as _e,A as me,e as Me,C as Be,aJ as ue,$ as Ie,_ as Te}from"./index-ChgcL0jp.js";import{v as Y}from"./vps-monitor.api-Dxkyqz6U.js";import{a as z,L as X,p as q,q as K,C as Q,A as Ve,b as F,e as he,r as We,d as fe,c as ke,h as ze,g as Fe,u as Ke,i as Z,G as Ue,j as pe,k as ge,D as He,l as Ge,m as Xe,R as ye,T as be}from"./generateCategoricalChart-D9DEDoZK.js";import{X as we,Y as Ae,C as Ye}from"./YAxis-BwOn1Pgp.js";import"./tiny-invariant-BaFNuDhB.js";var qe=["layout","type","stroke","connectNulls","isRange","ref"],Je=["key"],Pe;function U(t){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},U(t)}function Oe(t,r){if(t==null)return{};var s=Qe(t,r),a,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)a=o[i],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(s[a]=t[a])}return s}function Qe(t,r){if(t==null)return{};var s={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(r.indexOf(a)>=0)continue;s[a]=t[a]}return s}function W(){return W=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},W.apply(this,arguments)}function ve(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,a)}return s}function I(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?ve(Object(s),!0).forEach(function(a){R(t,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ve(Object(s)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(s,a))})}return t}function Ze(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function je(t,r){for(var s=0;s<r.length;s++){var a=r[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,Ce(a.key),a)}}function et(t,r,s){return r&&je(t.prototype,r),s&&je(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function tt(t,r,s){return r=J(r),rt(t,Se()?Reflect.construct(r,s||[],J(t).constructor):r.apply(t,s))}function rt(t,r){if(r&&(U(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return at(t)}function at(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Se(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Se=function(){return!!t})()}function J(t){return J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},J(t)}function st(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&ee(t,r)}function ee(t,r){return ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},ee(t,r)}function R(t,r,s){return r=Ce(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function Ce(t){var r=it(t,"string");return U(r)=="symbol"?r:r+""}function it(t,r){if(U(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var a=s.call(t,r);if(U(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var L=function(t){function r(){var s;Ze(this,r);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return s=tt(this,r,[].concat(i)),R(s,"state",{isAnimationFinished:!0}),R(s,"id",Ke("recharts-area-")),R(s,"handleAnimationEnd",function(){var l=s.props.onAnimationEnd;s.setState({isAnimationFinished:!0}),Z(l)&&l()}),R(s,"handleAnimationStart",function(){var l=s.props.onAnimationStart;s.setState({isAnimationFinished:!1}),Z(l)&&l()}),s}return st(r,t),et(r,[{key:"renderDots",value:function(a,i,o){var l=this.props.isAnimationActive,d=this.state.isAnimationFinished;if(l&&!d)return null;var c=this.props,x=c.dot,u=c.points,m=c.dataKey,f=z(this.props,!1),w=z(x,!0),p=u.map(function(b,S){var v=I(I(I({key:"dot-".concat(S),r:3},f),w),{},{index:S,cx:b.x,cy:b.y,dataKey:m,value:b.value,payload:b.payload,points:u});return r.renderDotItem(x,v)}),A={clipPath:a?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return y.createElement(X,W({className:"recharts-area-dots"},A),p)}},{key:"renderHorizontalRect",value:function(a){var i=this.props,o=i.baseLine,l=i.points,d=i.strokeWidth,c=l[0].x,x=l[l.length-1].x,u=a*Math.abs(c-x),m=q(l.map(function(f){return f.y||0}));return K(o)&&typeof o=="number"?m=Math.max(o,m):o&&Array.isArray(o)&&o.length&&(m=Math.max(q(o.map(function(f){return f.y||0})),m)),K(m)?y.createElement("rect",{x:c<x?c:c-u,y:0,width:u,height:Math.floor(m+(d?parseInt("".concat(d),10):1))}):null}},{key:"renderVerticalRect",value:function(a){var i=this.props,o=i.baseLine,l=i.points,d=i.strokeWidth,c=l[0].y,x=l[l.length-1].y,u=a*Math.abs(c-x),m=q(l.map(function(f){return f.x||0}));return K(o)&&typeof o=="number"?m=Math.max(o,m):o&&Array.isArray(o)&&o.length&&(m=Math.max(q(o.map(function(f){return f.x||0})),m)),K(m)?y.createElement("rect",{x:0,y:c<x?c:c-u,width:m+(d?parseInt("".concat(d),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(a){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(a):this.renderHorizontalRect(a)}},{key:"renderAreaStatically",value:function(a,i,o,l){var d=this.props,c=d.layout,x=d.type,u=d.stroke,m=d.connectNulls,f=d.isRange;d.ref;var w=Oe(d,qe);return y.createElement(X,{clipPath:o?"url(#clipPath-".concat(l,")"):null},y.createElement(Q,W({},z(w,!0),{points:a,connectNulls:m,type:x,baseLine:i,layout:c,stroke:"none",className:"recharts-area-area"})),u!=="none"&&y.createElement(Q,W({},z(this.props,!1),{className:"recharts-area-curve",layout:c,type:x,connectNulls:m,fill:"none",points:a})),u!=="none"&&f&&y.createElement(Q,W({},z(this.props,!1),{className:"recharts-area-curve",layout:c,type:x,connectNulls:m,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(a,i){var o=this,l=this.props,d=l.points,c=l.baseLine,x=l.isAnimationActive,u=l.animationBegin,m=l.animationDuration,f=l.animationEasing,w=l.animationId,p=this.state,A=p.prevPoints,b=p.prevBaseLine;return y.createElement(Ve,{begin:u,duration:m,isActive:x,easing:f,from:{t:0},to:{t:1},key:"area-".concat(w),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var v=S.t;if(A){var D=A.length/d.length,h=d.map(function(P,_){var $=Math.floor(_*D);if(A[$]){var E=A[$],T=F(E.x,P.x),M=F(E.y,P.y);return I(I({},P),{},{x:T(v),y:M(v)})}return P}),g;if(K(c)&&typeof c=="number"){var j=F(b,c);g=j(v)}else if(he(c)||We(c)){var C=F(b,0);g=C(v)}else g=c.map(function(P,_){var $=Math.floor(_*D);if(b[$]){var E=b[$],T=F(E.x,P.x),M=F(E.y,P.y);return I(I({},P),{},{x:T(v),y:M(v)})}return P});return o.renderAreaStatically(h,g,a,i)}return y.createElement(X,null,y.createElement("defs",null,y.createElement("clipPath",{id:"animationClipPath-".concat(i)},o.renderClipRect(v))),y.createElement(X,{clipPath:"url(#animationClipPath-".concat(i,")")},o.renderAreaStatically(d,c,a,i)))})}},{key:"renderArea",value:function(a,i){var o=this.props,l=o.points,d=o.baseLine,c=o.isAnimationActive,x=this.state,u=x.prevPoints,m=x.prevBaseLine,f=x.totalLength;return c&&l&&l.length&&(!u&&f>0||!fe(u,l)||!fe(m,d))?this.renderAreaWithAnimation(a,i):this.renderAreaStatically(l,d,a,i)}},{key:"render",value:function(){var a,i=this.props,o=i.hide,l=i.dot,d=i.points,c=i.className,x=i.top,u=i.left,m=i.xAxis,f=i.yAxis,w=i.width,p=i.height,A=i.isAnimationActive,b=i.id;if(o||!d||!d.length)return null;var S=this.state.isAnimationFinished,v=d.length===1,D=ke("recharts-area",c),h=m&&m.allowDataOverflow,g=f&&f.allowDataOverflow,j=h||g,C=he(b)?this.id:b,P=(a=z(l,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},_=P.r,$=_===void 0?3:_,E=P.strokeWidth,T=E===void 0?2:E,M=ze(l)?l:{},H=M.clipDot,G=H===void 0?!0:H,V=$*2+T;return y.createElement(X,{className:D},h||g?y.createElement("defs",null,y.createElement("clipPath",{id:"clipPath-".concat(C)},y.createElement("rect",{x:h?u:u-w/2,y:g?x:x-p/2,width:h?w:w*2,height:g?p:p*2})),!G&&y.createElement("clipPath",{id:"clipPath-dots-".concat(C)},y.createElement("rect",{x:u-V/2,y:x-V/2,width:w+V,height:p+V}))):null,v?null:this.renderArea(j,C),(l||v)&&this.renderDots(j,G,C),(!A||S)&&Fe.renderCallByParent(this.props,d))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,curBaseLine:a.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:a.points!==i.curPoints||a.baseLine!==i.curBaseLine?{curPoints:a.points,curBaseLine:a.baseLine}:null}}])}(O.PureComponent);Pe=L;R(L,"displayName","Area");R(L,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Ue.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});R(L,"getBaseValue",function(t,r,s,a){var i=t.layout,o=t.baseValue,l=r.props.baseValue,d=l??o;if(K(d)&&typeof d=="number")return d;var c=i==="horizontal"?a:s,x=c.scale.domain();if(c.type==="number"){var u=Math.max(x[0],x[1]),m=Math.min(x[0],x[1]);return d==="dataMin"?m:d==="dataMax"||u<0?u:Math.max(Math.min(x[0],x[1]),0)}return d==="dataMin"?x[0]:d==="dataMax"?x[1]:x[0]});R(L,"getComposedData",function(t){var r=t.props,s=t.item,a=t.xAxis,i=t.yAxis,o=t.xAxisTicks,l=t.yAxisTicks,d=t.bandSize,c=t.dataKey,x=t.stackedData,u=t.dataStartIndex,m=t.displayedData,f=t.offset,w=r.layout,p=x&&x.length,A=Pe.getBaseValue(r,s,a,i),b=w==="horizontal",S=!1,v=m.map(function(h,g){var j;p?j=x[u+g]:(j=pe(h,c),Array.isArray(j)?S=!0:j=[A,j]);var C=j[1]==null||p&&pe(h,c)==null;return b?{x:ge({axis:a,ticks:o,bandSize:d,entry:h,index:g}),y:C?null:i.scale(j[1]),value:j,payload:h}:{x:C?null:a.scale(j[1]),y:ge({axis:i,ticks:l,bandSize:d,entry:h,index:g}),value:j,payload:h}}),D;return p||S?D=v.map(function(h){var g=Array.isArray(h.value)?h.value[0]:null;return b?{x:h.x,y:g!=null&&h.y!=null?i.scale(g):null}:{x:g!=null?a.scale(g):null,y:h.y}}):D=b?i.scale(A):a.scale(A),I({points:v,baseLine:D,layout:w,isRange:S},f)});R(L,"renderDotItem",function(t,r){var s;if(y.isValidElement(t))s=y.cloneElement(t,r);else if(Z(t))s=t(r);else{var a=ke("recharts-area-dot",typeof t!="boolean"?t.className:""),i=r.key,o=Oe(r,Je);s=y.createElement(He,W({},o,{key:i,className:a}))}return s});var Ne=Ge({chartName:"AreaChart",GraphicalChild:L,axisComponents:[{axisType:"xAxis",AxisComp:we},{axisType:"yAxis",AxisComp:Ae}],formatAxisMap:Xe});function xt(){var M,H,G,V,te,re,ae,se,ie,ne;const[t,r]=O.useState(null),[s,a]=O.useState([]),[i,o]=O.useState([]),[l,d]=O.useState({running:0,total:0}),[c,x]=O.useState(!0),[u,m]=O.useState(null),[f,w]=O.useState(""),[p,A]=O.useState([]),[b,S]=O.useState(1),[v,D]=O.useState(!1),h=async()=>{try{const[n,N,k]=await Promise.all([Y.getStats(),Y.getContainers(),Y.getServices()]);r(n),a(N.containers||[]),d({running:N.running||0,total:N.total||0}),o(k.services||[]),w(new Date().toLocaleTimeString("zh-CN")),m(null)}catch(n){m(n instanceof Error?n.message:"获取数据失败")}finally{x(!1)}},g=async()=>{D(!0);try{const n=await Y.getHistory(b);A(n)}catch(n){console.error("Failed to fetch history:",n)}finally{D(!1)}},j=()=>{x(!0),h(),g()};O.useEffect(()=>{h();const n=setInterval(h,1e4);return()=>clearInterval(n)},[]),O.useEffect(()=>{g();const n=setInterval(g,6e4);return()=>clearInterval(n)},[b]);const C=n=>{if(n===0)return"0 B";const N=1024,k=["B","KB","MB","GB","TB"],B=Math.floor(Math.log(n)/Math.log(N));return`${(n/Math.pow(N,B)).toFixed(1)} ${k[B]}`},P=n=>{const N=Math.floor(n/86400),k=Math.floor(n%86400/3600),B=Math.floor(n%3600/60);return N>0?`${N}天 ${k}小时`:k>0?`${k}小时 ${B}分钟`:`${B}分钟`},_=n=>n.includes("Up")||n==="running"?e.jsx(Ie,{className:"w-4 h-4"}):n.includes("Exited")||n==="stopped"?e.jsx(Te,{className:"w-4 h-4"}):e.jsx(oe,{className:"w-4 h-4"}),$=n=>n<60?"bg-green-500":n<80?"bg-yellow-500":"bg-red-500",E=({data:n,dataKey:N,color:k,title:B,icon:Ee,currentValue:De,unit:le="%"})=>e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 p-5 tilt-card",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center shadow-lg",style:{background:`linear-gradient(135deg, ${k}, ${k}dd)`,boxShadow:`0 8px 16px ${k}40`},children:e.jsx(Ee,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:B}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[De,le]})]})]})}),e.jsx("div",{className:"h-24",children:n.length>1?e.jsx(ye,{width:"100%",height:"100%",children:e.jsxs(Ne,{data:n,margin:{top:0,right:0,left:0,bottom:0},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:`gradient-${N}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:k,stopOpacity:.3}),e.jsx("stop",{offset:"100%",stopColor:k,stopOpacity:.05})]})}),e.jsx(L,{type:"monotone",dataKey:N,stroke:k,strokeWidth:2,fill:`url(#gradient-${N})`,isAnimationActive:!1}),e.jsx(be,{contentStyle:{backgroundColor:"rgba(255,255,255,0.95)",border:"none",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",padding:"8px 12px"},labelStyle:{color:"#6b7280",fontSize:"12px"},formatter:Le=>[`${Le}${le}`,B]})]})}):e.jsx("div",{className:"h-full flex items-center justify-center text-gray-400 dark:text-gray-500 text-sm",children:"数据采集中..."})})]});if(c&&!t)return e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx($e,{className:"w-8 h-8 animate-spin text-blue-500"})});if(u&&!t)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-96",children:[e.jsx(oe,{className:"w-12 h-12 text-red-500 dark:text-red-400 mb-4"}),e.jsx("p",{className:"text-red-600 dark:text-red-400 mb-3",children:u}),e.jsx("button",{onClick:j,className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 shadow-lg shadow-blue-500/25 magnetic-btn",children:"重试"})]});const T=[{value:1,label:"1小时"},{value:6,label:"6小时"},{value:24,label:"24小时"},{value:168,label:"7天"}];return e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-500/25",children:e.jsx(de,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"VPS 监控"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[t==null?void 0:t.hostname," · ",t==null?void 0:t.platform," · 更新于 ",f]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex bg-gray-100 dark:bg-slate-700 rounded-xl p-1",children:T.map(n=>e.jsx("button",{onClick:()=>S(n.value),className:`px-3 py-1.5 text-sm font-medium rounded-lg transition-all ${b===n.value?"bg-white dark:bg-slate-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:n.label},n.value))}),e.jsxs("button",{onClick:j,disabled:c||v,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 disabled:opacity-50 shadow-lg shadow-blue-500/25 magnetic-btn",children:[e.jsx(Re,{className:`w-4 h-4 ${c||v?"animate-spin":""}`}),"刷新"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(E,{data:p,dataKey:"cpu",color:"#3b82f6",title:"CPU 使用率",icon:ce,currentValue:(t==null?void 0:t.cpu.usage)||0}),e.jsx(E,{data:p,dataKey:"memory",color:"#8b5cf6",title:"内存使用率",icon:xe,currentValue:(t==null?void 0:t.memory.usagePercent)||0}),e.jsx(E,{data:p,dataKey:"disk",color:"#f59e0b",title:"磁盘使用率",icon:_e,currentValue:((M=t==null?void 0:t.disk.usagePercent)==null?void 0:M.toString().replace("%",""))||0}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 p-5 tilt-card",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg shadow-green-500/25",children:e.jsx(me,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"系统负载"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:((G=(H=t==null?void 0:t.cpu.loadAverage)==null?void 0:H["1min"])==null?void 0:G.toFixed(2))||"-"})]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-400 dark:text-gray-500",children:"1分钟"}),e.jsx("div",{className:"font-semibold text-gray-700 dark:text-gray-300",children:(te=(V=t==null?void 0:t.cpu.loadAverage)==null?void 0:V["1min"])==null?void 0:te.toFixed(2)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-400 dark:text-gray-500",children:"5分钟"}),e.jsx("div",{className:"font-semibold text-gray-700 dark:text-gray-300",children:(ae=(re=t==null?void 0:t.cpu.loadAverage)==null?void 0:re["5min"])==null?void 0:ae.toFixed(2)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-400 dark:text-gray-500",children:"15分钟"}),e.jsx("div",{className:"font-semibold text-gray-700 dark:text-gray-300",children:(ie=(se=t==null?void 0:t.cpu.loadAverage)==null?void 0:se["15min"])==null?void 0:ie.toFixed(2)})]})]}),e.jsxs("div",{className:"mt-3 text-xs text-gray-400 dark:text-gray-500 text-center",children:[(((ne=t==null?void 0:t.cpu.loadAverage)==null?void 0:ne["1min"])||0)>8?"⚠️ 负载过高":"✓ 负载正常"," (8核CPU)"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 p-6 shimmer-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"资源趋势"}),e.jsxs("span",{className:"text-sm text-gray-400 dark:text-gray-500 ml-2",children:[p.length," 个数据点",p.length<60&&e.jsxs("span",{className:"text-amber-500 dark:text-amber-400 ml-2",children:["(数据采集中，约 ",p.length," 分钟)"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"CPU"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-500"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"内存"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-500"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"磁盘"})]})]})]}),p.length===0?e.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"text-center",children:[e.jsx(me,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"暂无历史数据"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"每分钟自动采集，请稍候..."})]})}):e.jsx("div",{className:"h-64",children:e.jsx(ye,{width:"100%",height:"100%",children:e.jsxs(Ne,{data:p,margin:{top:10,right:10,left:0,bottom:0},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorCpu",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.2}),e.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorMem",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#8b5cf6",stopOpacity:.2}),e.jsx("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorDisk",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#f59e0b",stopOpacity:.2}),e.jsx("stop",{offset:"95%",stopColor:"#f59e0b",stopOpacity:0})]})]}),e.jsx(Ye,{strokeDasharray:"3 3",stroke:"#f3f4f6",vertical:!1}),e.jsx(we,{dataKey:"time",axisLine:!1,tickLine:!1,tick:{fontSize:11,fill:"#9ca3af"},dy:10}),e.jsx(Ae,{domain:[0,100],axisLine:!1,tickLine:!1,tick:{fontSize:11,fill:"#9ca3af"},dx:-10,tickFormatter:n=>`${n}%`}),e.jsx(be,{contentStyle:{backgroundColor:"rgba(255,255,255,0.98)",border:"none",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.12)",padding:"12px 16px"},labelStyle:{color:"#374151",fontWeight:600,marginBottom:"8px"},formatter:(n,N)=>{const k={cpu:"CPU",memory:"内存",disk:"磁盘"};return[`${n}%`,k[N]||N]}}),e.jsx(L,{type:"monotone",dataKey:"cpu",stroke:"#3b82f6",strokeWidth:2,fill:"url(#colorCpu)",dot:!1,activeDot:{r:4,fill:"#3b82f6"}}),e.jsx(L,{type:"monotone",dataKey:"memory",stroke:"#8b5cf6",strokeWidth:2,fill:"url(#colorMem)",dot:!1,activeDot:{r:4,fill:"#8b5cf6"}}),e.jsx(L,{type:"monotone",dataKey:"disk",stroke:"#f59e0b",strokeWidth:2,fill:"url(#colorDisk)",dot:!1,activeDot:{r:4,fill:"#f59e0b"}})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 p-5 tilt-card",children:e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg shadow-indigo-500/25",children:e.jsx(Be,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"系统运行时间"}),e.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:P((t==null?void 0:t.uptime)||0)})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 p-5 tilt-card",children:e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-500/25",children:e.jsx(ce,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"CPU 信息"}),e.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[t==null?void 0:t.cpu.cores," 核 · ",t==null?void 0:t.cpu.model]})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 p-5 tilt-card",children:e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl flex items-center justify-center shadow-lg shadow-purple-500/25",children:e.jsx(xe,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"内存信息"}),e.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[C((t==null?void 0:t.memory.used)||0)," / ",C((t==null?void 0:t.memory.total)||0)]})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"关键服务"})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(n=>e.jsxs("div",{className:"border border-gray-200 dark:border-slate-600 rounded-xl p-4 hover:shadow-md dark:hover:shadow-slate-900/50 hover:border-gray-300 dark:hover:border-slate-500 transition-all bg-white dark:bg-slate-700/50",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:n.name}),e.jsxs("span",{className:`px-2.5 py-1 rounded-lg text-xs font-medium flex items-center gap-1 ${n.status.includes("Up")||n.status==="running"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:[_(n.status),n.status]})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 space-y-1",children:[e.jsxs("div",{children:["端口: ",e.jsx("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:n.port})]}),e.jsxs("div",{children:["容器: ",e.jsx("span",{className:"font-mono text-xs text-gray-600 dark:text-gray-400",children:n.containerName})]}),n.uptime&&e.jsxs("div",{className:"text-gray-400 dark:text-gray-500",children:["运行 ",n.uptime]})]})]},n.name))})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Docker 容器"})]}),e.jsxs("span",{className:"px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-lg text-sm font-medium",children:[l.running," / ",l.total," 运行中"]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-slate-700/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"容器"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"状态"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"CPU 使用率"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"内存使用率"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"内存详情"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"端口"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-slate-700",children:s.map((n,N)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:n.name})]})}),e.jsx("td",{className:"px-6 py-3",children:e.jsx("span",{className:`px-2.5 py-1 rounded-lg text-xs font-medium ${n.status.includes("Up")||n.status==="running"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:n.status.split(" ")[0]})}),e.jsx("td",{className:"px-6 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 h-2 bg-gray-200 dark:bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${$(n.cpuPercent||0)}`,style:{width:`${Math.min(n.cpuPercent||0,100)}%`}})}),e.jsx("span",{className:"text-sm font-mono text-gray-700 dark:text-gray-300 w-14",children:n.cpu||"-"})]})}),e.jsx("td",{className:"px-6 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 h-2 bg-gray-200 dark:bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${$((n.memoryPercent||0)*10)}`,style:{width:`${Math.min((n.memoryPercent||0)*10,100)}%`}})}),e.jsx("span",{className:"text-sm font-mono text-gray-700 dark:text-gray-300 w-14",children:n.memoryPercent!==void 0?`${n.memoryPercent.toFixed(1)}%`:"-"})]})}),e.jsx("td",{className:"px-6 py-3 text-sm text-gray-500 dark:text-gray-400 font-mono text-xs",children:n.memory||"-"}),e.jsx("td",{className:"px-6 py-3 text-sm text-gray-500 dark:text-gray-400 font-mono text-xs",children:n.ports||"-"})]},N))})]})})]})]})}export{xt as default};
