import{aa as oe,a9 as pe,r as m,j as e,y as re,aS as je,bh as ne,av as Ne,aW as ge,ab as ue,bi as ce,ap as xe,x as me,aJ as fe,z as ve,$ as he,bg as we,C as be,bj as ye,_ as Ce}from"./index-DO5GSdQ6.js";import{a as Pe}from"./qa-report.api-wEreUZo6.js";import"./index-B9ygI19o.js";const p=a=>a>=80?"text-emerald-500":a>=60?"text-amber-500":"text-red-500",u=({status:a})=>{switch(a){case"pass":case"resolved":return e.jsx(he,{className:"w-4 h-4 text-emerald-500"});case"fail":case"open":return e.jsx(Ce,{className:"w-4 h-4 text-red-500"});case"skip":case"mitigated":case"accepted":return e.jsx(ye,{className:"w-4 h-4 text-amber-500"});default:return e.jsx(be,{className:"w-4 h-4 text-white/40"})}},Se=({priority:a})=>{const t={p0:"bg-red-500 text-white",p1:"bg-orange-500 text-white",p2:"bg-amber-500 text-white",p3:"bg-gray-500 text-white"};return e.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded ${t[a]||t.p3}`,children:a.toUpperCase()})};function j({title:a,icon:t,count:s,children:l,defaultOpen:h=!1,badge:d}){const[n,r]=m.useState(h);return e.jsxs("div",{className:"bg-white/5 rounded-lg border border-white/10 overflow-hidden",children:[e.jsxs("button",{onClick:()=>r(!n),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-white/5 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[n?e.jsx(xe,{className:"w-4 h-4"}):e.jsx(me,{className:"w-4 h-4"}),t,e.jsx("span",{className:"font-medium",children:a}),s!==void 0&&e.jsxs("span",{className:"text-sm text-white/40",children:["(",s,")"]})]}),d]}),n&&e.jsx("div",{className:"border-t border-white/10 p-4",children:l})]})}function g({tests:a}){const t=a.filter(l=>l.status==="pass").length,s=a.filter(l=>l.status==="fail").length;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-4 text-sm mb-3",children:[e.jsxs("span",{className:"text-emerald-500",children:[t," pass"]}),s>0&&e.jsxs("span",{className:"text-red-500",children:[s," fail"]})]}),a.map(l=>e.jsx("div",{className:`p-3 rounded-lg border ${l.status==="fail"?"border-red-500/30 bg-red-500/10":"border-white/5 bg-white/5"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(u,{status:l.status}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-xs text-white/40",children:l.id}),e.jsx("span",{className:"text-sm",children:l.name})]}),l.description&&e.jsx("p",{className:"text-xs text-white/50 mt-1",children:l.description}),l.error&&e.jsx("p",{className:"text-xs text-red-400 mt-1 font-mono",children:l.error})]}),l.duration!==void 0&&e.jsxs("span",{className:"text-xs text-white/30",children:[l.duration,"ms"]})]})},l.id)),a.length===0&&e.jsx("div",{className:"text-center py-4 text-white/40",children:"No tests"})]})}function Re({items:a}){return e.jsxs("div",{className:"space-y-2",children:[a.map(t=>e.jsx("div",{className:`p-3 rounded-lg border ${t.status==="open"?"border-red-500/30 bg-red-500/10":"border-white/5 bg-white/5"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(u,{status:t.status}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(Se,{priority:t.priority}),e.jsx("span",{className:"font-mono text-xs text-white/40",children:t.id})]}),e.jsx("div",{className:"font-medium mt-1",children:t.title}),e.jsx("p",{className:"text-sm text-white/50 mt-1",children:t.description}),t.feature&&e.jsxs("span",{className:"text-xs text-white/30 mt-1",children:["Feature: ",t.feature]})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded capitalize ${t.status==="open"?"bg-red-500/20 text-red-400":t.status==="resolved"?"bg-emerald-500/20 text-emerald-400":"bg-amber-500/20 text-amber-400"}`,children:t.status})]})},t.id)),a.length===0&&e.jsx("div",{className:"text-center py-4 text-white/40",children:"No RCIs"})]})}function de({checks:a}){return e.jsxs("div",{className:"space-y-2",children:[a.map(t=>e.jsx("div",{className:"p-3 rounded-lg border border-white/5 bg-white/5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u,{status:t.status}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm",children:t.name}),t.required&&e.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-violet-500/20 text-violet-400 rounded",children:"required"})]}),t.description&&e.jsx("p",{className:"text-xs text-white/50 mt-1",children:t.description})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-white/30",children:[t.automated?e.jsx(fe,{className:"w-3 h-3"}):e.jsx(ve,{className:"w-3 h-3"}),e.jsx("span",{className:"font-mono",children:t.id})]})]})},t.id)),a.length===0&&e.jsx("div",{className:"text-center py-4 text-white/40",children:"No gate checks"})]})}function $e({path:a}){var d,n;const[t,s]=m.useState(!1),l=((d=a.steps)==null?void 0:d.filter(r=>r.verified).length)||0,h=((n=a.steps)==null?void 0:n.length)||0;return e.jsxs("div",{className:"p-3 rounded-lg border border-white/5 bg-white/5",children:[e.jsx("button",{onClick:()=>s(!t),className:"w-full text-left",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ce,{className:`w-4 h-4 mt-0.5 ${a.verified?"text-emerald-500":"text-amber-500"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-xs text-white/40",children:a.id}),e.jsx("span",{className:"text-sm font-medium",children:a.name})]}),e.jsx("p",{className:"text-xs text-white/50 mt-1",children:a.description}),e.jsxs("div",{className:"text-xs text-white/30 mt-1",children:[l,"/",h," steps verified"]})]}),t?e.jsx(xe,{className:"w-4 h-4"}):e.jsx(me,{className:"w-4 h-4"})]})}),t&&a.steps&&e.jsx("div",{className:"mt-3 ml-7 space-y-1",children:a.steps.map(r=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.verified?e.jsx(he,{className:"w-4 h-4 text-emerald-500"}):e.jsx(we,{className:"w-4 h-4 text-white/20"}),e.jsxs("span",{className:"text-xs text-white/40",children:[r.order,"."]}),e.jsx("span",{className:r.verified?"text-white/80":"text-white/40",children:r.name})]},r.order))})]})}function Ge(){var f,v,w,b,y,C,P,S,R,$,E,T,L,G,k,q,I,O,U,B,D,F,M,z,A,J,W,X,_,H,K,Q,V,Y,Z,ee,se,te,ae,le,ie;const a=oe(),{repo:t}=pe(),[s,l]=m.useState(null),[h,d]=m.useState(!0),[n,r]=m.useState(null);if(m.useEffect(()=>{t&&(d(!0),Pe(t).then(i=>{i.success&&i.data?l(i.data):r(i.error||"Failed to load report"),d(!1)}))},[t]),h)return e.jsx("div",{className:"min-h-screen bg-[#0a0a0f] text-white flex items-center justify-center",children:e.jsx("div",{className:"text-white/50",children:"Loading..."})});if(n||!s)return e.jsx("div",{className:"min-h-screen bg-[#0a0a0f] text-white p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("button",{onClick:()=>a("/qa"),className:"flex items-center gap-2 text-white/60 hover:text-white mb-6",children:[e.jsx(re,{className:"w-4 h-4"})," Back to Dashboard"]}),e.jsx("div",{className:"text-center py-12 text-white/50",children:n||"Repository not found"})]})});const o={meta:((v=(f=s.tests)==null?void 0:f.meta)==null?void 0:v.length)||0,unit:((b=(w=s.tests)==null?void 0:w.unit)==null?void 0:b.length)||0,e2e:((C=(y=s.tests)==null?void 0:y.e2e)==null?void 0:C.length)||0,total:(((S=(P=s.tests)==null?void 0:P.meta)==null?void 0:S.length)||0)+((($=(R=s.tests)==null?void 0:R.unit)==null?void 0:$.length)||0)+(((T=(E=s.tests)==null?void 0:E.e2e)==null?void 0:T.length)||0),pass:[...((L=s.tests)==null?void 0:L.meta)||[],...((G=s.tests)==null?void 0:G.unit)||[],...((k=s.tests)==null?void 0:k.e2e)||[]].filter(i=>i.status==="pass").length,fail:[...((q=s.tests)==null?void 0:q.meta)||[],...((I=s.tests)==null?void 0:I.unit)||[],...((O=s.tests)==null?void 0:O.e2e)||[]].filter(i=>i.status==="fail").length},c={total:((B=(U=s.rcis)==null?void 0:U.items)==null?void 0:B.length)||0,open:((F=(D=s.rcis)==null?void 0:D.items)==null?void 0:F.filter(i=>i.status==="open").length)||0,p0:((z=(M=s.rcis)==null?void 0:M.items)==null?void 0:z.filter(i=>i.priority==="p0").length)||0},x={pr:((J=(A=s.gates)==null?void 0:A.pr)==null?void 0:J.length)||0,prPass:((X=(W=s.gates)==null?void 0:W.pr)==null?void 0:X.filter(i=>i.status==="pass").length)||0,release:((H=(_=s.gates)==null?void 0:_.release)==null?void 0:H.length)||0,releasePass:((Q=(K=s.gates)==null?void 0:K.release)==null?void 0:Q.filter(i=>i.status==="pass").length)||0},N={total:((V=s.goldenPaths)==null?void 0:V.length)||0,verified:((Y=s.goldenPaths)==null?void 0:Y.filter(i=>i.verified).length)||0};return e.jsx("div",{className:"min-h-screen bg-[#0a0a0f] text-white p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>a("/qa"),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(re,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold",children:s.repo}),e.jsxs("p",{className:"text-white/50",children:["v",s.version]})]}),e.jsx("div",{className:`text-4xl font-bold ${p(s.summary.overall)}`,children:s.summary.overall})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10 text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${p(s.summary.overall)}`,children:s.summary.overall}),e.jsx("div",{className:"text-xs text-white/50 mt-1",children:"Overall"})]}),e.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10 text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${p(s.summary.meta)}`,children:s.summary.meta}),e.jsx("div",{className:"text-xs text-white/50 mt-1",children:"Meta"})]}),e.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10 text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${p(s.summary.unit)}`,children:s.summary.unit}),e.jsx("div",{className:"text-xs text-white/50 mt-1",children:"Unit"})]}),e.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10 text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${p(s.summary.e2e)}`,children:s.summary.e2e}),e.jsx("div",{className:"text-xs text-white/50 mt-1",children:"E2E"})]})]}),e.jsx(j,{title:"Tests",icon:e.jsx(ne,{className:"w-5 h-5 text-blue-400"}),count:o.total,defaultOpen:o.fail>0,badge:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxs("span",{className:"text-emerald-500",children:[o.pass," pass"]}),o.fail>0&&e.jsxs("span",{className:"text-red-500",children:[o.fail," fail"]})]}),children:e.jsxs("div",{className:"space-y-4",children:[((Z=s.tests)==null?void 0:Z.meta)&&s.tests.meta.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-sm text-white/60",children:[e.jsx(je,{className:"w-4 h-4"})," Meta Tests"]}),e.jsx(g,{tests:s.tests.meta})]}),((ee=s.tests)==null?void 0:ee.unit)&&s.tests.unit.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-sm text-white/60",children:[e.jsx(ne,{className:"w-4 h-4"})," Unit Tests"]}),e.jsx(g,{tests:s.tests.unit})]}),((se=s.tests)==null?void 0:se.e2e)&&s.tests.e2e.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-sm text-white/60",children:[e.jsx(Ne,{className:"w-4 h-4"})," E2E Tests"]}),e.jsx(g,{tests:s.tests.e2e})]})]})}),e.jsx(j,{title:"RCIs",icon:e.jsx(ge,{className:"w-5 h-5 text-amber-400"}),count:c.total,defaultOpen:c.p0>0||c.open>0,badge:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.open>0&&e.jsxs("span",{className:"text-red-500",children:[c.open," open"]}),c.p0>0&&e.jsxs("span",{className:"text-red-500",children:[c.p0," P0"]})]}),children:e.jsx(Re,{items:((te=s.rcis)==null?void 0:te.items)||[]})}),e.jsx(j,{title:"Gates",icon:e.jsx(ue,{className:"w-5 h-5 text-emerald-400"}),count:x.pr+x.release,badge:e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsxs("span",{className:"text-white/50",children:["PR: ",x.prPass,"/",x.pr]}),e.jsxs("span",{className:"text-white/50",children:["Release: ",x.releasePass,"/",x.release]})]}),children:e.jsxs("div",{className:"space-y-4",children:[((ae=s.gates)==null?void 0:ae.pr)&&s.gates.pr.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-white/60 mb-2",children:"PR Gate"}),e.jsx(de,{checks:s.gates.pr})]}),((le=s.gates)==null?void 0:le.release)&&s.gates.release.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-white/60 mb-2",children:"Release Gate"}),e.jsx(de,{checks:s.gates.release})]})]})}),e.jsx(j,{title:"Golden Paths",icon:e.jsx(ce,{className:"w-5 h-5 text-purple-400"}),count:N.total,badge:e.jsxs("span",{className:"text-sm text-white/50",children:[N.verified,"/",N.total," verified"]}),children:e.jsxs("div",{className:"space-y-2",children:[(ie=s.goldenPaths)==null?void 0:ie.map(i=>e.jsx($e,{path:i},i.id)),(!s.goldenPaths||s.goldenPaths.length===0)&&e.jsx("div",{className:"text-center py-4 text-white/40",children:"No golden paths defined"})]})})]})})}export{Ge as default};
