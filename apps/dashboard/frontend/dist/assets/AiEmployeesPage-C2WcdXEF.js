import{c as j,r as d,f as g,j as e,U as k,R as h}from"./index-BldjrbfF.js";import{D as b}from"./DynamicIcon-B9tt75Q2.js";import{C as N}from"./chevron-down-5eJ7uH9O.js";import{C as u}from"./chevron-right-DYufkBQA.js";import{f as v}from"./ai-employees.api-DCgx3ksA.js";import"./user-ZR_gddba.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=j("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);function w({department:t,defaultExpanded:m=!1}){const[r,x]=d.useState(m),o=g(),n=t.employees.length,l=n>0;return e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:[e.jsxs("button",{onClick:()=>l&&x(!r),disabled:!l,className:`w-full flex items-center justify-between p-4 text-left transition-colors ${l?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":"cursor-default opacity-60"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx(b,{name:t.icon,className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-slate-800 dark:text-white flex items-center gap-2",children:[t.name,e.jsxs("span",{className:"text-sm font-normal text-slate-500 dark:text-slate-400",children:["(",n,"人)"]})]}),t.description&&e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:t.description})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[t.todayTotal>0&&e.jsxs("span",{className:"text-sm text-blue-600 dark:text-blue-400",children:["今日 ",t.todayTotal," 次任务"]}),l&&(r?e.jsx(N,{className:"w-5 h-5 text-slate-400"}):e.jsx(u,{className:"w-5 h-5 text-slate-400"}))]})]}),r&&l&&e.jsx("div",{className:"border-t border-slate-100 dark:border-slate-700",children:t.employees.map((a,c)=>e.jsxs("button",{onClick:()=>o(`/ai-employees/${a.id}`),className:`w-full flex items-center justify-between p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors ${c>0?"border-t border-slate-100 dark:border-slate-700":""}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg bg-slate-100 dark:bg-slate-700 flex items-center justify-center",children:e.jsx(b,{name:a.icon,className:"w-4 h-4 text-slate-600 dark:text-slate-300"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-slate-800 dark:text-white",children:a.name}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:a.role})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[a.stats.todayRunning>0?e.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 rounded-full",children:"工作中"}):a.stats.todayTotal>0?e.jsxs("span",{className:"text-xs px-2 py-1 bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-300 rounded-full",children:["今日 ",a.stats.todayTotal," 次"]}):e.jsx("span",{className:"text-xs px-2 py-1 bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 rounded-full",children:"空闲"}),e.jsx(u,{className:"w-4 h-4 text-slate-400"})]})]},a.id))}),!l&&e.jsxs("div",{className:"border-t border-slate-100 dark:border-slate-700 p-6 text-center",children:[e.jsx(y,{className:"w-8 h-8 text-slate-300 dark:text-slate-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-slate-400 dark:text-slate-500",children:"部门待招聘"})]})]})}function S(){const[t,m]=d.useState([]),[r,x]=d.useState(!0),[o,n]=d.useState(null),[l,a]=d.useState(null),c=async()=>{x(!0),n(null);try{const s=await v();m(s),a(new Date)}catch(s){n("加载数据失败，请稍后重试"),console.error("Failed to load AI employees:",s)}finally{x(!1)}};d.useEffect(()=>{c();const s=setInterval(c,3e4);return()=>clearInterval(s)},[]);const p=t.reduce((s,i)=>s+i.employees.length,0),f=t.reduce((s,i)=>s+i.todayTotal,0);return e.jsxs("div",{className:"px-4 sm:px-0 pb-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-semibold text-slate-800 dark:text-white mb-1 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-50 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx(k,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),"AI 员工"]}),e.jsxs("p",{className:"text-slate-500 dark:text-slate-400 ml-13",children:["公司自动化团队 · ",p," 名员工 · 今日 ",f," 次任务"]})]}),e.jsxs("button",{onClick:c,disabled:r,className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors disabled:opacity-50",children:[e.jsx(h,{className:`w-4 h-4 ${r?"animate-spin":""}`}),"刷新"]})]}),l&&e.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500 ml-13",children:["最后更新: ",l.toLocaleTimeString("zh-CN")]})]}),o&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl text-red-600 dark:text-red-400",children:o}),r&&t.length===0&&e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(h,{className:"w-8 h-8 text-blue-500 animate-spin"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"加载中..."})]})}),(!r||t.length>0)&&e.jsx("div",{className:"space-y-3",children:t.map((s,i)=>e.jsx(w,{department:s,defaultExpanded:i===0&&s.employees.length>0},s.id))})]})}export{S as default};
