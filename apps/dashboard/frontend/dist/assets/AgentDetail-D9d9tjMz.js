import{a9 as w,aa as y,r,j as e,R as l,_ as m,aY as C,Z as h,y as $,C as k,$ as A}from"./index-DNFMCH88.js";import{a as S}from"./agents.api-BXQsx6BK.js";const D={Zap:h,RefreshCw:l,Diamond:C};function I(){const{agentId:n}=w(),d=y(),[t,g]=r.useState(null),[j,u]=r.useState(!0),[o,c]=r.useState(null),i=async()=>{if(n)try{const s=await S(n);s?(g(s),c(null)):c("Agent 不存在")}catch(s){c(s.message)}finally{u(!1)}};r.useEffect(()=>{i();const s=setInterval(i,3e4);return()=>clearInterval(s)},[n]);const p=s=>{switch(s){case"success":return e.jsx(A,{className:"w-4 h-4 text-emerald-500"});case"running":return e.jsx(l,{className:"w-4 h-4 text-blue-500 animate-spin"});case"error":return e.jsx(m,{className:"w-4 h-4 text-red-500"});default:return e.jsx(k,{className:"w-4 h-4 text-gray-400"})}},N=s=>new Date(s).toLocaleString("zh-CN"),b=s=>{if(!s)return"-";const a=Math.floor(s/1e3);if(a<60)return`${a}s`;const f=Math.floor(a/60),v=a%60;return`${f}m ${v}s`};if(j)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(l,{className:"w-8 h-8 text-blue-500 animate-spin"})});if(o||!t)return e.jsxs("div",{className:"bg-red-900/20 border border-red-800 rounded-xl p-6 text-center",children:[e.jsx(m,{className:"w-12 h-12 text-red-500 mx-auto mb-3"}),e.jsx("p",{className:"text-red-400",children:o||"Agent 不存在"}),e.jsx("button",{onClick:()=>d("/cecilia"),className:"mt-4 px-4 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600 transition-colors",children:"返回总览"})]});const x=D[t.icon]||h;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("button",{onClick:()=>d("/cecilia"),className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[e.jsx($,{className:"w-4 h-4"}),e.jsx("span",{children:"返回 Cecilia"})]}),e.jsxs("div",{className:`
        p-6 rounded-xl border
        bg-gradient-to-br ${t.gradient.from} ${t.gradient.to} bg-opacity-10
        dark:bg-slate-800 ${t.gradient.border}
      `,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-4 rounded-xl bg-gradient-to-br ${t.gradient.from} ${t.gradient.to}`,children:e.jsx(x,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:t.name}),e.jsxs("p",{className:"text-gray-400",children:[t.role," · ",t.codename]})]})]}),e.jsx("button",{onClick:i,className:"p-2 text-gray-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",children:e.jsx(l,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"mt-4 text-gray-300",children:t.description}),e.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:t.workflowKeywords.map(s=>e.jsx("span",{className:"px-2 py-1 text-xs bg-slate-700 text-gray-300 rounded",children:s},s))})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-800 rounded-xl p-5 border border-slate-700",children:[e.jsx("p",{className:"text-3xl font-bold text-white",children:t.stats.todayTotal}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"今日任务"})]}),e.jsxs("div",{className:"bg-slate-800 rounded-xl p-5 border border-emerald-800",children:[e.jsx("p",{className:"text-3xl font-bold text-emerald-400",children:t.stats.todaySuccess}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"成功"})]}),e.jsxs("div",{className:"bg-slate-800 rounded-xl p-5 border border-red-800",children:[e.jsx("p",{className:"text-3xl font-bold text-red-400",children:t.stats.todayError}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"失败"})]}),e.jsxs("div",{className:"bg-slate-800 rounded-xl p-5 border border-blue-800",children:[e.jsxs("p",{className:"text-3xl font-bold text-blue-400",children:[t.stats.successRate,"%"]}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"成功率"})]})]}),e.jsxs("div",{className:"bg-slate-800 rounded-xl border border-slate-700",children:[e.jsx("div",{className:"px-6 py-4 border-b border-slate-700",children:e.jsx("h2",{className:"font-semibold text-white",children:"执行历史"})}),t.recentTasks&&t.recentTasks.length>0?e.jsx("div",{className:"divide-y divide-slate-700",children:t.recentTasks.map(s=>e.jsx("div",{className:"px-6 py-4 hover:bg-slate-700/50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[p(s.status),e.jsx("span",{className:"text-white",children:s.workflowName})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsx("span",{children:b(s.duration)}),e.jsx("span",{children:N(s.startedAt)})]})]})},s.id))}):e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(x,{className:"w-12 h-12 text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-400",children:"暂无执行记录"})]})]})]})}export{I as default};
