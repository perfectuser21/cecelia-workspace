import{j as e,$ as f,bg as C,r as n,aG as k,ab as S,aK as $,ao as R,F as T,E as D,H as P,U as W,bh as A,C as g,a2 as _,an as E,e as b,bi as L,aR as I,aq as U,R as F,bj as B,l as G,al as H,A as M}from"./index-xvZdZyzc.js";const V="/api/panorama";async function q(){try{return await(await fetch(`${V}/plan`)).json()}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}function K({data:t,loading:l}){if(l)return e.jsx("div",{className:"space-y-3",children:[1,2,3].map(c=>e.jsx("div",{className:"h-8 bg-slate-100 dark:bg-slate-700/50 rounded-lg animate-pulse"},c))});if(!t||t.items.length===0)return e.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[e.jsx("p",{className:"text-sm",children:"No tasks for today"}),e.jsx("p",{className:"text-xs mt-1 opacity-75",children:"Create a .plan.md file to add tasks"})]});const a=t.items.filter(c=>c.completed).length,d=t.items.length,o=d>0?a/d*100:0;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500 rounded-full transition-all duration-500",style:{width:`${o}%`}})}),e.jsxs("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:[a,"/",d]})]}),e.jsx("div",{className:"space-y-2",children:t.items.map(c=>e.jsxs("div",{className:`
              flex items-start gap-3 p-3 rounded-xl transition-colors
              ${c.completed?"bg-emerald-50 dark:bg-emerald-900/20":"bg-slate-50 dark:bg-slate-700/30"}
            `,children:[c.completed?e.jsx(f,{className:"w-5 h-5 text-emerald-500 flex-shrink-0 mt-0.5"}):e.jsx(C,{className:"w-5 h-5 text-slate-400 dark:text-slate-500 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:`
                text-sm
                ${c.completed?"text-slate-500 dark:text-slate-400 line-through":"text-slate-700 dark:text-slate-300"}
              `,children:c.content}),c.priority==="high"&&!c.completed&&e.jsx("span",{className:"ml-auto text-xs px-2 py-0.5 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-full",children:"High"})]},c.id))}),e.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["Source: ",t.source]})]})}function z({loading:t}){const[l,a]=n.useState(null),[d,o]=n.useState(!0);if(n.useEffect(()=>{async function r(){var x,s;try{const m=await(await fetch("/api/cecelia/overview")).json();let j={runsToday:0,runsWeek:0,activeWorkflows:0};try{const u=await fetch("/n8n/api/v1/workflows?active=true",{headers:{Accept:"application/json"}});if(u.ok){const y=await u.json();j.activeWorkflows=((x=y.data)==null?void 0:x.length)||0}}catch{}const N=((s=m.data)==null?void 0:s.runs)||[],v=new Date().toDateString(),w=new Date(Date.now()-7*24*60*60*1e3);a({cecelia:{tasksToday:N.filter(u=>new Date(u.started_at).toDateString()===v).length,tasksWeek:N.filter(u=>new Date(u.started_at)>=w).length},n8n:j,github:{prsWeek:0,commitsWeek:0}})}catch{}finally{o(!1)}}t||r()},[t]),d||t)return e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[1,2,3,4].map(r=>e.jsx("div",{className:"h-20 bg-slate-100 dark:bg-slate-700/50 rounded-xl animate-pulse"},r))});const c=[{icon:k,label:"Cecelia Tasks",value:(l==null?void 0:l.cecelia.tasksWeek)||0,detail:`${(l==null?void 0:l.cecelia.tasksToday)||0} today`,color:"text-blue-500",bg:"bg-blue-50 dark:bg-blue-900/20"},{icon:S,label:"N8N Workflows",value:(l==null?void 0:l.n8n.activeWorkflows)||0,detail:"active",color:"text-orange-500",bg:"bg-orange-50 dark:bg-orange-900/20"},{icon:$,label:"PRs Merged",value:(l==null?void 0:l.github.prsWeek)||"-",detail:"this week",color:"text-purple-500",bg:"bg-purple-50 dark:bg-purple-900/20"},{icon:R,label:"Commits",value:(l==null?void 0:l.github.commitsWeek)||"-",detail:"this week",color:"text-emerald-500",bg:"bg-emerald-50 dark:bg-emerald-900/20"}];return e.jsx("div",{className:"grid grid-cols-2 gap-4",children:c.map(r=>e.jsxs("div",{className:`p-4 rounded-xl ${r.bg}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(r.icon,{className:`w-4 h-4 ${r.color}`}),e.jsx("span",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:r.label})]}),e.jsx("p",{className:`text-2xl font-bold ${r.color}`,children:r.value}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:r.detail})]},r.label))})}function J({loading:t}){if(t)return e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[1,2,3,4].map(a=>e.jsx("div",{className:"h-20 bg-slate-100 dark:bg-slate-700/50 rounded-xl animate-pulse"},a))});const l=[{icon:T,label:"Posts",value:"-",detail:"this week",color:"text-purple-500",bg:"bg-purple-50 dark:bg-purple-900/20"},{icon:D,label:"Views",value:"-",detail:"total",color:"text-blue-500",bg:"bg-blue-50 dark:bg-blue-900/20"},{icon:P,label:"Likes",value:"-",detail:"total",color:"text-pink-500",bg:"bg-pink-50 dark:bg-pink-900/20"},{icon:W,label:"Followers",value:"-",detail:"total",color:"text-emerald-500",bg:"bg-emerald-50 dark:bg-emerald-900/20"}];return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-2 gap-4",children:l.map(a=>e.jsxs("div",{className:`p-4 rounded-xl ${a.bg}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(a.icon,{className:`w-4 h-4 ${a.color}`}),e.jsx("span",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:a.label})]}),e.jsx("p",{className:`text-2xl font-bold ${a.color}`,children:a.value}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:a.detail})]},a.label))}),e.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 text-center",children:"Connect Notion to see real data"})]})}function O({loading:t}){return t?e.jsx("div",{className:"h-32 bg-slate-100 dark:bg-slate-700/50 rounded-xl animate-pulse"}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-emerald-50 dark:bg-emerald-900/20 text-center",children:[e.jsx(A,{className:"w-5 h-5 text-emerald-500 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-emerald-500",children:"-"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Active"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-amber-50 dark:bg-amber-900/20 text-center",children:[e.jsx(g,{className:"w-5 h-5 text-amber-500 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-amber-500",children:"-"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Due Soon"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-red-50 dark:bg-red-900/20 text-center",children:[e.jsx(_,{className:"w-5 h-5 text-red-500 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-red-500",children:"-"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"At Risk"})]})]}),e.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 text-center",children:"Connect Notion to see client projects"})]})}function Q({loading:t}){return t?e.jsx("div",{className:"h-32 bg-slate-100 dark:bg-slate-700/50 rounded-xl animate-pulse"}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-amber-50 dark:bg-amber-900/20",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-5 h-5 text-amber-500"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Total Value"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-slate-400",children:[e.jsx(b,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"-"})]})]}),e.jsx("p",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400 mt-2",children:"$ -"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 rounded-xl bg-emerald-50 dark:bg-emerald-900/20 text-center",children:[e.jsx(b,{className:"w-4 h-4 text-emerald-500 mx-auto mb-1"}),e.jsx("p",{className:"text-sm font-bold text-emerald-500",children:"-"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Day P/L"})]}),e.jsxs("div",{className:"p-3 rounded-xl bg-slate-50 dark:bg-slate-700/30 text-center",children:[e.jsx(L,{className:"w-4 h-4 text-slate-400 mx-auto mb-1"}),e.jsx("p",{className:"text-sm font-bold text-slate-500",children:"-"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Total P/L"})]})]}),e.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 text-center",children:"Coming soon"})]})}function X({loading:t}){const[l,a]=n.useState([]),[d,o]=n.useState(!0);if(n.useEffect(()=>{async function s(){try{const m=await(await fetch("/api/cecelia/overview")).json();m.success&&m.data&&a(m.data.runs||[])}catch{}finally{o(!1)}}t||s()},[t]),d||t)return e.jsx("div",{className:"space-y-3",children:[1,2].map(s=>e.jsx("div",{className:"h-20 bg-slate-100 dark:bg-slate-700/50 rounded-xl animate-pulse"},s))});const c=l.filter(s=>s.status==="running"),r=l.filter(s=>s.status!=="running").slice(0,3);if(c.length===0&&r.length===0)return e.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[e.jsx("p",{className:"text-sm",children:"No active executions"}),e.jsx("p",{className:"text-xs mt-1 opacity-75",children:"Cecelia is idle"})]});const x=s=>{switch(s){case"running":return{icon:U,color:"text-blue-500",bg:"bg-blue-50 dark:bg-blue-900/20",label:"Running"};case"completed":return{icon:f,color:"text-emerald-500",bg:"bg-emerald-50 dark:bg-emerald-900/20",label:"Completed"};case"failed":return{icon:I,color:"text-red-500",bg:"bg-red-50 dark:bg-red-900/20",label:"Failed"};default:return{icon:g,color:"text-slate-500",bg:"bg-slate-50 dark:bg-slate-700/30",label:"Pending"}}};return e.jsxs("div",{className:"space-y-4",children:[c.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Active"}),c.map(s=>{const i=x(s.status),m=s.total_steps>0?s.current_step/s.total_steps*100:0;return e.jsxs("div",{className:`p-4 rounded-xl ${i.bg}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i.icon,{className:`w-4 h-4 ${i.color} animate-pulse`}),e.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:s.prd_id})]}),e.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Step ",s.current_step,"/",s.total_steps]})]}),e.jsx("div",{className:"h-1.5 bg-slate-200 dark:bg-slate-600 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-500",style:{width:`${m}%`}})}),s.feature_branch&&e.jsxs("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:["Branch: ",s.feature_branch]})]},s.id)})]}),r.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Recent"}),r.map(s=>{const i=x(s.status);return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl ${i.bg}`,children:[e.jsx(i.icon,{className:`w-4 h-4 ${i.color}`}),e.jsx("span",{className:"flex-1 text-sm text-slate-700 dark:text-slate-300",children:s.prd_id}),e.jsx("span",{className:`text-xs ${i.color}`,children:i.label})]},s.id)})]})]})}const h=({children:t,className:l=""})=>e.jsx("div",{className:`
      rounded-2xl
      bg-white dark:bg-slate-800/80
      backdrop-blur-xl
      border border-slate-200 dark:border-slate-700
      shadow-lg shadow-slate-200/50 dark:shadow-black/30
      transition-all duration-300 ease-out
      ${l}
    `,children:t}),p=({icon:t,title:l,subtitle:a,color:d="slate"})=>{const o={slate:"bg-slate-100 dark:bg-slate-700/50 text-slate-600 dark:text-slate-400",blue:"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400",purple:"bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400",emerald:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400",amber:"bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400"};return e.jsxs("div",{className:"flex items-center gap-3 px-5 py-4 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("div",{className:`p-2 rounded-xl ${o[d]}`,children:e.jsx(t,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 uppercase tracking-wider",children:l}),a&&e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:a})]})]})};function Z(){const[t,l]=n.useState(null),[a,d]=n.useState(!0),[o,c]=n.useState(null),r=n.useCallback(async()=>{try{d(!0);const s=await q();s.success&&s.data&&l(s.data),c(new Date)}catch{}finally{d(!1)}},[]);n.useEffect(()=>{r()},[r]),n.useEffect(()=>{const s=setInterval(r,6e4);return()=>clearInterval(s)},[r]);const x=()=>{r()};return e.jsx("div",{className:"min-h-screen -m-8 -mt-8 p-8 bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:e.jsxs("div",{className:"space-y-6 p-2 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Command Center"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Personal Dashboard"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[o&&e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[e.jsx(g,{className:"w-3 h-3"}),o.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})]}),e.jsx("button",{onClick:x,disabled:a,className:"p-2 text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 hover:bg-white dark:hover:bg-slate-700 rounded-lg transition-colors disabled:opacity-50",title:"Refresh",children:e.jsx(F,{className:`w-5 h-5 ${a?"animate-spin":""}`})})]})]}),e.jsxs(h,{className:"overflow-hidden",children:[e.jsx(p,{icon:B,title:"Today",subtitle:"Plan & Tasks",color:"slate"}),e.jsx("div",{className:"p-5",children:e.jsx(K,{data:t,loading:a})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(h,{className:"overflow-hidden",children:[e.jsx(p,{icon:k,title:"AI Workforce",subtitle:"Cecelia + N8N",color:"blue"}),e.jsx("div",{className:"p-5",children:e.jsx(z,{loading:a})})]}),e.jsxs(h,{className:"overflow-hidden",children:[e.jsx(p,{icon:G,title:"Media",subtitle:"Content & Growth",color:"purple"}),e.jsx("div",{className:"p-5",children:e.jsx(J,{loading:a})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(h,{className:"overflow-hidden",children:[e.jsx(p,{icon:H,title:"Clients",subtitle:"Project Delivery",color:"emerald"}),e.jsx("div",{className:"p-5",children:e.jsx(O,{loading:a})})]}),e.jsxs(h,{className:"overflow-hidden",children:[e.jsx(p,{icon:b,title:"Portfolio",subtitle:"Investments",color:"amber"}),e.jsx("div",{className:"p-5",children:e.jsx(Q,{loading:a})})]})]}),e.jsxs(h,{className:"overflow-hidden",children:[e.jsx(p,{icon:M,title:"Live",subtitle:"Current Execution",color:"blue"}),e.jsx("div",{className:"p-5",children:e.jsx(X,{loading:a})})]})]})})}export{Z as default};
