const l=[{id:"spark",name:"Spark",codename:"点燃执行",icon:"Zap",role:"执行者",description:"解析 PRD 文档，拆解 Checkpoints，调用 Claude Code 执行代码任务",workflowKeywords:["PRD Executor","prd-executor","Execute","Cecelia"],status:"active",gradient:{from:"from-blue-500",to:"to-cyan-500",border:"border-blue-500/30"}},{id:"echo",name:"Echo",codename:"协调反馈",icon:"RefreshCw",role:"协调者",description:"监控执行状态，处理多阶段任务，分析结果并创建下一阶段",workflowKeywords:["Coordinator","coordinator","Multi-stage","Callback"],status:"active",gradient:{from:"from-emerald-500",to:"to-teal-500",border:"border-emerald-500/30"}},{id:"prism",name:"Prism",codename:"多维分析",icon:"Diamond",role:"分析者",description:"多维度分析执行结果，提供智能决策建议",workflowKeywords:["Analyzer","Analysis","Report"],status:"planned",gradient:{from:"from-violet-500",to:"to-purple-500",border:"border-violet-500/30"}}],d="";async function g(){try{const n=await fetch(`${d}/api/cecelia/overview?limit=20`);if(!n.ok)return null;const t=await n.json();return t.success?t:null}catch{return null}}function h(n){switch(n){case"24h":return 24*60*60*1e3;case"72h":return 72*60*60*1e3;case"7d":return 7*24*60*60*1e3}}function p(n,t){const e=Date.now(),s=h(t),o=e-s;return n.filter(a=>new Date(a.started_at).getTime()>=o)}function m(n,t){const e=p(n,t),s=e.filter(r=>r.status==="completed").length,o=e.filter(r=>r.status==="failed").length,a=e.filter(r=>r.status==="running").length,c=e.length,i=s+o;return{total:c,success:s,error:o,running:a,successRate:i>0?Math.round(s/i*100):0}}function w(n){const t=new Map;for(const e of l)t.set(e.id,[]);for(const e of n){const s=t.get("spark")||[];s.push(e),t.set("spark",s)}return t}function y(n){const t=new Date().toDateString(),e=n.filter(r=>new Date(r.started_at).toDateString()===t),s=e.filter(r=>r.status==="completed").length,o=e.filter(r=>r.status==="failed").length,a=e.filter(r=>r.status==="running").length,c=e.length,i=s+o;return{todayTotal:c,todaySuccess:s,todayError:o,todayRunning:a,successRate:i>0?Math.round(s/i*100):0}}async function R(n="24h"){const t=await g(),e=(t==null?void 0:t.recent_runs)||[],s=e.filter(r=>r.status==="running"),o=e.filter(r=>r.status!=="running").slice(0,10),a=m(e,n),c=w(e),i=l.map(r=>{const u=c.get(r.id)||[],f=y(u);return{...r,stats:f,recentRuns:u.slice(0,5)}});return{totalRuns:(t==null?void 0:t.total_runs)||0,runningRuns:(t==null?void 0:t.running)||0,completedRuns:(t==null?void 0:t.completed)||0,failedRuns:(t==null?void 0:t.failed)||0,runningTasks:s,recentRuns:o,timeRange:n,periodStats:a,agents:i}}async function k(n,t="24h"){return(await R(t)).agents.find(s=>s.id===n)||null}async function v(){try{const n=await fetch(`${d}/api/cecelia/hierarchy`);if(!n.ok)return null;const t=await n.json();return t.success?{hierarchy:t.hierarchy||[],total_features:t.total_features||0,total_runs:t.total_runs||0}:null}catch{return null}}export{v as a,k as b,R as f};
