const s=[{id:"media",name:"新媒体部",icon:"Monitor",description:"负责社交媒体账号运营和内容发布",employees:[{id:"xiaoyun",name:"小运",icon:"Video",role:"内容运营专员",description:"负责各平台账号的登录管理和内容发布",abilities:[{id:"login",name:"账号登录",description:"管理平台账号登录状态",workflowKeywords:["登录","login","Login","VNC","vnc"]},{id:"publish",name:"内容发布",description:"执行内容发布任务",workflowKeywords:["发布","publish","Publish","post","Post"]}]},{id:"xiaoxi",name:"小析",icon:"BarChart3",role:"数据分析师",description:"负责数据采集和分析任务",abilities:[{id:"scrape",name:"数据采集",description:"从各平台采集数据",workflowKeywords:["爬取","scrape","Scrape","scraping","Scraping","采集"]},{id:"analytics",name:"数据分析",description:"分析数据并生成报告",workflowKeywords:["分析","analytics","Analytics","统计","stats","Stats"]}]}]},{id:"tech",name:"技术部",icon:"Code",description:"负责技术支持和系统维护",employees:[{id:"xiaowei",name:"小维",icon:"Wrench",role:"技术运维专员",description:"负责 AI 任务调度和系统维护",abilities:[{id:"claude",name:"AI 任务",description:"执行 Claude AI 相关任务",workflowKeywords:["claude","Claude","AI","ai","GPT","gpt"]},{id:"maintenance",name:"系统维护",description:"定时维护和清理任务",workflowKeywords:["maintenance","Maintenance","nightly","Nightly","维护","清理","cleanup","Cleanup"]}]}]},{id:"finance",name:"财务部",icon:"Wallet",description:"预留部门",employees:[]}];function c(e){for(const t of s)for(const o of t.employees)for(const i of o.abilities)if(i.workflowKeywords.some(a=>e.toLowerCase().includes(a.toLowerCase())))return{employee:o,ability:i};return null}function w(e){for(const t of s){const o=t.employees.find(i=>i.id===e);if(o)return o}return null}function k(e){for(const t of s)if(t.employees.some(o=>o.id===e))return t;return null}const d="";async function p(e){const t=await fetch(`${d}${e}`);if(!t.ok)throw new Error(`API error: ${t.status}`);return t.json()}async function f(e="local"){return p(`/api/v1/n8n-live-status/instances/${e}/overview`)}function u(e){const t=e.workflowName||"",o=c(t);return o?{id:e.id,workflowId:e.workflowId,workflowName:t,abilityId:o.ability.id,abilityName:o.ability.name,status:e.status==="crashed"?"error":e.status,startedAt:e.startedAt,stoppedAt:e.stoppedAt}:null}function m(){return{todayTotal:0,todaySuccess:0,todayError:0,todayRunning:0,successRate:0,recentTasks:[]}}function y(){return s.map(e=>({...e,employees:e.employees.map(t=>({...t,stats:m()})),todayTotal:0}))}async function h(){return y()}async function A(e){try{const t=await f("local"),o=[...t.runningExecutions.map(n=>({id:n.id,workflowId:n.workflowId,workflowName:n.workflowName,status:"running",startedAt:n.startedAt})),...t.recentCompleted],i=s.flatMap(n=>n.employees).find(n=>n.id===e);if(!i)return[];const a=[];for(const n of o){const r=u(n);r&&i.abilities.some(l=>l.id===r.abilityId)&&a.push(r)}return a}catch(t){return console.error("Failed to fetch employee tasks:",t),[]}}export{k as a,A as b,h as f,w as g};
