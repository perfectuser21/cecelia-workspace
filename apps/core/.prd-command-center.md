# PRD - Command Center 重构：层级导航架构

## 背景

当前 Core 前端有 10+ 个平行页面（Brain、OKR、Projects、Ops Center、Command Center 等），用户需要在左侧导航来回切换，缺乏整体视野。

## 目标

将 Command Center 重构为**唯一入口**，实现**层级下钻**的导航体验。

## 核心理念

**一个总览 + 层级钻取**，而不是平铺式导航。

## 信息架构

```
Command Center (Dashboard 总览)
│
├── VPS Status Card ──────→ /command/vps (VPS 详情)
│   └── 实时 Claude 进程数（pgrep）
│   └── 每个槽位的任务详情
│
├── OKR Summary Card ─────→ /command/okr (OKR 列表)
│   └── 当前 Focus 进度        └──→ /command/okr/:id (O 详情)
│   └── KR 完成率                   └──→ KR 列表 → Task 列表
│
├── Projects Summary Card ─→ /command/projects (Projects 列表)
│   └── 活跃项目数              └──→ /command/projects/:id (Project 详情)
│   └── 本周进度                     └──→ Features → Tasks
│
├── Tasks Summary Card ───→ /command/tasks (Tasks 列表)
│   └── 待执行/执行中/已完成      └──→ /command/tasks/:id (Task 详情)
│
└── Execution Status Card ─→ /command/execution (执行历史)
    └── 当前运行任务
    └── 今日执行次数
    └── cecelia-run 日志
```

## 页面设计

### 1. Command Center 总览 (`/command`)

**布局**：全屏 Dashboard，无需左侧导航

**卡片**：
- **VPS 状态**：8 个槽位可视化，真实进程数
- **OKR 进度**：当前 Focus，进度条，点击进入 OKR 页
- **Projects**：活跃项目数，本周新增，点击进入 Projects 页
- **Tasks**：待执行/执行中/已完成统计，点击进入 Tasks 页
- **当前执行**：cecelia-run 实时状态，日志预览

**交互**：
- 每个卡片可点击，进入对应的详情页
- 详情页顶部有面包屑导航，可返回

### 2. OKR 详情页 (`/command/okr`)

**内容**：
- Objective 列表（可折叠）
- 每个 O 下面显示 KR
- 每个 KR 下面显示关联 Tasks
- 进度条 + 状态标签

**钻取**：
- 点击 O → 展开 KR
- 点击 KR → 展开 Tasks
- 点击 Task → 跳转 Task 详情

### 3. Projects 详情页 (`/command/projects`)

**内容**：
- Project 卡片网格
- 每个 Project 显示：名称、描述、Task 数量、进度
- 筛选：All / Active / Completed

**钻取**：
- 点击 Project → Project 详情页
- Project 详情页显示 Features（子项目）和 Tasks

### 4. Tasks 详情页 (`/command/tasks`)

**内容**：
- Task 列表（支持筛选）
- 状态筛选：All / Queued / In Progress / Completed
- 优先级筛选：P0 / P1 / P2 / P3

**钻取**：
- 点击 Task → Task 详情（显示 PRD、执行日志等）

### 5. VPS 详情页 (`/command/vps`)

**内容**：
- 8 个槽位详细状态
- 每个槽位：进程 ID、运行时长、当前任务、内存占用
- 真实数据来源：后端 API 调用 `pgrep` + `ps`

### 6. Execution 详情页 (`/command/execution`)

**内容**：
- 执行历史列表
- 每条记录：Task ID、开始时间、耗时、状态、PR URL
- 点击查看详细日志

## 技术要求

### 后端 API 新增

1. **GET /api/brain/vps-slots** - 返回真实 Claude 进程信息
   ```json
   {
     "total": 8,
     "used": 2,
     "slots": [
       { "pid": 3860234, "task": null, "uptime": "1h23m", "memory": "1.2GB" },
       { "pid": 3874533, "task": null, "uptime": "1h18m", "memory": "1.0GB" }
     ]
   }
   ```

2. **GET /api/brain/execution-history** - 返回执行历史
   ```json
   [
     { "id": "xxx", "task_id": "yyy", "started_at": "...", "duration_ms": 12345, "status": "completed", "pr_url": "..." }
   ]
   ```

### 前端路由

```
/command              → CommandCenter (总览)
/command/vps          → VPSDetail
/command/okr          → OKRList
/command/okr/:id      → OKRDetail
/command/projects     → ProjectsList
/command/projects/:id → ProjectDetail
/command/tasks        → TasksList
/command/tasks/:id    → TaskDetail
/command/execution    → ExecutionHistory
```

### 导航变更

- 移除左侧平铺导航
- 改为顶部面包屑 + 卡片点击下钻
- 或保留精简版左侧导航（只显示 Command Center 一个入口）

## 成功标准

- [ ] Command Center 作为唯一入口，显示所有 Summary
- [ ] VPS 状态显示真实 Claude 进程数（不是数据库 task 数）
- [ ] 点击任何卡片可下钻到详情页
- [ ] 详情页有面包屑可返回
- [ ] OKR → KR → Task 层级可展开
- [ ] Projects → Features → Tasks 层级可展开

## 优先级

P0 - 这是 Cecelia 的核心控制界面
