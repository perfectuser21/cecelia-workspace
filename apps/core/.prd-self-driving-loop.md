# PRD: Complete Self-Driving Loop (Stage 4)

## 背景

Stage 1-3 已完成：
- Stage 1: Tick + cecelia-run 集成
- Stage 2: TRD 分解器
- Stage 3: Goal 对比 + 决策引擎

Stage 4 需要把这些组件连接起来，形成完整的自驾循环。

## 功能描述

### 完整自驾循环

```
Tick 触发
    ↓
compareGoalProgress() - 对比进度
    ↓
generateDecision() - 生成决策
    ↓
executeDecision() - 执行决策（调整优先级、标记阻塞等）
    ↓
选择下一个任务
    ↓
triggerCeceliaRun() - 执行任务
    ↓
等待下一个 Tick
```

### 修改 tick.js

1. 在 executeTick() 开始时调用 compareGoalProgress()
2. 如果有偏差，调用 generateDecision() 生成决策
3. 自动执行高置信度决策（confidence >= 0.8）
4. 继续现有的任务选择和执行逻辑

### 决策自动执行规则

| 置信度 | 行为 |
|--------|------|
| >= 0.8 | 自动执行 |
| 0.5-0.8 | 执行但记录警告 |
| < 0.5 | 只记录，不执行 |

## 成功标准

- [ ] Tick 时自动调用 compareGoalProgress
- [ ] 偏差时自动调用 generateDecision
- [ ] 高置信度决策自动执行
- [ ] 完整循环可观察（日志/API）
