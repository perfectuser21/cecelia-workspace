# PRD: Cecelia Voice + Orchestrator 队列管理集成

## 需求背景

现有 Cecelia Voice（语音前端）和 Orchestrator Page（队列管理 UI），需要通过后端 API 连接，让用户可以通过语音控制任务队列。

## 功能需求

### 1. Orchestrator 队列管理 API

创建以下 REST API 端点：

- `GET /api/orchestrator/queue` - 查看当前任务队列状态
- `POST /api/orchestrator/execute-now/:id` - 将任务插队，立即执行
- `POST /api/orchestrator/pause/:id` - 暂停正在执行的任务

### 2. Realtime Voice Tools 注册

在 Realtime Config 中注册 3 个工具函数：

- `get_queue` - 查看任务队列
- `execute_now` - 插队执行任务（模糊匹配任务名）
- `pause_task` - 暂停任务（模糊匹配任务名）

### 3. 工具执行逻辑

实现工具调用的后端逻辑，让语音指令可以操作队列。

## 技术方案

**新建文件**：
- `apps/core/backend/routes/orchestrator.ts` - 队列管理 API

**修改文件**：
- `apps/core/backend/routes/orchestrator-realtime.ts` - 添加 tools 定义和执行逻辑

**数据结构**：
- 使用内存队列暂存（后续可接数据库）
- runningTasks: Map<string, Task>
- taskQueue: Task[]

## 验收标准 (DoD)

- [ ] API `/api/orchestrator/queue` 返回正确的队列数据
- [ ] API `/api/orchestrator/execute-now/:id` 可以插队任务
- [ ] API `/api/orchestrator/pause/:id` 可以暂停任务
- [ ] Realtime Config 包含 3 个工具定义
- [ ] 语音可以调用 `get_queue` 查看队列
- [ ] 语音可以调用 `execute_now` 插队任务
- [ ] 语音可以调用 `pause_task` 暂停任务
- [ ] 工具执行返回友好的文本反馈

## 参考文档

详细设计见：`/tmp/voice-orchestrator-integration.md`
