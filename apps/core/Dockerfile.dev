FROM node:20-alpine

# Install git for dev-tracker service
RUN apk add --no-cache git && \
    git config --global --add safe.directory '*'

WORKDIR /app

# Install tsx globally for running TypeScript directly
RUN npm install -g tsx

# Dependencies will be mounted via volume
# Source code will be mounted via volume

ENV PORT=5212
EXPOSE 5212

# Run TypeScript source directly with tsx
CMD ["tsx", "watch", "src/dashboard/server.ts"]
