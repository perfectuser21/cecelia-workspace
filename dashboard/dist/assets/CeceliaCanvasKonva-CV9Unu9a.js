import{r as c,ae as T,j as n,ac as ue,ad as he,L as me,ay as fe,az as ge}from"./index-B6elV0yr.js";import{b as ye,c as ee,z as xe,P as we,d as re,g as be,s as ne,e as ve,f as Ne,u as ke,R as _e,B as Ce,C as $e}from"./style-DBecDMG6.js";import{s as je,i as Se,p as Me}from"./transform-CHVD-xw7.js";import{EChartsRenderer as Re}from"./EChartsRenderer-CoIJCxkF.js";import{M as Ee}from"./MermaidRenderer-CapVd5DK.js";import"./string-DhfnsSdB.js";import"./step-wNkEhWaM.js";const oe=({id:e,x:o,y:l,width:y,height:g,style:h,color:x,strokeColor:N,strokeWidth:b,className:$,borderRadius:j,shapeRendering:S,onClick:M,selected:m})=>{const{background:w,backgroundColor:k}=h||{},D=x||w||k;return T.createElement("rect",{className:re(["react-flow__minimap-node",{selected:m},$]),x:o,y:l,rx:j,ry:j,width:y,height:g,fill:D,stroke:N,strokeWidth:b,shapeRendering:S,onClick:M?C=>M(C,e):void 0})};oe.displayName="MiniMapNode";var Te=c.memo(oe);const De=e=>e.nodeOrigin,Be=e=>e.getNodes().filter(o=>!o.hidden&&o.width&&o.height),Q=e=>e instanceof Function?e:()=>e;function Oe({nodeStrokeColor:e="transparent",nodeColor:o="#e2e2e2",nodeClassName:l="",nodeBorderRadius:y=5,nodeStrokeWidth:g=2,nodeComponent:h=Te,onClick:x}){const N=ee(Be,ne),b=ee(De),$=Q(o),j=Q(e),S=Q(l),M=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return T.createElement(T.Fragment,null,N.map(m=>{const{x:w,y:k}=be(m,b).positionAbsolute;return T.createElement(h,{key:m.id,x:w,y:k,width:m.width,height:m.height,style:m.style,selected:m.selected,className:S(m),color:$(m),borderRadius:y,strokeColor:j(m),strokeWidth:g,shapeRendering:M,onClick:x,id:m.id})}))}var Ae=c.memo(Oe);const ze=200,Fe=150,Le=e=>{const o=e.getNodes(),l={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:l,boundingRect:o.length>0?ve(Ne(o,e.nodeOrigin),l):l,rfId:e.rfId}},He="react-flow__minimap-desc";function ae({style:e,className:o,nodeStrokeColor:l="transparent",nodeColor:y="#e2e2e2",nodeClassName:g="",nodeBorderRadius:h=5,nodeStrokeWidth:x=2,nodeComponent:N,maskColor:b="rgb(240, 240, 240, 0.6)",maskStrokeColor:$="none",maskStrokeWidth:j=1,position:S="bottom-right",onClick:M,onNodeClick:m,pannable:w=!1,zoomable:k=!1,ariaLabel:D="React Flow mini map",inversePan:C=!1,zoomStep:v=10,offsetScale:Z=5}){const z=ye(),F=c.useRef(null),{boundingRect:R,viewBB:B,rfId:U}=ee(Le,ne),J=(e==null?void 0:e.width)??ze,L=(e==null?void 0:e.height)??Fe,K=R.width/J,r=R.height/L,s=Math.max(K,r),i=s*J,t=s*L,a=Z*s,p=R.x-(i-R.width)/2-a,u=R.y-(t-R.height)/2-a,d=i+a*2,f=t+a*2,O=`${He}-${U}`,E=c.useRef(0);E.current=s,c.useEffect(()=>{if(F.current){const _=je(F.current),I=A=>{const{transform:P,d3Selection:Y,d3Zoom:W}=z.getState();if(A.sourceEvent.type!=="wheel"||!Y||!W)return;const X=-A.sourceEvent.deltaY*(A.sourceEvent.deltaMode===1?.05:A.sourceEvent.deltaMode?1:.002)*v,G=P[2]*Math.pow(2,X);W.scaleTo(Y,G)},V=A=>{const{transform:P,d3Selection:Y,d3Zoom:W,translateExtent:X,width:G,height:ce}=z.getState();if(A.sourceEvent.type!=="mousemove"||!Y||!W)return;const te=E.current*Math.max(1,P[2])*(C?-1:1),se={x:P[0]-A.sourceEvent.movementX*te,y:P[1]-A.sourceEvent.movementY*te},le=[[0,0],[G,ce]],de=Se.translate(se.x,se.y).scale(P[2]),pe=W.constrain()(de,le,X);W.transform(Y,pe)},ie=xe().on("zoom",w?V:null).on("zoom.wheel",k?I:null);return _.call(ie),()=>{_.on("zoom",null)}}},[w,k,C,v]);const H=M?_=>{const I=Me(_);M(_,{x:I[0],y:I[1]})}:void 0,q=m?(_,I)=>{const V=z.getState().nodeInternals.get(I);m(_,V)}:void 0;return T.createElement(we,{position:S,style:e,className:re(["react-flow__minimap",o]),"data-testid":"rf__minimap"},T.createElement("svg",{width:J,height:L,viewBox:`${p} ${u} ${d} ${f}`,role:"img","aria-labelledby":O,ref:F,onClick:H},D&&T.createElement("title",{id:O},D),T.createElement(Ae,{onClick:q,nodeColor:y,nodeStrokeColor:l,nodeBorderRadius:h,nodeClassName:g,nodeStrokeWidth:x,nodeComponent:N}),T.createElement("path",{className:"react-flow__minimap-mask",d:`M${p-a},${u-a}h${d+a*2}v${f+a*2}h${-d-a*2}z
        M${B.x},${B.y}h${B.width}v${B.height}h${-B.width}z`,fill:b,fillRule:"evenodd",stroke:$,strokeWidth:j,pointerEvents:"none"})))}ae.displayName="MiniMap";var Ie=c.memo(ae);const Pe=`‰Ω†ÊòØ Cecelia„ÄÇ‰∏ª‰∫∫ËØ¥‰ªÄ‰πàÁ´ãÂç≥ÊâßË°åÔºåÂõûÂ§ç"Â•ΩÁöÑ"Êàñ"ÂÆåÊàê"„ÄÇ

Êï∞ÊçÆÊ†ºÂºèÁ§∫‰æãÔºö
- È•ºÂõæ: render_chart({ type: "pie", data: { pieData: [{ name: "A", value: 100 }, { name: "B", value: 200 }] }, title: "Ê†áÈ¢ò" })
- Êü±Áä∂Âõæ: render_chart({ type: "bar", data: { labels: ["1Êúà","2Êúà"], values: [100,200] }, title: "Ê†áÈ¢ò" })
- ÊäòÁ∫øÂõæ: render_chart({ type: "line", data: { labels: ["Âë®‰∏Ä","Âë®‰∫å"], values: [150,230] }, title: "Ê†áÈ¢ò" })
- ÊâãÁªòÂõæÂΩ¢: canvas_draw_freehand({ shape: "tree", color: "#10b981" })

ÂèØÁî®Â∑•ÂÖ∑Ôºöcanvas_draw_shape, canvas_add_text, render_chart, render_mermaid, canvas_draw_freehand

‰∏ª‰∫∫Ôºö"Áîª‰∏™È•ºÂõæ" ‚Üí Áõ¥Êé•Áî®Á§∫‰æãÊ†ºÂºèË∞ÉÁî®ÔºåÂõûÂ§ç"Â•ΩÁöÑ"
‰∏ª‰∫∫Ôºö"ÁîªÊ£µÊ†ë" ‚Üí canvas_draw_freehand({ shape: "tree" })ÔºåÂõûÂ§ç"Â•ΩÁöÑ"`,We=[{type:"function",name:"canvas_draw_shape",description:"ÁîªÂü∫Á°ÄÂõæÂΩ¢ÔºàÂúÜÂΩ¢ÊàñÁü©ÂΩ¢Ôºâ",parameters:{type:"object",properties:{shape:{type:"string",enum:["circle","rectangle"],description:"ÂõæÂΩ¢Á±ªÂûã"},color:{type:"string",default:"#6366f1",description:"È¢úËâ≤ÔºàÂçÅÂÖ≠ËøõÂà∂Ôºâ"},text:{type:"string",description:"ÂõæÂΩ¢ÂÜÖÁöÑÊñáÂ≠óÔºàÂèØÈÄâÔºâ"}},required:["shape"]}},{type:"function",name:"canvas_add_text",description:"Âú®ÁîªÂ∏É‰∏äÊ∑ªÂä†ÊñáÊú¨",parameters:{type:"object",properties:{text:{type:"string",description:"Ë¶ÅÊòæÁ§∫ÁöÑÊñáÊú¨ÂÜÖÂÆπ"},size:{type:"string",enum:["s","m","l","xl"],default:"m",description:"Â≠ó‰ΩìÂ§ßÂ∞è"}},required:["text"]}},{type:"function",name:"render_chart",description:"ÁîªÂõæË°®ÔºàÈ•ºÂõæ/Êü±Áä∂Âõæ/ÊäòÁ∫øÂõæÔºâ„ÄÇÊï∞ÊçÆÊ†ºÂºèÔºöÈ•ºÂõæÁî®pieDataÊï∞ÁªÑÔºåÊü±Áä∂Âõæ/ÊäòÁ∫øÂõæÁî®labels+valuesÊï∞ÁªÑ",parameters:{type:"object",properties:{type:{type:"string",enum:["line","bar","pie"],description:"ÂõæË°®Á±ªÂûãÔºöline=ÊäòÁ∫øÂõæÔºåbar=Êü±Áä∂ÂõæÔºåpie=È•ºÂõæ"},data:{type:"object",description:'ÂõæË°®Êï∞ÊçÆ„ÄÇÈ•ºÂõæÊ†ºÂºèÔºö{ pieData: [{ name: "ÂàÜÁ±ªÂêç", value: Êï∞ÂÄº }] }„ÄÇÊü±Áä∂Âõæ/ÊäòÁ∫øÂõæÊ†ºÂºèÔºö{ labels: ["Ê†áÁ≠æ1","Ê†áÁ≠æ2"], values: [Êï∞ÂÄº1,Êï∞ÂÄº2] }'},title:{type:"string",description:"ÂõæË°®Ê†áÈ¢òÔºàÂèØÈÄâÔºâ"}},required:["type","data"]}},{type:"function",name:"render_mermaid",description:"ÁîªMermaidÊµÅÁ®ãÂõæ/ËÑëÂõæ",parameters:{type:"object",properties:{content:{type:"string",description:"MermaidËØ≠Ê≥ïÂÜÖÂÆπÔºå‰æãÂ¶Ç: graph TD; A-->B; B-->C;"}},required:["content"]}},{type:"function",name:"canvas_draw_freehand",description:"ÁªòÂà∂ÊâãÁªòÈ£éÊ†ºÁöÑÁÆÄÂçïÂõæÂΩ¢Ôºå‰æãÂ¶ÇÔºöÊ†ë„ÄÅËä±„ÄÅÂ§™Èò≥„ÄÅ‰∫ëÊúµ„ÄÅÊòüÊòü„ÄÅÁà±ÂøÉ„ÄÅÁ¨ëËÑ∏",parameters:{type:"object",properties:{shape:{type:"string",enum:["tree","flower","sun","cloud","star","heart","smiley"],description:"È¢ÑËÆæÁöÑÁÆÄÂçïÂõæÂΩ¢Á±ªÂûã"},description:{type:"string",description:"ÂõæÂΩ¢ÊèèËø∞ÔºàÂèØÈÄâÔºâ"},color:{type:"string",description:"È¢úËâ≤ÔºàÂçÅÂÖ≠ËøõÂà∂Ôºâ",default:"#10b981"}},required:["shape"]}}];function Je({data:e}){return e.shape==="circle"?n.jsx("div",{className:"w-32 h-32 rounded-full border-4 flex items-center justify-center nodrag",style:{borderColor:e.color,backgroundColor:`${e.color}20`},children:e.text&&n.jsx("span",{className:"text-sm font-medium",style:{color:e.color},children:e.text})}):n.jsx("div",{className:"w-48 h-32 rounded-lg border-4 flex items-center justify-center nodrag",style:{borderColor:e.color,backgroundColor:`${e.color}20`},children:e.text&&n.jsx("span",{className:"text-sm font-medium",style:{color:e.color},children:e.text})})}function Ke({data:e}){const o={s:"text-sm",m:"text-base",l:"text-2xl",xl:"text-4xl"};return n.jsx("div",{className:`${o[e.size]||"text-base"} font-medium nodrag`,style:{color:e.color},children:e.text})}function qe({data:e}){return n.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-lg p-4 border border-slate-600 nodrag",style:{minWidth:200,minHeight:200},children:[n.jsx("div",{dangerouslySetInnerHTML:{__html:e.svg}}),e.description&&n.jsx("p",{className:"text-xs text-slate-400 mt-2 text-center",children:e.description})]})}function Ye({data:e}){const{chartType:o,chartData:l,title:y}=e;let g={backgroundColor:"transparent",title:{text:y||"",left:"center",textStyle:{color:"#f1f5f9"}},tooltip:{},grid:{left:"10%",right:"10%",top:"20%",bottom:"10%"}};if(o==="pie"){let h;l.pieData&&Array.isArray(l.pieData)?h=l.pieData:Array.isArray(l.data)?h=l.data:l.labels&&l.values?h=l.labels.map((x,N)=>({name:x,value:l.values[N]||0})):h=[{name:"A",value:335},{name:"B",value:234},{name:"C",value:123}],g.tooltip={trigger:"item"},g.series=[{type:"pie",radius:"60%",data:h,label:{color:"#f1f5f9"}}]}else if(o==="line"||o==="bar"){const h=l.labels||l.categories||["1Êúà","2Êúà","3Êúà","4Êúà","5Êúà"],x=l.values||l.data||[120,200,150,80,70];g.tooltip={trigger:"axis"},g.xAxis={type:"category",data:h,axisLabel:{color:"#94a3b8"}},g.yAxis={type:"value",axisLabel:{color:"#94a3b8"}},g.series=[{type:o,data:x,itemStyle:{color:"#6366f1"}}]}return n.jsx("div",{className:"bg-slate-900/95 rounded-xl border border-slate-700 p-4 nodrag",style:{width:500,height:400},children:n.jsx(Re,{config:g})})}function Ze({data:e}){return n.jsx("div",{className:"bg-slate-900/95 rounded-xl border border-slate-700 p-4 nodrag",style:{width:500,height:400},children:n.jsx(Ee,{content:e.content})})}const Ue={shape:Je,text:Ke,chart:Ye,mermaid:Ze,drawing:qe};function rt(){const[e,o,l]=ke([]),[y,g]=c.useState(!1),[h,x]=c.useState(!1),[N,b]=c.useState(""),[$,j]=c.useState(""),[S,M]=c.useState(!1),m=c.useRef(null),w=c.useRef(null),k=c.useRef(null),D=c.useRef(null),C=c.useRef(0),v=c.useCallback(r=>{for(let p=0;p<20;p++)for(let u=0;u<3;u++){const d=50+u*700,f=50+p*550;if(!r.some(E=>{const H=E.position.x,q=E.position.y;return Math.abs(H-d)<600&&Math.abs(q-f)<500}))return{x:d,y:f}}return{x:50,y:50+r.length*550}},[]),Z=c.useCallback(r=>{const{shape:s,color:i="#6366f1",text:t}=r;if(!s)return{success:!1};const a=`shape-${Date.now()}`;return C.current++,o(p=>{const u=v(p),d={id:a,type:"shape",position:u,data:{shape:s,color:i,text:t}};return[...p,d]}),{success:!0,element_id:a}},[o,v]),z=c.useCallback(r=>{const{text:s,size:i="m"}=r;if(!s)return{success:!1};const t=`text-${Date.now()}`;return C.current++,o(a=>{const p=v(a),u={id:t,type:"text",position:p,data:{text:s,size:i,color:"#f1f5f9"}};return[...a,u]}),{success:!0,element_id:t}},[o,v]),F=c.useCallback(r=>{console.log("üìä renderChart called with args:",JSON.stringify(r,null,2));const{type:s,data:i,title:t}=r;if(!s||!i)return console.error("‚ùå renderChart failed: missing type or data",{type:s,data:i}),{success:!1,error:"Missing type or data"};const a=`chart-${Date.now()}`;return C.current++,console.log("‚úÖ Creating chart node:",{id:a,type:s,dataKeys:Object.keys(i),title:t}),o(p=>{const u=v(p),d={id:a,type:"chart",position:u,data:{chartType:s,chartData:i,title:t}};return console.log("üìç Chart position:",u,"Total nodes:",p.length+1),[...p,d]}),{success:!0,element_id:a}},[o,v]),R=c.useCallback(r=>{const{content:s}=r;if(!s)return{success:!1};const i=`mermaid-${Date.now()}`;return C.current++,o(t=>{const a=v(t),p={id:i,type:"mermaid",position:a,data:{content:s}};return[...t,p]}),{success:!0,element_id:i}},[o,v]),B=c.useCallback(r=>{const{shape:s,description:i,color:t="#10b981"}=r;if(!s)return{success:!1};const a={tree:`<svg viewBox="0 0 100 120" width="100" height="120">
        <rect x="40" y="80" width="20" height="40" fill="${t}" opacity="0.8"/>
        <circle cx="50" cy="60" r="35" fill="${t}"/>
        <circle cx="30" cy="50" r="25" fill="${t}" opacity="0.9"/>
        <circle cx="70" cy="50" r="25" fill="${t}" opacity="0.9"/>
      </svg>`,flower:`<svg viewBox="0 0 100 100" width="100" height="100">
        <circle cx="50" cy="50" r="8" fill="${t}"/>
        <circle cx="50" cy="30" r="12" fill="${t}" opacity="0.7"/>
        <circle cx="70" cy="50" r="12" fill="${t}" opacity="0.7"/>
        <circle cx="50" cy="70" r="12" fill="${t}" opacity="0.7"/>
        <circle cx="30" cy="50" r="12" fill="${t}" opacity="0.7"/>
        <circle cx="35" cy="35" r="10" fill="${t}" opacity="0.6"/>
        <circle cx="65" cy="35" r="10" fill="${t}" opacity="0.6"/>
        <circle cx="65" cy="65" r="10" fill="${t}" opacity="0.6"/>
        <circle cx="35" cy="65" r="10" fill="${t}" opacity="0.6"/>
      </svg>`,sun:`<svg viewBox="0 0 100 100" width="100" height="100">
        <circle cx="50" cy="50" r="20" fill="${t}"/>
        <line x1="50" y1="10" x2="50" y2="25" stroke="${t}" stroke-width="3"/>
        <line x1="50" y1="75" x2="50" y2="90" stroke="${t}" stroke-width="3"/>
        <line x1="10" y1="50" x2="25" y2="50" stroke="${t}" stroke-width="3"/>
        <line x1="75" y1="50" x2="90" y2="50" stroke="${t}" stroke-width="3"/>
        <line x1="20" y1="20" x2="30" y2="30" stroke="${t}" stroke-width="3"/>
        <line x1="70" y1="70" x2="80" y2="80" stroke="${t}" stroke-width="3"/>
        <line x1="80" y1="20" x2="70" y2="30" stroke="${t}" stroke-width="3"/>
        <line x1="30" y1="70" x2="20" y2="80" stroke="${t}" stroke-width="3"/>
      </svg>`,cloud:`<svg viewBox="0 0 120 60" width="120" height="60">
        <ellipse cx="30" cy="40" rx="25" ry="20" fill="${t}" opacity="0.8"/>
        <ellipse cx="60" cy="30" rx="30" ry="25" fill="${t}" opacity="0.9"/>
        <ellipse cx="90" cy="40" rx="25" ry="20" fill="${t}" opacity="0.8"/>
      </svg>`,star:`<svg viewBox="0 0 100 100" width="100" height="100">
        <polygon points="50,10 61,35 88,35 67,52 75,78 50,62 25,78 33,52 12,35 39,35" fill="${t}"/>
      </svg>`,heart:`<svg viewBox="0 0 100 100" width="100" height="100">
        <path d="M50,85 C50,85 20,60 20,40 C20,25 30,15 40,15 C45,15 50,20 50,20 C50,20 55,15 60,15 C70,15 80,25 80,40 C80,60 50,85 50,85 Z" fill="${t}"/>
      </svg>`,smiley:`<svg viewBox="0 0 100 100" width="100" height="100">
        <circle cx="50" cy="50" r="40" fill="${t}" opacity="0.8"/>
        <circle cx="35" cy="40" r="5" fill="#fff"/>
        <circle cx="65" cy="40" r="5" fill="#fff"/>
        <path d="M 30,60 Q 50,75 70,60" stroke="#fff" stroke-width="3" fill="none"/>
      </svg>`},p=a[s]||a.star,u=`drawing-${Date.now()}`;return C.current++,o(d=>{const f=v(d),O={id:u,type:"drawing",position:f,data:{svg:p,description:i}};return[...d,O]}),{success:!0,element_id:u}},[o,v]),U=c.useCallback(async(r,s,i)=>{console.log("Tool call:",r,s);let t;switch(r){case"canvas_draw_shape":t=Z(s);break;case"canvas_add_text":t=z(s);break;case"render_chart":t=F(s);break;case"render_mermaid":t=R(s);break;case"canvas_draw_freehand":t=B(s);break;default:t={error:`Unknown tool: ${r}`}}return w.current&&w.current.readyState==="open"&&(w.current.send(JSON.stringify({type:"conversation.item.create",item:{type:"function_call_output",call_id:i,output:JSON.stringify(t)}})),w.current.send(JSON.stringify({type:"response.create"}))),t},[Z,z,F,R,B]),J=c.useCallback(async()=>{var r;if(!(y||h)){x(!0),b("Ê≠£Âú®ËøûÊé•...");try{const s=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]});m.current=s;const i=document.createElement("audio");i.autoplay=!0,k.current=i,s.ontrack=d=>{i.srcObject=d.streams[0]};const t=await navigator.mediaDevices.getUserMedia({audio:!0});D.current=t,s.addTrack(t.getTracks()[0]);const a=s.createDataChannel("oai-events");w.current=a,a.onopen=()=>{x(!1),g(!0),b("Â∑≤ËøûÊé•"),a.send(JSON.stringify({type:"session.update",session:{instructions:Pe,tools:We,tool_choice:"auto",input_audio_transcription:{model:"whisper-1"}}}))},a.onmessage=d=>{var O;const f=JSON.parse(d.data);if(f.type==="error"&&(console.error("Realtime error:",f),b("ÈîôËØØ: "+(((O=f.error)==null?void 0:O.message)||""))),f.type==="input_audio_buffer.speech_started"&&(b("Ê≠£Âú®Âê¨..."),j("")),f.type==="conversation.item.input_audio_transcription.completed"&&b("‰Ω†: "+f.transcript),f.type==="response.output_audio_transcript.delta"&&j(E=>E+(f.delta||"")),f.type==="response.function_call_arguments.done"){const{call_id:E,name:H,arguments:q}=f;try{const _=JSON.parse(q);b(`ÊâßË°å: ${H}`),U(H,_,E)}catch(_){console.error("Parse error:",_)}}},await s.setLocalDescription(),await new Promise(d=>{s.iceGatheringState==="complete"?d():(s.onicegatheringstatechange=()=>{s.iceGatheringState==="complete"&&d()},setTimeout(d,3e3))});const u=await(await fetch("/api/cecelia/realtime-sdp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sdp:(r=s.localDescription)==null?void 0:r.sdp,model:"gpt-4o-realtime-preview-2024-12-17"})})).json();if(!u.success)throw new Error(`SDP failed: ${u.error}`);await s.setRemoteDescription({type:"answer",sdp:u.sdp})}catch(s){console.error("Failed:",s),b("Â§±Ë¥•: "+(s instanceof Error?s.message:String(s))),x(!1),L()}}},[y,h,U]),L=c.useCallback(()=>{var r,s,i;(r=w.current)==null||r.close(),w.current=null,(s=D.current)==null||s.getTracks().forEach(t=>t.stop()),D.current=null,(i=m.current)==null||i.close(),m.current=null,k.current&&(k.current.srcObject=null,k.current=null),g(!1),x(!1)},[]),K=c.useCallback(()=>{M(r=>!r)},[]);return c.useEffect(()=>{const r=s=>{if((s.key==="f"||s.key==="F")&&!s.ctrlKey&&!s.metaKey&&!s.altKey){const i=s.target;i.tagName!=="INPUT"&&i.tagName!=="TEXTAREA"&&(s.preventDefault(),K())}};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[K]),n.jsxs("div",{className:`flex flex-col bg-slate-950 transition-all duration-300 ${S?"fixed inset-0 z-50":"h-full"}`,children:[n.jsxs("div",{className:"flex-1 relative min-h-0",children:[n.jsxs(_e,{nodes:e,onNodesChange:l,nodeTypes:Ue,fitView:!1,minZoom:.1,maxZoom:4,defaultViewport:{x:0,y:0,zoom:1},children:[n.jsx(Ce,{color:"#334155",gap:20}),n.jsx($e,{}),n.jsx(Ie,{className:"!bg-slate-900/95 !border !border-slate-700",nodeColor:r=>r.type==="chart"?"#8b5cf6":r.type==="mermaid"?"#06b6d4":r.type==="drawing"?"#10b981":"#6366f1",maskColor:"rgba(15, 23, 42, 0.8)",style:{backgroundColor:"rgba(15, 23, 42, 0.95)",borderRadius:"0.5rem"}})]}),n.jsx("button",{onClick:K,className:"absolute top-4 right-4 z-50 w-10 h-10 rounded-lg bg-slate-900/95 border border-slate-700 flex items-center justify-center hover:bg-slate-800 transition-colors",title:S?"ÈÄÄÂá∫ÂÖ®Â±è":"ËøõÂÖ•ÂÖ®Â±è",children:S?n.jsx(ue,{className:"w-5 h-5 text-slate-400"}):n.jsx(he,{className:"w-5 h-5 text-slate-400"})})]}),n.jsxs("div",{className:"shrink-0 h-16 border-t border-slate-800 bg-gradient-to-r from-slate-950 via-slate-900 to-slate-950 flex items-center gap-3 px-4 shadow-lg",children:[e.length>0&&n.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-slate-800/50 rounded-lg border border-slate-700/50",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-violet-500 animate-pulse"}),n.jsxs("span",{className:"text-xs text-slate-400",children:[e.length," ÂÖÉÁ¥†"]})]}),n.jsx("div",{className:"flex-1"}),(N||$)&&n.jsxs("div",{className:"flex-1 max-w-md bg-slate-900/90 backdrop-blur-sm rounded-lg px-4 py-2 text-xs border border-slate-700/50 animate-in fade-in slide-in-from-bottom-2",children:[N&&n.jsxs("div",{className:"text-slate-300 mb-0.5",children:["üí¨ ",N]}),$&&n.jsxs("div",{className:"text-violet-400",children:["‚ú® ",$]})]}),n.jsxs("button",{onClick:y?L:J,disabled:h,className:`relative w-14 h-14 rounded-full flex items-center justify-center transition-all ${y?"bg-red-600 hover:bg-red-700 shadow-lg shadow-red-600/50 scale-110":h?"bg-slate-700 cursor-wait":"bg-violet-600 hover:bg-violet-700 hover:scale-105 active:scale-95 shadow-lg shadow-violet-600/30"}`,title:y?"ÂÅúÊ≠¢ÂΩïÈü≥":"ÂºÄÂßãËØ≠Èü≥ËæìÂÖ•",children:[y&&n.jsx("span",{className:"absolute inset-0 rounded-full bg-red-600 animate-ping opacity-75"}),h?n.jsx(me,{className:"w-6 h-6 text-white animate-spin"}):y?n.jsx(fe,{className:"w-6 h-6 text-white relative z-10"}):n.jsx(ge,{className:"w-6 h-6 text-white"})]})]})]})}export{rt as default};
