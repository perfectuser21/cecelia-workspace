---
id: meta-schema-workspace
version: 1.0.0
created: 2026-02-24
updated: 2026-02-24
changelog:
  - 1.0.0: 初始版本
---
# PRD: Meta-Schema 动态属性 + DatabaseView Work 页面集成

## 功能描述

### 1. 后端 API（task-system）
- goals/projects/tasks PATCH 支持 custom_props JSONB 合并更新
- 新增 GET /api/tasks/db-schema/:stateKey
- 新增 POST /api/tasks/db-schema/:stateKey
- 新增 PATCH /api/tasks/db-schema/:stateKey/:colId
- 新增 DELETE /api/tasks/db-schema/:stateKey/:colId

### 2. Work 页面 DatabaseView 集成
- WorkTabbed.tsx: Tab 顺序 OKR > Area > Projects > Tasks > Roadmap > Streams
- OKRDashboard.tsx: DatabaseView 表格模式
- ProjectsDashboard.tsx: DatabaseView 表格模式
- AreaDashboard.tsx: 新页面，DatabaseView 展示 area_okr

### 3. DatabaseView 前端 Meta-Schema 支持
- 加载 /api/tasks/db-schema/:stateKey 获取自定义字段
- Properties 面板加"+ 添加属性"按钮
- 添加属性弹窗：label + type 选择

## 成功标准
- OKR/Area/Projects 页面显示 DatabaseView 表格
- 自定义属性可添加并持久化
- TypeScript 无错误，npm run build 通过
