---
id: prd-kr1-dev-session
version: 1.0.0
created: 2026-01-30
---

## PRD - KR1: Headless /dev Session with Memory Summary

**需求来源**: KR1 Implementation Plan - 让 Cecelia 无头模式跑一次完整 /dev，自动记录到 Memory，生成结构化 Summary

**功能描述**:
- 创建 Dev Session 管理模块追踪无头 /dev 执行
- Session ID 格式: dev_YYYYMMDD_HHMMSS_xxxxxx
- 自动通过 Quality Gate（assertions=0 failures + gates pass）
- 生成结构化 Memory Summary 到 episodic memory

**涉及文件**:
- apps/core/src/system/dev-session.ts（新建）- Session 类型和函数
- apps/core/src/system/routes.ts（修改）- 添加 dev-session endpoints
- apps/core/src/system/assertions.ts（修改）- 添加 validateQualityGate
- apps/core/src/panorama/routes.ts（修改）- 添加 dev_sessions 到 panorama
- ~/.claude/skills/dev/scripts/track.sh（修改）- Session ID + artifact tracking
- scripts/verify-dev-session.sh（新建）- KR1 验证脚本

**成功标准**:
- [ ] 能生成一个 Dev Session（/dev task）
- [ ] 能自动通过 Quality Gate（assertions=0 + gates pass）
- [ ] 能自动形成一个 Memory Summary
- [ ] scripts/verify-dev-session.sh 输出 KR1 PASS
