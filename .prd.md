---
id: fix-auth-loading
version: 1.0.0
created: 2026-01-29
updated: 2026-01-29
changelog:
  - 1.0.0: 初始版本
---

# PRD: 修复认证加载时序问题

## 问题

点击 Brain 等页面会跳转到登录页，即使已经登录。

## 原因

AuthContext 从 cookie 读取用户信息是异步的，但 App.tsx 在初始化时直接检查 `isAuthenticated`，导致在 cookie 读取完成前就跳转到登录页。

## 解决方案

1. AuthContext 添加 `authLoading` 状态
2. App.tsx 在 `authLoading` 时显示加载状态，等待认证初始化完成

## 范围

- `apps/dashboard/frontend/src/contexts/AuthContext.tsx`
- `apps/dashboard/frontend/src/App.tsx`
