---
id: prd-core-frontend-restructure
version: 1.0.0
created: 2026-01-31
updated: 2026-01-31
changelog:
  - 1.0.0: 初始版本
---

## PRD - Core 前端重构：5 域 → 6 条线 + PARA 对齐

**需求来源**: 用户手动提交的重构计划，将 Core 前端从按功能类型分的 5 个域重构为按用户使用场景的 6 条线

**功能描述**:
1. Phase 1: 删除 14 个死代码/占位/重复文件（~1,800 LOC）
2. Phase 2: 合并 5 组重叠页面（PlanningDashboard+PlannerOverview、ProjectsPage→ProjectsDashboard、TaskMonitor→DevTasks、AIDetail→CeceliaOverview、CommandCenter 精简）
3. Phase 3: 将 5 域目录（planning/execution/business/system/knowledge）重组为 6 线目录（dashboard/daily/gtd/content/aidev/brain）
4. Phase 4: 修改 Manifest 注册，6 个域各自定义 navGroup
5. Phase 5: 修复 InstanceContext.tsx 的 localhost 检测，增加 port === '5212' 判断
6. Phase 6: 统一 API Client 到 shared/api/client.ts
7. Phase 7: 后端创建 areas 表 + API 端点，给 projects 表加 area_id 字段

**涉及文件**:
- 删除: 18 个页面文件（Phase 1+2）
- 创建: 6 个新域目录 + index.ts manifest
- 创建: shared/api/client.ts、shared/components/PlaceholderPage.tsx
- 创建: content/pages/ContentStudio.tsx、brain/pages/SuperBrain.tsx
- 修改: apps/core/features/index.ts（域注册）
- 修改: apps/dashboard/frontend/src/contexts/InstanceContext.tsx（localhost 检测）
- 创建: 后端 areas 路由 + 数据库迁移

**成功标准**:
1. `npm run build` 通过，无 TypeScript 错误
2. localhost:5212 能看到 6 条线导航（Dashboard/Daily/GTD/Content/AI Dev/Super Brain）
3. 每条线的页面可正常访问和渲染数据
4. `GET /api/areas` 返回 9 个 Area
5. Dashboard 显示 Area 卡片
6. 无 console error
7. 所有旧路由 redirect 正确

**非目标**:
- 不改变现有页面的业务逻辑和 UI
- 不重写已有组件的内部实现
- Content Studio 和 Super Brain 只是空壳入口页，不实现完整功能
- 不涉及 Autopilot 实例的任何改动
- 不迁移 Notion 数据到 areas 表
