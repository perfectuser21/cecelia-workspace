# PRD: OKR 页面重构 - 季度总览 + 三层架构

## 1. 概述

**目标**：重构 OKR 页面，实现季度总览 + Area/Project/SubProject 三层架构。

**核心需求**：
- 首页显示季度总览和 Areas 卡片
- Area 详情页显示三层 OKR 树形结构
- 无 emoji，简洁专业设计
- 支持季度切换和延迟状态追踪

---

## 2. 层级定义

### OKR 三层架构

```
Area (领域)
└── Project (项目)
      └── SubProject (子项目)
```

**示例**：
```
Study Area
└── Q1 学习计划 [60%] (Area OKR)
    └── AI Coding Project
        ├── 实现自动化 [70%] (Project OKR)
        │   └── Backend Team
        │       └─ 完成 API [80%] (SubProject OKR)
        └── 掌握 MCP [50%] (Project OKR)
```

---

## 3. 首页设计（OKRDashboard）

```
┌─────────────────────────────────────────────────────┐
│ 2026 Q1 OKR Dashboard          [◀ Q4 | Q2 ▶]        │
├─────────────────────────────────────────────────────┤
│ 整体统计                                             │
│  总 OKRs: 15 | 平均进度: 35% | 延迟: 2 天           │
├─────────────────────────────────────────────────────┤
│ Areas                                               │
│  ┌─────────────┬─────────────┬─────────────┐       │
│  │ Study       │ Stock       │ ZenithJoy   │       │
│  │ 5 OKRs      │ 4 OKRs      │ 6 OKRs      │       │
│  │ 60%         │ 45%         │ 25%         │       │
│  └─────────────┴─────────────┴─────────────┘       │
└─────────────────────────────────────────────────────┘
```

**功能**：
- 季度选择器
- 整体统计卡片
- Areas 卡片（只显示 Area 层级 OKR）

---

## 4. Area 详情页设计（AreaDetail）

```
┌─────────────────────────────────────────────────────┐
│ Study Area - 2026 Q1              [← 返回]          │
├─────────────────────────────────────────────────────┤
│ Q1 学习计划 [60%] P0              (Area OKR)       │
│  预期: 2026-01-01 ~ 2026-03-31 | 按时               │
│                                                     │
│  ├─ AI Coding Project                [展开 ▼]      │
│  │   ├─ 实现自动化 [70%] P0        (Project OKR)   │
│  │   │   └─ Backend Team             [展开 ▼]      │
│  │   │       └─ 完成 API [80%] P1   (SubProject OKR)│
│  │   └─ 掌握 MCP [50%] P0          (Project OKR)   │
└─────────────────────────────────────────────────────┘
```

**功能**：
- 树形 OKR 展示
- 可展开/折叠
- 时间追踪

---

## 5. 技术实现

### 新建文件
- apps/core/features/planning/pages/OKRDashboard.tsx
- apps/core/features/planning/pages/AreaDetail.tsx

### 修改文件
- apps/core/features/work/pages/WorkTabbed.tsx（路由）

### 核心功能
- 季度计算：从 expected_start_date 自动计算
- 延迟计算：actual_end_date - expected_end_date
- 进度汇总：所有子 OKR 的平均进度

---

## 6. 验收标准

- [ ] 首页显示季度总览和 Areas 卡片
- [ ] 可切换季度
- [ ] Area 详情页显示树形 OKR
- [ ] 可展开/折叠 Project/SubProject
- [ ] 显示时间追踪和延迟状态
- [ ] 无 emoji
- [ ] npm run build 通过
