# PRD: 移除 dev-core 和 core 实例区分概念

## 背景

当前代码中存在 dev-core 和 core 两个实例的概念区分：
- 通过端口（5212/5211）检测实例
- 通过 hostname 中是否包含 "core" 检测实例
- 基于实例切换配色、功能等

但实际部署架构已经简化，不再需要这种区分。这些代码增加了不必要的复杂度。

## 目标

移除所有实例检测和配置区分逻辑，统一为单一配置。

## 改动范围

### 1. 移除 InstanceContext

**文件**: `apps/core/features/shared/contexts/InstanceContext.tsx`

- 移除 `isCoreInstance()` 函数
- 移除基于 port 和 hostname 的实例检测
- 移除 InstanceProvider 和 useInstance hook
- 或者简化为始终返回统一配置

### 2. 移除实例相关的条件渲染

查找并移除所有使用实例检测的地方：
- `useInstance()` 的调用
- 基于 `isCoreInstance` 的条件逻辑
- 基于实例的配色切换
- 基于实例的功能开关

### 3. 统一配置

- 移除基于实例的配置分支
- 统一为单一配置（可能保留原 Core 配置作为默认）

### 4. 更新文档

**MEMORY.md**: 移除 dev-core/core 实例区分的描述

## 非功能需求

### 向后兼容

- 保持所有现有功能正常工作
- 不影响用户体验
- 只是去掉不必要的复杂度

### 代码质量

- 移除死代码
- 简化逻辑
- 减少维护成本

## 成功标准

1. ✅ npm run build 通过
2. ✅ 前端正常运行，无实例相关错误
3. ✅ 不再有基于实例的条件渲染
4. ✅ 代码中无 `isCoreInstance` 引用（除了可能保留的注释）
5. ✅ InstanceContext 简化或移除

## 实现文件

- `apps/core/features/shared/contexts/InstanceContext.tsx` (主要改动)
- 其他使用 `useInstance` 的组件（需查找）
- `~/.claude/projects/-home-xx-perfect21-cecelia-workspace/memory/MEMORY.md`

## 风险评估

- **低风险**：移除未使用的功能，不影响核心逻辑
- **缓解措施**：先查找所有引用，确保没有遗漏的条件分支
