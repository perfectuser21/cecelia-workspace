# PRD: TaskDatabase 分页优化

## 问题背景

当前 TaskDatabase 一次性渲染 769 个任务，导致：
1. **页面卡顿**：DOM 节点过多，滚动/拖拽/hover 性能差
2. **布局拥挤**：外层 padding 过大，内容区域被压缩

## 目标

1. 加入分页功能，减少同时渲染的 DOM 数量
2. 优化布局，增大内容区域

## 技术方案

### 1. 分页功能

**状态管理**：
```typescript
const [currentPage, setCurrentPage] = useState(1);
const [pageSize, setPageSize] = useState(50);
```

**分页逻辑**：
```typescript
const paginatedTasks = useMemo(() => {
  const start = (currentPage - 1) * pageSize;
  const end = start + pageSize;
  return sortedTasks.slice(start, end);
}, [sortedTasks, currentPage, pageSize]);
```

**分页组件**（Table/Board 视图底部）：
```tsx
<div className="flex items-center justify-between px-4 py-3 border-t">
  <div>
    显示 {start}-{end} / 共 {total} 个任务
  </div>
  <div className="flex items-center gap-2">
    <button onClick={() => setCurrentPage(p => Math.max(1, p - 1))}>上一页</button>
    <span>第 {currentPage} / {totalPages} 页</span>
    <button onClick={() => setCurrentPage(p => Math.min(totalPages, p + 1))}>下一页</button>
    <select value={pageSize} onChange={e => setPageSize(Number(e.target.value))}>
      <option value={20}>20/页</option>
      <option value={50}>50/页</option>
      <option value={100}>100/页</option>
    </select>
  </div>
</div>
```

### 2. 布局优化

**问题**：外层容器有过多 padding/margin

**修改**：
- 减少顶层容器的 padding（`p-6` → `p-3` 或 `p-2`）
- Table/Board 视图占满可用空间
- 标题栏紧凑布局

## 验收标准

1. ✅ Table 视图只显示当前页的任务（默认 50 个）
2. ✅ Board 视图只显示当前页的任务
3. ✅ 底部分页栏：上一页/下一页/页码/每页数量选择
4. ✅ 切换页码时，滚动位置回到顶部
5. ✅ localStorage 持久化 pageSize 设置
6. ✅ 分组模式下，分页应用到分组后的结果
7. ✅ 搜索/筛选后，分页重置到第 1 页
8. ✅ 外层 padding 减少，内容区域增大

## 影响范围

- 仅修改前端 TaskDatabase 组件
- 不修改 API
- 不影响其他页面

## 性能预期

- 渲染 DOM 数量：769 → 50（减少 93%）
- 滚动/拖拽流畅度：显著提升
