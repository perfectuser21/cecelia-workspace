---
id: cp-seats-api-steps-align
version: 1.0.0
created: 2026-01-31
updated: 2026-01-31
changelog:
  - 1.0.0: 初始版本
---

## PRD - Cecelia Seats API + 11步工作流步骤对齐

**需求来源**: Brain 自动调度 - 端到端验证 /dev 流程。现有代码已有未提交的改动，需要走完整 /dev 流程验证并合并。

**功能描述**:
1. 新增 `GET /api/cecelia/seats` 端点，返回当前并发执行槽位状态（slot 编号、模式、task_id、标题、持续时间），供前端 Dashboard 展示 Cecelia 运行状态
2. 更新 `DEV_WORKFLOW_STEPS` 常量，从旧的 9 步对齐到新的 11 步（PRD → Detect → Branch → DoD → Code → Test → Quality → PR → CI → Learning → Cleanup），与 /dev v3.0 保持一致

**涉及文件**:
- `apps/core/src/dashboard/routes.ts` - 新增 seats 端点
- `apps/core/src/shared/types.ts` - 更新步骤常量

**成功标准**:
- [ ] `GET /api/cecelia/seats` 返回 JSON 包含 `total`、`active`、`slots` 字段
- [ ] `DEV_WORKFLOW_STEPS` 包含 11 个步骤，ID 1-11，名称与 /dev v3.0 一致
- [ ] TypeScript 编译通过（`npx tsc --noEmit` 无报错）
- [ ] 现有测试不被破坏

**非目标**:
- 不修改前端 UI 显示
- 不新增测试用例（现有变更为数据常量和简单 API，由 CI 编译检查覆盖）
