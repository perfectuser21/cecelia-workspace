---
id: prd-intent-parse-endpoint
version: 1.1.0
created: 2026-01-31
updated: 2026-01-31
changelog:
  - 1.1.0: 更新 PRD 覆盖 Milestone 1 全部三个需求
  - 1.0.0: 初始版本
---

## PRD - Milestone 1: 意图识别系统 (KR1)

**需求来源**: Milestone 1: 意图识别系统，实现自然语言到结构化意图的完整链路。

**功能描述**:
1. 实现 `/api/brain/intent/parse` 端点，接收自然语言输入，返回结构化意图（goal/project/task）
2. 添加意图分类器，区分创建目标、创建项目、创建任务、查询状态等意图类型
3. 实现意图到 Action 的映射，通过 `intent/execute` 端点自动调用对应 brain action（handleAction 白名单校验、幂等性、决策日志）

**涉及文件**:
- `apps/core/src/brain/intent.js` — 意图解析核心逻辑（classifyIntent, extractEntities, parseIntent）
- `apps/core/src/brain/routes.js` — API 端点 (intent/parse, intent/execute, intent/types) + executeQueryStatus handler
- `apps/core/src/brain/__tests__/intent.test.js` — 测试

**成功标准**:
- [x] `/api/brain/intent/parse` 接收 `{ input: string }` 返回 `{ intentType, confidence, entities, tasks }`
- [x] 意图分类器区分 create_goal, create_project, create_task, query_status 等 9 种意图
- [x] `intent/execute` 通过 handleAction 执行 action 意图，queryStatus handler 返回状态数据
- [x] 置信度阈值防止低置信度自动执行
- [x] 99 个测试全部通过

**非目标**:
- 不涉及 LLM 增强分类（当前为规则引擎）
- 不涉及前端 UI
