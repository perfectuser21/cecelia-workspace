# PRD: 修复 Goals API workspaces JOIN 错误

## 问题描述

当前 goals API 的 GET / 路由尝试 LEFT JOIN workspaces 表，但数据库中不存在该表，导致所有 OKR 查询失败，前端显示 "no OKR yet"。

## 错误信息

```
{
  "error": "Failed to list goals",
  "details": "relation \"workspaces\" does not exist"
}
```

## 根本原因

- `apps/core/src/task-system/goals.js` 第 19 行：`LEFT JOIN workspaces w ON g.area_id = w.id`
- 数据库中没有 workspaces 表（通过 `\dt` 确认）
- 虽然 goals 表有 area_id 字段，但没有对应的 workspaces 表

## 解决方案

### 修改文件
`apps/core/src/task-system/goals.js`

### 具体变更

1. **移除 workspaces JOIN**
   - 删除第 19 行：`LEFT JOIN workspaces w ON g.area_id = w.id`
   - 删除查询中的 `w.name as area_name`

2. **移除 area 对象返回**
   - 删除 area 对象的构建（第 67-70 行）
   - 删除 area_name 字段清理（第 76 行）
   - 保留 area_id 字段（数据库中存在）

### 影响范围

- 前端可以正常获取 goals 数据
- area_id 字段保留，但不返回 area 嵌套对象
- 如果未来需要 area 信息，需要先创建 workspaces 表

## 验收标准

1. `curl http://localhost:5211/api/tasks/goals` 返回成功（不报错）
2. 前端 OKR Hierarchy 页面显示数据（不再显示 "no OKR yet"）
3. 返回的 goal 对象包含 business、department 嵌套对象，但不包含 area
4. npm run build 通过
5. API 测试：创建、更新 goal 仍然正常工作
