---
id: prd-kr3-live-dashboard
version: 1.0.0
created: 2026-01-30
---

## PRD - KR3: Live Dashboard

**目标**: Core 前端实时显示执行状态，让系统"能看见它在呼吸"

### 聚合端点 `/api/system/live`

返回以下数据（一个调用拿到全部）：

```typescript
{
  health: { workspace, brain, quality, n8n },
  tasks: Task[],           // 最近 20 个任务
  dev_sessions: DevSession[], // 最近 10 个 dev sessions
  governance: {
    dlq_count: number,
    degrade_status: string,
    assertions: { passed: number, failed: number }
  },
  plan: {
    last_plan_id: string,
    next_run_time: string,
    committed_count: number
  }
}
```

### 前端页面 `/ops/live`

**布局**:
1. 顶部 4 卡片：System Health / Running Tasks / DLQ & Degrade / Assertions
2. 两列列表：Recent Tasks (20) / Dev Sessions (10)
3. 右上角：Last Updated 时间戳
4. 自动刷新：3 秒 polling

**涉及文件**:
- apps/core/src/system/routes.ts - 添加 /api/system/live 端点
- apps/core/features/ops/index.ts - 添加 /ops/live 路由
- apps/core/features/ops/pages/LiveDashboard.tsx - 新建页面

**成功标准**:
- [ ] 打开页面能看到实时更新的 tasks 状态变化
- [ ] DLQ/degrade/assertions 有变化时 UI 即时反映
- [ ] Dev sessions 列表可展开查看 summary
