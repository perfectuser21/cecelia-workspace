# DoD - KR1: 意图识别 - 自然语言→OKR/Project/Task

QA: docs/QA-DECISION.md

## 验收标准

### 功能验收

#### 1. 意图分类功能
- [ ] 能够识别创建任务的意图（例如:"帮我做个登录功能"、"写一个 API 接口"）
      Test: apps/core/src/brain/__tests__/intent.test.js
- [ ] 能够识别创建目标的意图（例如:"我想完成用户认证系统"、"目标是提升性能"）
      Test: apps/core/src/brain/__tests__/intent.test.js
- [ ] 能够识别创建项目的意图（例如:"开始一个新的电商项目"、"创建博客系统项目"）
      Test: apps/core/src/brain/__tests__/intent.test.js
- [ ] 分类准确率：在测试集上达到 80% 以上
      Test: apps/core/src/brain/__tests__/intent.test.js

#### 2. 实体提取功能
- [ ] 能够提取标题：从自然语言中提取任务/目标/项目的核心标题
      Test: apps/core/src/brain/__tests__/intent.test.js
- [ ] 能够提取描述：提取详细描述信息
      Test: apps/core/src/brain/__tests__/intent.test.js
- [ ] 能够提取优先级：识别 P0/P1/P2 优先级关键词
      Test: apps/core/src/brain/__tests__/intent.test.js
- [ ] 能够提取时间范围：识别"今天"、"本周"、"紧急"等时间相关信息
      Test: apps/core/src/brain/__tests__/intent.test.js
- [ ] 实体提取覆盖率：至少 70% 的输入能成功提取标题
      Test: apps/core/src/brain/__tests__/intent.test.js

#### 3. API 端点实现
- [ ] POST /api/intent/parse 端点正常响应
      Test: apps/core/src/routes/api/__tests__/intent.test.ts
- [ ] 返回格式包含：{ type: 'task'|'goal'|'project', entities: {...}, confidence: 0-1 }
      Test: apps/core/src/routes/api/__tests__/intent.test.ts
- [ ] 错误情况返回合理的错误信息和状态码
      Test: apps/core/src/routes/api/__tests__/intent.test.ts
- [ ] API 响应时间 < 500ms (p95)
      Test: apps/core/src/routes/api/__tests__/intent.test.ts

### 测试验收

- [ ] apps/core/src/brain/intent.js 单元测试通过率 > 90%
      Test: npm test -- apps/core/src/brain/__tests__/intent.test.js
- [ ] apps/core/src/routes/api/intent.ts 集成测试覆盖主要场景
      Test: npm test -- apps/core/src/routes/api/__tests__/intent.test.ts
- [ ] 至少包含 10 个真实场景的测试用例
      Test: manual:检查测试文件包含至少 10 个 test case
- [ ] npm run qa 通过
      Test: npm run qa

### 文档验收

- [ ] 在 docs/ 目录创建 INTENT-RECOGNITION.md 文档
      Test: manual:检查 docs/INTENT-RECOGNITION.md 存在
- [ ] 文档包含：功能说明、API 使用示例、支持的短语模式、扩展方法
      Test: manual:检查文档完整性
- [ ] 代码中关键函数有清晰的 JSDoc 注释
      Test: manual:检查 intent.js 和 API 路由代码注释
