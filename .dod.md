# DoD: 移除 dev-core 和 core 实例区分概念

## 改动清单

### 1. 查找所有实例检测引用
- [ ] 查找 `isCoreInstance` 的所有引用
- [ ] 查找 `useInstance` 的所有调用
- [ ] 查找 `InstanceContext` 的所有导入
- **Test**: grep 确认没有遗漏的引用

### 2. 简化 InstanceContext
- [ ] 移除 `isCoreInstance()` 函数中的端口和 hostname 检测
- [ ] 简化为始终返回统一配置（或直接移除整个 context）
- [ ] 如果保留 context，则始终返回固定值
- **Test**: InstanceContext.tsx 代码简化，无条件分支

### 3. 移除组件中的实例条件逻辑
- [ ] 移除所有 `if (isCoreInstance)` 的条件分支
- [ ] 统一配色和功能配置
- [ ] 移除基于实例的 CSS 类名切换
- **Test**: 组件代码中无实例检测逻辑

### 4. 更新文档
- [ ] MEMORY.md: 移除 dev-core/core 端口区分描述
- [ ] MEMORY.md: 更新为统一实例说明
- **Test**: 文档中无 dev-core 和 core 区分描述

## 验收标准

### 构建
- [ ] `npm run build` 通过（无 TypeScript/ESLint 错误）

### 功能测试
- [ ] 前端正常启动，无 console 错误
- [ ] 所有页面正常渲染
- [ ] 配色统一，无实例相关的样式差异

### 代码检查
- [ ] `grep -r "isCoreInstance" apps/` 无结果（或只在注释中）
- [ ] `grep -r "useInstance" apps/` 无结果（或只在 context 定义处）
- [ ] 无基于 port 5212/5211 的条件逻辑
- [ ] 无基于 hostname 的条件逻辑

## RCI (Regression Critical Items)

1. **配置统一**
   - RCI: 所有功能使用统一配置，无遗漏的条件分支
   - Test: 验证主要功能页面正常显示

2. **无运行时错误**
   - RCI: 移除 context 后无 undefined 错误
   - Test: 浏览器 console 无错误

## 文件影响范围

- `apps/core/features/shared/contexts/InstanceContext.tsx` (主要改动)
- 其他使用 `useInstance` 的组件（待查找）
- `~/.claude/projects/-home-xx-perfect21-cecelia-workspace/memory/MEMORY.md`

## 风险评估

- **低风险**：移除未使用的功能
- **缓解措施**：先查找所有引用，逐一移除
