---
id: dod-kr2-prd-trd-standardization
version: 1.0.0
created: 2026-01-31
updated: 2026-01-31
changelog:
  - 1.0.0: 初始版本
---

# DoD - PRD/TRD 自动生成标准化

QA: docs/QA-DECISION.md

## 验收标准

### 功能验收 - validateTrd
- [x] validateTrd(content) 返回 { valid, score, missing_fields }
      Test: apps/core/src/brain/__tests__/templates.test.js
- [x] 检查 TRD 必要章节（技术背景、架构设计、API 设计、数据模型、测试策略、实施计划）
      Test: apps/core/src/brain/__tests__/templates.test.js
- [x] 空内容返回 { valid: false, score: 0 }
      Test: apps/core/src/brain/__tests__/templates.test.js
- [x] 完整 TRD 返回 { valid: true, score >= 80 }
      Test: apps/core/src/brain/__tests__/templates.test.js

### 功能验收 - API 端点
- [x] POST /api/brain/validate/trd 返回 200 + JSON
      Test: manual:curl

### 功能验收 - 生成集成
- [x] generateTaskPRD() 生成后调用 validatePrd()
      Test: apps/core/src/brain/__tests__/templates.test.js
- [x] score < 60 时输出 console.warn
      Test: apps/core/src/brain/__tests__/templates.test.js

### 回归验收
- [x] 现有测试全部通过
      Test: manual:vitest run
