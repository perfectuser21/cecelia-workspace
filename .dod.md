---
version: 3.0.0
updated: 2026-01-29
changelog:
  - 3.0.0: PRD 03 - 优先级引擎（今日焦点选择）
  - 2.0.0: PRD 02 - OKR Tree CRUD API
  - 1.0.1: 添加 migrateGoalsTable 迁移函数验收项
  - 1.0.0: 初始版本
---

# DoD - 优先级引擎

QA: docs/QA-DECISION.md

## 验收标准

### 功能验收

- [ ] GET /api/brain/focus 返回今日焦点（含 objective、key_results、suggested_tasks、reason）
      Test: apps/core/src/brain/__tests__/focus.test.js
- [ ] POST /api/brain/focus/set 手动设置今日焦点（覆盖算法选择）
      Test: apps/core/src/brain/__tests__/focus.test.js
- [ ] POST /api/brain/focus/clear 清除手动设置，恢复自动选择
      Test: apps/core/src/brain/__tests__/focus.test.js
- [ ] GET /api/brain/status 返回的 Decision Pack 包含 daily_focus 字段
      Test: apps/core/src/brain/__tests__/focus.test.js
- [ ] 焦点选择算法按优先级规则正确选择（is_pinned > P0 > 80%+ 进度 > 最近活动）
      Test: apps/core/src/brain/__tests__/focus.test.js

### 测试验收

- [ ] npm run qa 通过（在 apps/core 目录）
      Test: contract:CI
