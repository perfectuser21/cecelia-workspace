---
id: dod-cecelia-chat-api
version: 1.0.0
created: 2026-01-31
updated: 2026-01-31
changelog:
  - 1.0.0: 初始版本
---

# DoD - Cecelia 前台对话 API

QA: docs/QA-DECISION.md

## 验收标准

### 功能验收
- [x] POST /api/cecelia/chat 带 {"message":"创建任务：测试"} 返回 200，body 含 success/reply/intent/action_result
      Test: tests/cecelia-chat.test.ts
- [x] 创建类意图（create_task）执行后数据库新增记录，action_result.data 含 id
      Test: tests/cecelia-chat.test.ts
- [x] {"message":"当前有哪些任务"} 返回 query_status 意图，action_result.data 为数组
      Test: tests/cecelia-chat.test.ts
- [x] {"message":"asdfghjkl"} 返回 200 + intent.type="unknown" + 中文 reply
      Test: tests/cecelia-chat.test.ts
- [x] 缺少 message 或非字符串返回 400
      Test: tests/cecelia-chat.test.ts
- [x] 现有 /api/brain/parse-intent 和 /api/brain/intent-to-tasks 行为不变
      Test: manual:curl 验证现有端点响应格式不变

### 测试验收
- [x] tests/cecelia-chat.test.ts 全部通过
      Test: npm test
