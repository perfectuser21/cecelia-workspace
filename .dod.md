---
id: dod-organ-unification-phase1
version: 1.0.0
created: 2026-01-30
updated: 2026-01-30
changelog:
  - 1.0.0: Initial version - Organ Unification Phase 1
---

# DoD: 器官统一 Phase 1 - 强化聚合层

QA: docs/QA-DECISION.md

## 验收标准

### 功能验收

#### 1. `/api/system/status` 聚合端点
- [ ] 返回 brain 状态（health, focus, tick, tasks）
      Test: tests/system-status.test.ts
- [ ] 返回 quality 状态（health, queueLength, lastRun）
      Test: tests/system-status.test.ts
- [ ] 返回 workflows 状态（health, activeWorkers, pendingTasks）
      Test: tests/system-status.test.ts
- [ ] 服务不可用时返回 unavailable 状态（降级）
      Test: tests/system-status.test.ts

#### 2. `/api/panorama/full` 系统全景
- [ ] 返回 vps 监控数据
      Test: tests/panorama-full.test.ts
- [ ] 返回 brain 聚合数据
      Test: tests/panorama-full.test.ts
- [ ] 返回 quality 聚合数据
      Test: tests/panorama-full.test.ts
- [ ] 返回 github 聚合数据
      Test: tests/panorama-full.test.ts
- [ ] 返回 services 健康状态列表
      Test: tests/panorama-full.test.ts

#### 3. 请求日志中间件
- [ ] 记录请求 timestamp, path, method
      Test: manual:curl + psql 验证
- [ ] 记录响应 status
      Test: manual:curl + psql 验证

### 测试验收
- [ ] pnpm build 通过
      Test: contract:build
- [ ] 单元测试通过
      Test: npm test
