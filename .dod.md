---
id: dod-planner-agent
version: 1.0.0
created: 2026-01-31
updated: 2026-01-31
changelog:
  - 1.0.0: 初始版本
---

# DoD - Planner Agent

QA: docs/QA-DECISION.md

## 验收标准

### 功能验收
- [x] planNextTask() 能选出最该推进的 KR → Project → Task
      Test: apps/core/src/brain/__tests__/planner.test.js
- [x] 没有 queued task 时 planner 返回 needs_planning
      Test: apps/core/src/brain/__tests__/planner.test.js
- [x] tick 集成 planner：queued=0 时自动触发规划
      Test: apps/core/src/brain/__tests__/planner.test.js
- [x] POST /api/brain/plan 接受输入创建正确层级记录
      Test: apps/core/src/brain/__tests__/planner.test.js
- [x] GET /api/brain/plan/status 返回当前规划状态
      Test: apps/core/src/brain/__tests__/planner.test.js
- [x] project_kr_links 表创建成功
      Test: apps/core/src/brain/__tests__/planner.test.js
- [x] 五条硬约束在代码中强制执行
      Test: apps/core/src/brain/__tests__/planner.test.js

### 测试验收
- [x] planner.test.js 14 个测试全部通过
      Test: apps/core/src/brain/__tests__/planner.test.js
