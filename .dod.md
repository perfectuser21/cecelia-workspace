---
id: dod-tick-auto-loop
version: 1.0.0
created: 2026-01-31
updated: 2026-01-31
changelog:
  - 1.0.0: 初始版本
---

# DoD - Brain Tick 自动循环机制

## QA Decision: NO_RCI

参考 docs/QA-DECISION.md

## 验收清单

### 功能验收

- [ ] tick.js 新增 startTickLoop() 启动 setInterval 循环
- [ ] tick.js 新增 stopTickLoop() 停止循环
- [ ] tick.js 新增 runTickSafe() 带防重入锁的 tick 执行
- [ ] 防重入锁：并发调用不会同时执行 tick
- [ ] 超时保护：tick 执行超 60 秒自动释放锁
- [ ] enableTick() 联动 startTickLoop()
- [ ] disableTick() 联动 stopTickLoop()
- [ ] getTickStatus() 返回 loop_running 字段
- [ ] server.ts 启动时自动检查并拉起循环

### 测试验收

- [ ] 防重入锁测试
- [ ] 超时释放测试
- [ ] startTickLoop/stopTickLoop 测试
- [ ] 所有现有测试通过

### 集成验收

- [ ] enable API 调用后循环启动
- [ ] disable API 调用后循环停止
- [ ] execution-callback 仍可触发 tick（L1 事件加速保留）
