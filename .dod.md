---
id: dod-inbox-ui
version: 1.0.0
created: 2026-02-22
updated: 2026-02-22
changelog:
  - 1.0.0: 初始版本
---

# DoD: Dashboard 收件箱 UI

## 验收清单

### Feature 结构
- [ ] `apps/core/features/inbox/` 模块创建 | Test: 目录存在，index.ts 导出 manifest
- [ ] Feature 注册到 `features/index.ts` | Test: buildCoreConfig 包含 inbox 路由
- [ ] 导航栏显示"收件箱"入口 | Test: 侧边栏可见，路由 `/inbox` 可访问

### 核心组件
- [ ] InboxPage 展示 pending_approval 提案列表 | Test: 页面加载，调用 pending-actions API
- [ ] ProposalCard 显示类型图标、标题、时间、摘要 | Test: 卡片渲染正确
- [ ] 批准操作调用 POST approve API | Test: 点击批准，API 调用，卡片消失
- [ ] 拒绝操作调用 POST reject API | Test: 点击拒绝，API 调用，卡片消失
- [ ] ProposalOptions 选项选择 | Test: 多选项提案显示选项按钮，点击调用 select API
- [ ] ProposalChat 追问对话 | Test: 点击追问展开，发送消息，显示回复

### 实时更新
- [ ] useWebSocket hook 连接 Brain WebSocket | Test: 连接成功，收到事件
- [ ] WebSocket 自动重连（指数退避） | Test: 断开后自动重连
- [ ] WebSocket 断开时 fallback 到 10s 轮询 | Test: 断连后继续更新数据
- [ ] proposal:created 事件实时添加新提案 | Test: 新提案自动出现
- [ ] proposal:resolved 事件移除已处理提案 | Test: 已处理提案自动消失

### 导航角标
- [ ] InboxBadge 显示未读提案数 | Test: 有提案时显示数字，无提案时隐藏

### HEARTBEAT 编辑器
- [ ] Markdown 编辑器显示 HEARTBEAT.md 内容 | Test: GET API 获取内容
- [ ] 保存按钮调用 PUT API | Test: 修改后保存成功
- [ ] API 不可用时显示友好提示 | Test: 404 时不报错

### 构建
- [ ] TypeScript 编译无错误 | Test: `npm run build` 成功
- [ ] 无新 lint 警告 | Test: `npm run lint` 无新增警告
