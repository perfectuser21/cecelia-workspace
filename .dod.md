---
id: dod-kr2-prd-trd-validation
version: 1.0.0
created: 2026-01-31
updated: 2026-01-31
changelog:
  - 1.0.0: 初始版本
---

# DoD - PRD/TRD 验证层

QA: docs/QA-DECISION.md

## 验收标准

### 功能验收 - validatePrd
- [x] 检查 4 个必填 section（背景/目标/功能需求/验收标准）
      Test: apps/core/src/brain/__tests__/validation.test.js
- [x] 缺少必填 section 返回 error
      Test: apps/core/src/brain/__tests__/validation.test.js
- [x] 检测 TBD 占位符返回 warning
      Test: apps/core/src/brain/__tests__/validation.test.js
- [x] 内容过短（< 50 字符）返回 warning
      Test: apps/core/src/brain/__tests__/validation.test.js

### 功能验收 - validateTrd
- [x] 检查 5 个必填 section（技术背景/架构设计/API 设计/数据模型/测试策略）
      Test: apps/core/src/brain/__tests__/validation.test.js
- [x] 缺少必填 section 返回 error
      Test: apps/core/src/brain/__tests__/validation.test.js

### API 验收
- [x] POST /api/brain/validate/prd 返回 { valid, errors, warnings }
      Test: manual:curl
- [x] POST /api/brain/validate/trd 返回 { valid, errors, warnings }
      Test: manual:curl
- [x] generate/prd 返回包含 validation 字段
      Test: manual:curl
- [x] generate/trd 返回包含 validation 字段
      Test: manual:curl

### 回归验收
- [x] 现有测试全部通过
      Test: manual:vitest run
