---
id: dod-kr2-prd-trd-validation
version: 1.0.0
created: 2026-01-31
updated: 2026-01-31
changelog:
  - 1.0.0: 初始版本
---

# DoD - PRD/TRD 验证层与标准化度量

QA: docs/QA-DECISION.md

## 验收标准

### 功能验收 - validatePrd
- [x] validatePrd() 对完整 PRD 返回 { valid: true, score >= 80 }
      Test: apps/core/src/brain/__tests__/templates.test.js
- [x] validatePrd() 对缺少"成功标准"的 PRD 返回 { valid: false } 并包含具体错误
      Test: apps/core/src/brain/__tests__/templates.test.js
- [x] validatePrd() 检测模糊词（"优化"、"改进"）并降低评分
      Test: apps/core/src/brain/__tests__/templates.test.js

### 功能验收 - validateTrd
- [x] validateTrd() 对完整 TRD 返回 { valid: true }
      Test: apps/core/src/brain/__tests__/templates.test.js
- [x] validateTrd() 对缺少必需 section 的 TRD 返回 { valid: false }
      Test: apps/core/src/brain/__tests__/templates.test.js

### 功能验收 - API 端点
- [x] POST /api/brain/validate/prd 返回 200 + { valid, score, errors } JSON
      Test: apps/core/src/brain/__tests__/templates.test.js
- [x] POST /api/brain/validate/trd 返回 200 + { valid, errors } JSON
      Test: apps/core/src/brain/__tests__/templates.test.js

### 功能验收 - Decomposer 统一调用
- [x] Decomposer generatePRD() 调用 renderPrd() 生成标准格式
      Test: apps/core/src/brain/__tests__/templates.test.js
- [x] Decomposer 生成的 PRD 包含标准 frontmatter
      Test: apps/core/src/brain/__tests__/templates.test.js

### 回归验收
- [x] 现有测试全部通过
      Test: manual:npm test
