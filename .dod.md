---
id: dod-tick-dispatch
version: 1.0.0
created: 2026-01-31
updated: 2026-01-31
changelog:
  - 1.0.0: 初始版本
---

# DoD - Tick Dispatch

## QA Decision: NO_RCI

理由：纯后端逻辑，无 UI 变更，无跨仓库依赖。单元测试覆盖即可。

## Acceptance Checklist

### Functional
- [ ] tick.js: dispatchNextTask() 函数
- [ ] tick.js: selectNextDispatchableTask() 按优先级选任务
- [ ] tick.js: executeTick() 在 decision 之后调用 dispatch
- [ ] 并发限制：MAX_CONCURRENT_TASKS=1 生效
- [ ] 依赖检查：有未完成依赖的任务不被 dispatch
- [ ] 冷却期：dispatch 后 DISPATCH_COOLDOWN_MS 内不重复 dispatch
- [ ] 超时检测：in_progress 超 30 分钟自动标记 failed

### Callback 回写
- [ ] execution-callback 更新 task 状态
- [ ] 完成后更新 KR 进度
- [ ] 完成后更新 O 进度

### API
- [ ] tick/status 返回 last_dispatch 信息

### Tests
- [ ] dispatchNextTask 选择正确任务
- [ ] 并发限制测试
- [ ] 依赖跳过测试
- [ ] 超时检测测试
- [ ] 所有现有 brain 测试通过
