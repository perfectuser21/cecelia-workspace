# DoD - 修复 Goals API workspaces JOIN 错误

## 验收清单

### 功能验收

- [ ] **API 查询成功**
  - Test: `curl http://localhost:5211/api/tasks/goals`
  - Expected: 返回 goals 数组，不报错
  - RCI: `tests/api/goals.test.js` - test_goals_list_success

- [ ] **前端 OKR 显示正常**
  - Test: 访问 `/work/okr`，检查是否显示 OKR 数据
  - Expected: 不再显示 "no OKR yet"
  - RCI: manual

- [ ] **返回数据格式正确**
  - Test: 检查返回的 goal 对象结构
  - Expected: 包含 business、department 对象，不包含 area
  - RCI: `tests/api/goals.test.js` - test_goals_response_format

- [ ] **area_id 字段保留**
  - Test: 检查返回数据中的 area_id
  - Expected: area_id 字段存在且为原值
  - RCI: `tests/api/goals.test.js` - test_goals_area_id_preserved

- [ ] **其他 goals API 正常**
  - Test: 测试 POST, PATCH goals
  - Expected: 创建、更新功能正常
  - RCI: `tests/api/goals.test.js` - test_goals_crud

### 构建验收

- [ ] **前端构建通过**
  - Test: `npm run build`
  - Expected: 无错误，无 TypeScript 类型错误
  - RCI: CI build job

- [ ] **无代码质量问题**
  - Test: ESLint check
  - Expected: 无新增警告
  - RCI: CI lint job

### 性能验收

- [ ] **查询性能未降低**
  - Test: 对比修改前后 API 响应时间
  - Expected: 响应时间 < 200ms
  - RCI: manual
