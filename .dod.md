# Definition of Done - PR Plans Phase 2 (Option B)

## Feature 1: ä¾èµ–å…³ç³»å›¾å¯è§†åŒ– âœ…

**éªŒæ”¶æ ‡å‡†**ï¼š

- [ ] **ä¾èµ–**: React Flow å·²å®‰è£… (`npm install reactflow`)
  - **Test**: `grep "reactflow" package.json` èƒ½æ‰¾åˆ°

- [ ] **ç»„ä»¶**: `PRPlanDependencyGraph.tsx` ç»„ä»¶å·²åˆ›å»º
  - **Test**: `apps/core/features/planning/components/PRPlanDependencyGraph.tsx` æ–‡ä»¶å­˜åœ¨

- [ ] **æ•°æ®è½¬æ¢**: PR Plans â†’ React Flow nodes/edges è½¬æ¢é€»è¾‘æ­£ç¡®
  - **Test**: ç»„ä»¶èƒ½æ¥æ”¶ `PRPlan[]` å¹¶æ¸²æŸ“èŠ‚ç‚¹å’Œè¾¹

- [ ] **èŠ‚ç‚¹æ ·å¼**: æ ¹æ®çŠ¶æ€æ˜¾ç¤ºä¸åŒé¢œè‰²
  - Completed: ç»¿è‰²è¾¹æ¡†
  - In Progress: è“è‰²è¾¹æ¡† + åŠ¨ç”»
  - Planning: ç°è‰²è¾¹æ¡†
  - Blocked: é»„è‰²è¾¹æ¡† + è™šçº¿
  - **Test**: è§†è§‰æ£€æŸ¥ï¼Œä¸åŒçŠ¶æ€æ˜¾ç¤ºä¸åŒé¢œè‰²

- [ ] **äº¤äº’**: ç‚¹å‡»èŠ‚ç‚¹é«˜äº®ä¾èµ–é“¾
  - **Test**: æ‰‹åŠ¨æµ‹è¯•ï¼Œç‚¹å‡»èŠ‚ç‚¹èƒ½é«˜äº®ç›¸å…³èŠ‚ç‚¹

- [ ] **é›†æˆ**: åœ¨ InitiativeDetail é¡µé¢æ˜¾ç¤ºä¾èµ–å›¾
  - **Test**: `/planning/initiatives/:id` é¡µé¢èƒ½çœ‹åˆ°ä¾èµ–å›¾ç»„ä»¶

---

## Feature 3: ç¼–è¾‘ PR Plan çŠ¶æ€ âœ…

**éªŒæ”¶æ ‡å‡†**ï¼š

- [ ] **Brain API ç«¯ç‚¹**: `PUT /api/brain/pr-plans/:id` å·²å®ç°ï¼ˆå¦‚ä¸å­˜åœ¨éœ€åˆ›å»ºï¼‰
  - **Test**: `curl -X PUT http://localhost:5221/api/brain/pr-plans/test-id -H "Content-Type: application/json" -d '{"status":"in_progress"}'` è¿”å›æˆåŠŸæˆ– 404ï¼ˆè¯´æ˜è·¯ç”±å­˜åœ¨ï¼‰

- [ ] **å‰ç«¯ API å®¢æˆ·ç«¯**: `pr-plans.api.ts` ä¸­æœ‰ `updatePRPlanStatus()` å‡½æ•°
  - **Test**: `grep "updatePRPlanStatus" apps/core/features/planning/api/pr-plans.api.ts` èƒ½æ‰¾åˆ°

- [ ] **UI èœå•**: PRPlanCard ç»„ä»¶æœ‰çŠ¶æ€ä¸‹æ‹‰èœå•
  - **Test**: æŸ¥çœ‹ `PRPlanCard.tsx` æ–‡ä»¶ï¼Œæœ‰èœå•æŒ‰é’®å’Œä¸‹æ‹‰é€»è¾‘

- [ ] **çŠ¶æ€è½¬æ¢éªŒè¯**: ä¸èƒ½è·³è¿‡çŠ¶æ€ï¼ˆplanning â†’ completedï¼‰
  - **Test**: å‰ç«¯ä»£ç ä¸­æœ‰çŠ¶æ€è½¬æ¢éªŒè¯é€»è¾‘

- [ ] **ä¾èµ–æ£€æŸ¥**: å¦‚æœæœ‰ä¾èµ–æœªå®Œæˆï¼Œä¸èƒ½æ ‡è®°ä¸º in_progress
  - **Test**: ä»£ç ä¸­æœ‰æ£€æŸ¥ `depends_on` çš„é€»è¾‘

- [ ] **UI æ›´æ–°**: çŠ¶æ€æ›´æ–°åï¼ŒUI è‡ªåŠ¨åˆ·æ–°
  - **Test**: æ‰‹åŠ¨æµ‹è¯•ï¼Œä¿®æ”¹çŠ¶æ€åå¡ç‰‡é¢œè‰²/å›¾æ ‡å˜åŒ–

---

## Feature 4: é“¾æ¥åˆ° Tasks è§†å›¾ âœ…

**éªŒæ”¶æ ‡å‡†**ï¼š

- [ ] **å¯¼èˆªæŒ‰é’®**: PRPlanCard æœ‰ "View Tasks" æŒ‰é’®ï¼ˆå½“ tasks_count > 0ï¼‰
  - **Test**: `grep "View Tasks" apps/core/features/planning/components/PRPlanCard.tsx` èƒ½æ‰¾åˆ°

- [ ] **è·¯ç”±è·³è½¬**: ç‚¹å‡»æŒ‰é’®è·³è½¬åˆ° `/planning/tasks?pr_plan_id=X`
  - **Test**: ä»£ç ä¸­æœ‰ `navigate(\`/planning/tasks?pr_plan_id=\${prPlan.id}\`)` æˆ–ç±»ä¼¼é€»è¾‘

- [ ] **Tasks é¡µé¢è¿‡æ»¤**: Tasks é¡µé¢æ”¯æŒ `pr_plan_id` å‚æ•°
  - **Test**: æ£€æŸ¥ `apps/core/features/planning/pages/Tasks.tsx`ï¼ˆæˆ–ç±»ä¼¼æ–‡ä»¶ï¼‰ï¼Œæœ‰è¯»å– `pr_plan_id` æŸ¥è¯¢å‚æ•°çš„é€»è¾‘

- [ ] **é«˜äº®æ˜¾ç¤º**: ä» PR Plan è·³è½¬çš„ä»»åŠ¡æœ‰è§†è§‰åŒºåˆ†
  - **Test**: Tasks é¡µé¢ä»£ç ä¸­æœ‰æ ¹æ®æ¥æºé«˜äº®çš„é€»è¾‘ï¼ˆå¯é€‰ï¼Œå¦‚æ—¶é—´ä¸å¤Ÿå¯è·³è¿‡ï¼‰

- [ ] **é¢åŒ…å±‘**: æ˜¾ç¤ºå¯¼èˆªè·¯å¾„ï¼ˆInitiative â†’ PR Plan â†’ Tasksï¼‰
  - **Test**: Tasks é¡µé¢æœ‰é¢åŒ…å±‘ç»„ä»¶ï¼ˆå¯é€‰ï¼‰

---

## é€šç”¨éªŒæ”¶æ ‡å‡† âœ…

- [ ] **TypeScript**: æ‰€æœ‰æ–°ä»£ç æ—  TypeScript é”™è¯¯
  - **Test**: `npm run build` æˆåŠŸ

- [ ] **æ—  console.log**: ç”Ÿäº§ä»£ç ä¸­æ— è°ƒè¯•æ—¥å¿—
  - **Test**: `grep -r "console.log" apps/core/features/planning/` æ— ç»“æœï¼ˆé™¤äº†é”™è¯¯å¤„ç†çš„ console.errorï¼‰

- [ ] **Tailwind è§„èŒƒ**: ä½¿ç”¨ Tailwind CSSï¼Œéµå¾ªç°æœ‰è®¾è®¡ç³»ç»Ÿ
  - **Test**: ä»£ç å®¡æŸ¥ï¼Œclass åç§°ç¬¦åˆ Tailwind è§„èŒƒ

- [ ] **å“åº”å¼**: ç»„ä»¶åœ¨ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯éƒ½èƒ½æ­£å¸¸æ˜¾ç¤º
  - **Test**: è§†è§‰æ£€æŸ¥ï¼ˆå¯é€‰ï¼Œæ—¶é—´ä¸å¤Ÿå¯è·³è¿‡ï¼‰

- [ ] **æš—è‰²æ¨¡å¼**: æ”¯æŒ dark modeï¼ˆä½¿ç”¨ dark: å‰ç¼€ï¼‰
  - **Test**: ä»£ç ä¸­æœ‰ `dark:` class

---

## ğŸš« ä¸åœ¨æœ¬æ¬¡èŒƒå›´å†…

- Feature 2: å®æ—¶çŠ¶æ€æ›´æ–°ï¼ˆWebSocketï¼‰
- Feature 5: æ–‡ä»¶åˆ—è¡¨æ˜¾ç¤º
- Feature 6: å¿«é€Ÿæ“ä½œæŒ‰é’®
- æ‰¹é‡æ“ä½œã€å†å²è®°å½•ã€è¯„è®ºç³»ç»Ÿ

è¿™äº›åŠŸèƒ½ç•™å¾…åç»­ Phase 3 å®ç°ã€‚
