---
id: dod-core-frontend-restructure
version: 1.1.0
created: 2026-01-31
updated: 2026-01-31
changelog:
  - 1.1.0: 补充缺失验收项（Dashboard Area 卡片、console error、路由列表）
  - 1.0.0: 初始版本
---

# DoD - Core 前端重构：5 域 → 6 条线

QA: docs/QA-DECISION.md

## 验收标准

### 功能验收

- [ ] Phase 1: 18 个死代码/占位文件已删除，manifest 中对应引用已清理
      Test: manual:运行 ls 确认文件不存在 + npm run build 通过
- [ ] Phase 2: /planning redirect 到 /planner；ProjectsPage 组件已删除；TaskMonitor 已删除；AIDetail 已删除；/command/* 路由保留精简版
      Test: manual:访问 /planning 验证 redirect 到 /planner
- [ ] Phase 3: 6 个新域目录已创建（dashboard/daily/gtd/content/aidev/brain），每个目录包含 index.ts manifest 和 pages/ 子目录
      Test: manual:运行 find apps/core/features/{dashboard,daily,gtd,content,aidev,brain} -name "index.ts" | wc -l 应返回 6
- [ ] Phase 4: features/index.ts 注册 6 个新域，侧边栏显示 6 条线导航
      Test: manual:localhost:5212 截图验证导航包含 Dashboard/Daily/GTD/Content/AI Dev/Super Brain
- [ ] Phase 5: isCoreInstance() 增加 port === '5212' 检测
      Test: manual:localhost:5212 打开后 document.body 有 instance-core class
- [ ] Phase 6: shared/api/client.ts 作为统一 axios 实例，旧域级 client.ts 文件已删除
      Test: manual:grep -r "axios.create" apps/core/features/ 只在 shared/api/client.ts 出现
- [ ] Phase 7: areas 表已创建，GET /api/areas 返回 9 个 Area，projects 表有 area_id 字段
      Test: manual:curl http://localhost:5212/api/areas | jq length 返回 9
- [ ] Dashboard 页面显示 Area 卡片
      Test: manual:访问 localhost:5212 截图验证 Area 卡片存在
- [ ] 页面加载后 DevTools Console 无 Error 级别信息
      Test: manual:打开 DevTools Console 确认无红色错误
- [ ] projects 查询不受 area_id 新增字段影响
      Test: manual:curl http://localhost:5212/api/tasks/projects 返回正常数据

### 测试验收

- [ ] npm run build 通过
      Test: manual:运行 build 无错误
