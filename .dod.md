---
version: 4.0.0
updated: 2026-01-29
changelog:
  - 4.0.0: PRD 04 - Action Loop（定时 Tick）
  - 3.0.0: PRD 03 - 优先级引擎（今日焦点选择）
  - 2.0.0: PRD 02 - OKR Tree CRUD API
  - 1.0.1: 添加 migrateGoalsTable 迁移函数验收项
  - 1.0.0: 初始版本
---

# DoD - Action Loop（定时 Tick）

QA: docs/QA-DECISION.md

## 验收标准

### 功能验收

- [ ] POST /api/brain/tick 手动触发一次 tick，返回 actions_taken 和 next_tick
      Test: apps/core/src/brain/__tests__/tick.test.js
- [ ] GET /api/brain/tick/status 返回 tick 状态（enabled、interval_minutes、last_tick、next_tick、actions_today）
      Test: apps/core/src/brain/__tests__/tick.test.js
- [ ] POST /api/brain/tick/enable 启用自动 tick
      Test: apps/core/src/brain/__tests__/tick.test.js
- [ ] POST /api/brain/tick/disable 禁用自动 tick
      Test: apps/core/src/brain/__tests__/tick.test.js
- [ ] tick 能自动选择并推进任务（根据今日焦点选择下一个 queued 任务开始）
      Test: apps/core/src/brain/__tests__/tick.test.js
- [ ] tick 能检测并记录超时任务
      Test: apps/core/src/brain/__tests__/tick.test.js
- [ ] 每次 tick 自动记录决策日志
      Test: apps/core/src/brain/__tests__/tick.test.js

### 测试验收

- [ ] npm run qa 通过（在 apps/core 目录）
      Test: contract:CI
