---
id: dod-trd-template-engine
version: 1.0.0
created: 2026-01-31
updated: 2026-01-31
changelog:
  - 1.0.0: 初始版本
---

# DoD - TRD 模板引擎升级

QA: docs/QA-DECISION.md

## 验收标准

### 功能验收 - TRD_TEMPLATE
- [ ] TRD_TEMPLATE 包含 8 个 section（overview, system_architecture, data_model, prd_decomposition, api_design, technical_decisions, acceptance_criteria, appendix）
      Test: apps/core/src/brain/__tests__/templates.test.js

### 功能验收 - renderTrd
- [ ] renderTrd() 生成包含 8 个 ## section 的 TRD
      Test: apps/core/src/brain/__tests__/templates.test.js
- [ ] renderTrd() 输出通过 validateTrd()
      Test: apps/core/src/brain/__tests__/templates.test.js

### 功能验收 - validateTrd
- [ ] validateTrd() 检查 required section（概述、系统架构、数据模型、接口设计、验收标准）
      Test: apps/core/src/brain/__tests__/templates.test.js

### 功能验收 - generateTrdFromGoalKR
- [ ] generateTrdFromGoalKR() 生成包含 KR 元数据的 TRD
      Test: apps/core/src/brain/__tests__/templates.test.js

### 功能验收 - trdToJson
- [ ] trdToJson() 返回包含 8 个 section key 的 JSON
      Test: apps/core/src/brain/__tests__/templates.test.js

### 回归验收
- [ ] PRD 相关函数不受影响
- [ ] 现有测试全部通过
      Test: manual:vitest run
