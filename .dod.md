# DoD - Brain MVP

QA: docs/BRAIN-SKILL.md

## 验收标准

### 数据库

- [x] policy 表创建成功
- [x] system_snapshot 表创建成功
- [x] decision_log 表创建成功
- [x] working_memory 表创建成功

### Brain 模块

- [x] actions.js - 7 个 Action 实现
- [x] orchestrator.js - 状态查询函数
- [x] perception.js - 系统感知（probeN8n, probeTaskSystem）
- [x] routes.js - API 路由（白名单 + 幂等）

### API 端点

- [ ] GET /api/brain/status 返回决策包
      Test: `curl -s http://localhost:5212/api/brain/status | jq`

- [ ] GET /api/brain/status/full 返回完整状态
      Test: `curl -s http://localhost:5212/api/brain/status/full | jq`

- [ ] GET /api/brain/memory 返回工作记忆
      Test: `curl -s http://localhost:5212/api/brain/memory | jq`

- [ ] POST /api/brain/action/update-task 支持幂等
      Test: `curl -X POST http://localhost:5212/api/brain/action/update-task -H "Content-Type: application/json" -d '{"task_id":"test","status":"in_progress","idempotency_key":"test-key"}'`

### 安全机制

- [x] 白名单限制 7 个 Action
- [x] 幂等性检查（5 分钟 TTL）
- [x] 内部自动记录决策日志

### 集成

- [ ] Brain routes 集成到 dashboard/server.ts
- [ ] TypeScript 构建通过
- [ ] CI 通过

### 文档

- [x] docs/BRAIN-SKILL.md 完成
- [x] CLAUDE.md（项目规则）完成
