---
id: prd-livemonitor-v12
version: 1.0.0
created: 2026-02-21
updated: 2026-02-21
changelog:
  - 1.0.0: 初始版本
---

# LiveMonitor v12 — 活跃项目按根项目分组

## 背景
v11 的"活跃项目"模块按 leaf project_id 分组，导致 I4.1、I4.2、L2、L1 等子项目作为独立卡片显示，用户看不出它们之间的关系。

## 目标
将任务按根祖先项目（parent_id 链顶端）分组，同一根项目下的子项目显示在同一卡片内。

## 需求
1. `findRoot(projectId, projectMap)` 函数：沿 parent_id 链向上遍历，返回根项目（parent_id = null）
2. 分组逻辑：每个根项目一张卡片，卡片内显示各子项目行
3. 卡片头部：根项目名称 + 进行中/排队统计
4. 卡片内容：子项目行（子项目名称 + 状态 dot + 任务计数）
5. 若任务直接挂在根项目下（无子项），则显示任务列表而非子项目行
6. 排序：按进行中任务数降序，其次按排队数降序

## 验收
- I4.1 和 I4.2 出现在同一张"免疫有效性监控"卡片内
- 卡片内子项目行清晰展示状态
- 页面正常构建无 TS 错误

## 功能描述
修复 ActiveProjects 组件的项目分组逻辑，将当前按 leaf project_id 分组改为按根祖先项目（root）分组。

## 成功标准
活跃项目面板中，I4.1/I4.2 等子项目同时显示在根项目"免疫有效性监控"卡片内，用户能清晰看到项目层级关系。
