---
id: dod-kr1-intent-recognition
version: 1.0.0
created: 2026-02-01
updated: 2026-02-01
changelog:
  - 1.0.0: 初始版本
---

# DoD - [Retry] Advance "KR1: 意图识别 - 自然语言→OKR/Project/Task"

QA: docs/QA-DECISION.md

## 验收标准

### 功能验收

#### 1. API 端点实现
- [ ] 实现 `POST /api/brain/recognize-intent` API 端点，接受 `text` 和可选 `context` 参数
      Test: apps/core/src/brain/__tests__/intent-recognition.test.js
- [ ] API 返回包含 intent、confidence、entities、suggested_action 的 JSON 格式
      Test: apps/core/src/brain/__tests__/intent-recognition.test.js

#### 2. 意图识别能力
- [ ] 能够识别 create_objective (创建目标) 意图
      Test: apps/core/src/brain/__tests__/intent-recognition.test.js
- [ ] 能够识别 create_key_result (创建关键结果) 意图
      Test: apps/core/src/brain/__tests__/intent-recognition.test.js
- [ ] 能够识别 create_project (创建项目) 意图
      Test: apps/core/src/brain/__tests__/intent-recognition.test.js
- [ ] 能够识别 create_task (创建任务) 意图
      Test: apps/core/src/brain/__tests__/intent-recognition.test.js
- [ ] 能够识别 query_status (查询状态) 意图
      Test: apps/core/src/brain/__tests__/intent-recognition.test.js

#### 3. 实体提取准确性
- [ ] 从"我想做一个登录功能，优先级很高"中提取 title、priority (P0)、type (task)
      Test: apps/core/src/brain/__tests__/intent-recognition.test.js
- [ ] 从"创建一个提升用户体验的 OKR，包含3个 KR"中识别 create_objective 意图和多个 KR 需求
      Test: apps/core/src/brain/__tests__/intent-recognition.test.js
- [ ] 置信度 < 0.6 时返回 ambiguities 字段提示用户输入不够明确
      Test: apps/core/src/brain/__tests__/intent-recognition.test.js

#### 4. 结构化输出
- [ ] 返回 JSON 包含 intent (字符串)
      Test: apps/core/src/brain/__tests__/intent-recognition.test.js
- [ ] 返回 JSON 包含 confidence (0-1 数值)
      Test: apps/core/src/brain/__tests__/intent-recognition.test.js
- [ ] 返回 JSON 包含 entities (对象)
      Test: apps/core/src/brain/__tests__/intent-recognition.test.js
- [ ] 返回 JSON 包含 suggested_action (包含 api 和 payload)
      Test: apps/core/src/brain/__tests__/intent-recognition.test.js
- [ ] 如有歧义返回 ambiguities 字段
      Test: apps/core/src/brain/__tests__/intent-recognition.test.js

### 测试验收

- [ ] 单元测试覆盖率 > 80%: 运行 `npm test -- apps/core/src/brain/__tests__/intent-recognition.test.js` 通过
      Test: apps/core/src/brain/__tests__/intent-recognition.test.js
- [ ] 手动测试至少 10 个不同的自然语言输入，8 个以上识别正确
      Test: manual:测试以下 10 个案例，记录结果到 docs/KR1-TEST-RESULTS.md，验证至少 8 个识别正确
      1. "我想做一个登录功能，优先级很高" → create_task, priority=P0
      2. "创建一个提升用户体验的 OKR，包含3个 KR" → create_objective, 识别多KR需求
      3. "帮我新建一个项目叫 user-management" → create_project
      4. "查看当前有哪些任务" → query_status
      5. "添加一个关键结果：用户留存率提升 20%" → create_key_result
      6. "做个紧急任务修复登录 bug" → create_task, priority=P0
      7. "创建目标：提升系统稳定性" → create_objective
      8. "新增 KR：API 响应时间小于 200ms" → create_key_result
      9. "建立一个新项目处理数据分析" → create_project
      10. "看看目前进度怎么样" → query_status
- [ ] CI 通过: GitHub Actions 运行成功
      Test: manual:检查 GitHub Actions 所有 jobs 为绿色

### 文档验收

- [ ] 创建 `docs/KR1-INTENT-RECOGNITION.md` 文档
      Test: manual:检查文件存在
- [ ] 文档包含支持的意图类型列表（至少 5 种）
      Test: manual:打开文档，验证包含表格列出 create_objective、create_key_result、create_project、create_task、query_status
- [ ] 文档包含实体提取的规则说明
      Test: manual:验证文档说明了如何从自然语言提取 title、priority、type 等字段
- [ ] 文档包含 API 使用示例（至少 2 个完整的 request/response 示例）
      Test: manual:验证文档包含 curl 命令示例和返回 JSON 示例
- [ ] 文档包含已知限制和未来改进方向
      Test: manual:验证文档有专门章节说明当前不支持的功能和计划改进
