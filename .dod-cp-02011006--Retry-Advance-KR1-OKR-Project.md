# DoD - KR1: 意图识别 - 自然语言→OKR/Project/Task

QA: docs/QA-DECISION.md

## 验收标准

### 功能验收

#### API 端点实现
- [ ] API 端点 `POST /api/intent/recognize` 可以接收自然语言输入
      Test: tests/intent-recognition.test.ts
- [ ] API 返回结构化的 JSON 响应，包含识别的意图类型和提取的实体
      Test: tests/intent-recognition.test.ts

#### 意图识别能力
- [ ] 能够正确识别至少 5 种意图类型（创建 Goal/Project/Task、查询、更新）
      Test: tests/intent-recognition.test.ts
- [ ] 对于明确的创建类请求（如"创建一个任务：实现登录"），准确率 100%
      Test: tests/intent-recognition.test.ts
- [ ] 对于模糊的请求（如"搞一个登录"），能够识别为创建任务并提示用户确认
      Test: tests/intent-recognition.test.ts
- [ ] 能够区分 Goal（宏观目标）、Project（项目）和 Task（具体任务）的语义差异
      Test: tests/intent-recognition.test.ts

#### 实体提取能力
- [ ] 从自然语言中提取标题信息
      Test: tests/intent-recognition.test.ts
- [ ] 从自然语言中提取优先级信息（P0/P1/P2）
      Test: tests/intent-recognition.test.ts
- [ ] 从自然语言中提取关联关系等关键信息
      Test: tests/intent-recognition.test.ts

#### 用户确认机制
- [ ] 在执行操作前向用户展示理解的内容（包含意图类型和提取的实体）
      Test: tests/intent-recognition.test.ts
- [ ] 用户确认机制正常工作（接受/拒绝识别结果）
      Test: tests/intent-recognition.test.ts

#### 集成验证
- [ ] 与现有的 Brain API 集成，可以通过 `/api/brain/action/*` 执行识别出的操作
      Test: tests/integration/brain-intent.test.ts
- [ ] 与现有的 Task Management API 集成，支持任务的 CRUD 操作
      Test: tests/integration/task-intent.test.ts
- [ ] 提供完整的 TypeScript 类型支持
      Test: manual:代码编译通过且无类型错误

### 测试验收

#### 单元测试
- [ ] 单元测试覆盖核心识别逻辑
      Test: tests/intent-recognition.test.ts
- [ ] 至少 10 个真实场景的测试用例
      Test: tests/intent-recognition.test.ts

#### 集成测试
- [ ] 集成测试验证完整的识别→执行流程
      Test: tests/integration/brain-intent.test.ts

#### 验收场景测试
- [ ] 场景1：创建 Task - "实现用户登录接口" → 正确识别 CREATE_TASK
      Test: tests/intent-recognition.test.ts
- [ ] 场景2：创建 Goal - "完成整个用户认证系统作为 P0 目标" → 正确识别 CREATE_GOAL 和 P0
      Test: tests/intent-recognition.test.ts
- [ ] 场景3：查询任务 - "我有哪些待办任务" → 正确识别 QUERY_TASKS
      Test: tests/intent-recognition.test.ts
- [ ] 场景4：更新状态 - "把登录功能标记为完成" → 正确识别 UPDATE_TASK
      Test: tests/intent-recognition.test.ts

#### 自动化测试通过
- [ ] npm run typecheck && npm run lint && npm test 通过
      Test: CI pipeline

### 性能验收
- [ ] API 响应时间 < 500ms（在正常负载下）
      Test: tests/intent-recognition.test.ts

### 文档验收
- [ ] API 文档说明接口使用方法
      Test: manual:检查 API 文档存在且完整
- [ ] 代码注释解释关键算法逻辑
      Test: manual:代码审计时检查注释质量
